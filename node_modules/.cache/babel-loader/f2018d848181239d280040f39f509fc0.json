{"ast":null,"code":"import _slicedToArray from\"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Percent,Token}from'@uniswap/sdk-core';import{computePairAddress}from'@uniswap/v2-sdk';import{L2_CHAIN_IDS}from'constants/chains';import{L2_DEADLINE_FROM_NOW}from'constants/misc';import JSBI from'jsbi';import{useCallback,useMemo}from'react';import{shallowEqual}from'react-redux';import{useAppDispatch,useAppSelector}from'state/hooks';import{V2_FACTORY_ADDRESSES}from'../../constants/addresses';import{BASES_TO_TRACK_LIQUIDITY_FOR,PINNED_PAIRS}from'../../constants/routing';import{useAllTokens}from'../../hooks/Tokens';import{useActiveWeb3React}from'../../hooks/web3';import{addSerializedPair,addSerializedToken,removeSerializedToken,updateHideClosedPositions,updateUserClientSideRouter,updateUserDarkMode,updateUserDeadline,updateUserExpertMode,updateUserLocale,updateUserSlippageTolerance}from'./actions';function serializeToken(token){return{chainId:token.chainId,address:token.address,decimals:token.decimals,symbol:token.symbol,name:token.name};}function deserializeToken(serializedToken){return new Token(serializedToken.chainId,serializedToken.address,serializedToken.decimals,serializedToken.symbol,serializedToken.name);}export function useIsDarkMode(){var _useAppSelector=useAppSelector(function(_ref){var _ref$user=_ref.user,matchesDarkMode=_ref$user.matchesDarkMode,userDarkMode=_ref$user.userDarkMode;return{userDarkMode:userDarkMode,matchesDarkMode:matchesDarkMode};},shallowEqual),userDarkMode=_useAppSelector.userDarkMode,matchesDarkMode=_useAppSelector.matchesDarkMode;return userDarkMode===null?matchesDarkMode:userDarkMode;}export function useDarkModeManager(){var dispatch=useAppDispatch();var darkMode=useIsDarkMode();var toggleSetDarkMode=useCallback(function(){dispatch(updateUserDarkMode({userDarkMode:!darkMode}));},[darkMode,dispatch]);return[darkMode,toggleSetDarkMode];}export function useUserLocale(){return useAppSelector(function(state){return state.user.userLocale;});}export function useUserLocaleManager(){var dispatch=useAppDispatch();var locale=useUserLocale();var setLocale=useCallback(function(newLocale){dispatch(updateUserLocale({userLocale:newLocale}));},[dispatch]);return[locale,setLocale];}export function useIsExpertMode(){return useAppSelector(function(state){return state.user.userExpertMode;});}export function useExpertModeManager(){var dispatch=useAppDispatch();var expertMode=useIsExpertMode();var toggleSetExpertMode=useCallback(function(){dispatch(updateUserExpertMode({userExpertMode:!expertMode}));},[expertMode,dispatch]);return[expertMode,toggleSetExpertMode];}export function useClientSideRouter(){var dispatch=useAppDispatch();var clientSideRouter=useAppSelector(function(state){return Boolean(state.user.userClientSideRouter);});var setClientSideRouter=useCallback(function(newClientSideRouter){dispatch(updateUserClientSideRouter({userClientSideRouter:newClientSideRouter}));},[dispatch]);return[clientSideRouter,setClientSideRouter];}export function useSetUserSlippageTolerance(){var dispatch=useAppDispatch();return useCallback(function(userSlippageTolerance){var value;try{value=userSlippageTolerance==='auto'?'auto':JSBI.toNumber(userSlippageTolerance.multiply(10000).quotient);}catch(error){value='auto';}dispatch(updateUserSlippageTolerance({userSlippageTolerance:value}));},[dispatch]);}/**\n * Return the user's slippage tolerance, from the redux store, and a function to update the slippage tolerance\n */export function useUserSlippageTolerance(){var userSlippageTolerance=useAppSelector(function(state){return state.user.userSlippageTolerance;});return useMemo(function(){return userSlippageTolerance==='auto'?'auto':new Percent(userSlippageTolerance,10000);},[userSlippageTolerance]);}export function useUserHideClosedPositions(){var dispatch=useAppDispatch();var hideClosedPositions=useAppSelector(function(state){return state.user.userHideClosedPositions;});var setHideClosedPositions=useCallback(function(newHideClosedPositions){dispatch(updateHideClosedPositions({userHideClosedPositions:newHideClosedPositions}));},[dispatch]);return[hideClosedPositions,setHideClosedPositions];}/**\n * Same as above but replaces the auto with a default value\n * @param defaultSlippageTolerance the default value to replace auto with\n */export function useUserSlippageToleranceWithDefault(defaultSlippageTolerance){var allowedSlippage=useUserSlippageTolerance();return useMemo(function(){return allowedSlippage==='auto'?defaultSlippageTolerance:allowedSlippage;},[allowedSlippage,defaultSlippageTolerance]);}export function useUserTransactionTTL(){var _useActiveWeb3React=useActiveWeb3React(),chainId=_useActiveWeb3React.chainId;var dispatch=useAppDispatch();var userDeadline=useAppSelector(function(state){return state.user.userDeadline;});var onL2=Boolean(chainId&&L2_CHAIN_IDS.includes(chainId));var deadline=onL2?L2_DEADLINE_FROM_NOW:userDeadline;var setUserDeadline=useCallback(function(userDeadline){dispatch(updateUserDeadline({userDeadline:userDeadline}));},[dispatch]);return[deadline,setUserDeadline];}export function useAddUserToken(){var dispatch=useAppDispatch();return useCallback(function(token){dispatch(addSerializedToken({serializedToken:serializeToken(token)}));},[dispatch]);}export function useRemoveUserAddedToken(){var dispatch=useAppDispatch();return useCallback(function(chainId,address){dispatch(removeSerializedToken({chainId:chainId,address:address}));},[dispatch]);}export function useUserAddedTokens(){var _useActiveWeb3React2=useActiveWeb3React(),chainId=_useActiveWeb3React2.chainId;var serializedTokensMap=useAppSelector(function(_ref2){var tokens=_ref2.user.tokens;return tokens;});return useMemo(function(){var _serializedTokensMap$;if(!chainId)return[];return Object.values((_serializedTokensMap$=serializedTokensMap===null||serializedTokensMap===void 0?void 0:serializedTokensMap[chainId])!==null&&_serializedTokensMap$!==void 0?_serializedTokensMap$:{}).map(deserializeToken);},[serializedTokensMap,chainId]);}function serializePair(pair){return{token0:serializeToken(pair.token0),token1:serializeToken(pair.token1)};}export function usePairAdder(){var dispatch=useAppDispatch();return useCallback(function(pair){dispatch(addSerializedPair({serializedPair:serializePair(pair)}));},[dispatch]);}export function useURLWarningVisible(){return useAppSelector(function(state){return state.user.URLWarningVisible;});}/**\n * Given two tokens return the liquidity token that represents its liquidity shares\n * @param tokenA one of the two tokens\n * @param tokenB the other token\n */export function toV2LiquidityToken(_ref3){var _ref4=_slicedToArray(_ref3,2),tokenA=_ref4[0],tokenB=_ref4[1];if(tokenA.chainId!==tokenB.chainId)throw new Error('Not matching chain IDs');if(tokenA.equals(tokenB))throw new Error('Tokens cannot be equal');if(!V2_FACTORY_ADDRESSES[tokenA.chainId])throw new Error('No V2 factory address on this chain');return new Token(tokenA.chainId,computePairAddress({factoryAddress:V2_FACTORY_ADDRESSES[tokenA.chainId],tokenA:tokenA,tokenB:tokenB}),18,'UNI-V2','Uniswap V2');}/**\n * Returns all the pairs of tokens that are tracked by the user for the current chain ID.\n */export function useTrackedTokenPairs(){var _useActiveWeb3React3=useActiveWeb3React(),chainId=_useActiveWeb3React3.chainId;var tokens=useAllTokens();// pinned pairs\nvar pinnedPairs=useMemo(function(){var _PINNED_PAIRS$chainId;return chainId?(_PINNED_PAIRS$chainId=PINNED_PAIRS[chainId])!==null&&_PINNED_PAIRS$chainId!==void 0?_PINNED_PAIRS$chainId:[]:[];},[chainId]);// pairs for every token against every base\nvar generatedPairs=useMemo(function(){return chainId?Object.keys(tokens).flatMap(function(tokenAddress){var _BASES_TO_TRACK_LIQUI;var token=tokens[tokenAddress];// for each token on the current chain,\nreturn(// loop though all bases on the current chain\n((_BASES_TO_TRACK_LIQUI=BASES_TO_TRACK_LIQUIDITY_FOR[chainId])!==null&&_BASES_TO_TRACK_LIQUI!==void 0?_BASES_TO_TRACK_LIQUI:[]).map(function(base){if(base.address===token.address){return null;}else{return[base,token];}}).filter(function(p){return p!==null;}));}):[];},[tokens,chainId]);// pairs saved by users\nvar savedSerializedPairs=useAppSelector(function(_ref5){var pairs=_ref5.user.pairs;return pairs;});var userPairs=useMemo(function(){if(!chainId||!savedSerializedPairs)return[];var forChain=savedSerializedPairs[chainId];if(!forChain)return[];return Object.keys(forChain).map(function(pairId){return[deserializeToken(forChain[pairId].token0),deserializeToken(forChain[pairId].token1)];});},[savedSerializedPairs,chainId]);var combinedList=useMemo(function(){return userPairs.concat(generatedPairs).concat(pinnedPairs);},[generatedPairs,pinnedPairs,userPairs]);return useMemo(function(){// dedupes pairs of tokens in the combined list\nvar keyed=combinedList.reduce(function(memo,_ref6){var _ref7=_slicedToArray(_ref6,2),tokenA=_ref7[0],tokenB=_ref7[1];var sorted=tokenA.sortsBefore(tokenB);var key=sorted?\"\".concat(tokenA.address,\":\").concat(tokenB.address):\"\".concat(tokenB.address,\":\").concat(tokenA.address);if(memo[key])return memo;memo[key]=sorted?[tokenA,tokenB]:[tokenB,tokenA];return memo;},{});return Object.keys(keyed).map(function(key){return keyed[key];});},[combinedList]);}","map":{"version":3,"sources":["/Users/safahi/Downloads/interface-4.30.1/src/state/user/hooks.tsx"],"names":["Percent","Token","computePairAddress","L2_CHAIN_IDS","L2_DEADLINE_FROM_NOW","JSBI","useCallback","useMemo","shallowEqual","useAppDispatch","useAppSelector","V2_FACTORY_ADDRESSES","BASES_TO_TRACK_LIQUIDITY_FOR","PINNED_PAIRS","useAllTokens","useActiveWeb3React","addSerializedPair","addSerializedToken","removeSerializedToken","updateHideClosedPositions","updateUserClientSideRouter","updateUserDarkMode","updateUserDeadline","updateUserExpertMode","updateUserLocale","updateUserSlippageTolerance","serializeToken","token","chainId","address","decimals","symbol","name","deserializeToken","serializedToken","useIsDarkMode","user","matchesDarkMode","userDarkMode","useDarkModeManager","dispatch","darkMode","toggleSetDarkMode","useUserLocale","state","userLocale","useUserLocaleManager","locale","setLocale","newLocale","useIsExpertMode","userExpertMode","useExpertModeManager","expertMode","toggleSetExpertMode","useClientSideRouter","clientSideRouter","Boolean","userClientSideRouter","setClientSideRouter","newClientSideRouter","useSetUserSlippageTolerance","userSlippageTolerance","value","toNumber","multiply","quotient","error","useUserSlippageTolerance","useUserHideClosedPositions","hideClosedPositions","userHideClosedPositions","setHideClosedPositions","newHideClosedPositions","useUserSlippageToleranceWithDefault","defaultSlippageTolerance","allowedSlippage","useUserTransactionTTL","userDeadline","onL2","includes","deadline","setUserDeadline","useAddUserToken","useRemoveUserAddedToken","useUserAddedTokens","serializedTokensMap","tokens","Object","values","map","serializePair","pair","token0","token1","usePairAdder","serializedPair","useURLWarningVisible","URLWarningVisible","toV2LiquidityToken","tokenA","tokenB","Error","equals","factoryAddress","useTrackedTokenPairs","pinnedPairs","generatedPairs","keys","flatMap","tokenAddress","base","filter","p","savedSerializedPairs","pairs","userPairs","forChain","pairId","combinedList","concat","keyed","reduce","memo","sorted","sortsBefore","key"],"mappings":"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","sourcesContent":["import { Percent, Token } from '@uniswap/sdk-core'\nimport { computePairAddress, Pair } from '@uniswap/v2-sdk'\nimport { L2_CHAIN_IDS } from 'constants/chains'\nimport { SupportedLocale } from 'constants/locales'\nimport { L2_DEADLINE_FROM_NOW } from 'constants/misc'\nimport JSBI from 'jsbi'\nimport { useCallback, useMemo } from 'react'\nimport { shallowEqual } from 'react-redux'\nimport { useAppDispatch, useAppSelector } from 'state/hooks'\n\nimport { V2_FACTORY_ADDRESSES } from '../../constants/addresses'\nimport { BASES_TO_TRACK_LIQUIDITY_FOR, PINNED_PAIRS } from '../../constants/routing'\nimport { useAllTokens } from '../../hooks/Tokens'\nimport { useActiveWeb3React } from '../../hooks/web3'\nimport { AppState } from '../index'\nimport {\n  addSerializedPair,\n  addSerializedToken,\n  removeSerializedToken,\n  SerializedPair,\n  SerializedToken,\n  updateHideClosedPositions,\n  updateUserClientSideRouter,\n  updateUserDarkMode,\n  updateUserDeadline,\n  updateUserExpertMode,\n  updateUserLocale,\n  updateUserSlippageTolerance,\n} from './actions'\n\nfunction serializeToken(token: Token): SerializedToken {\n  return {\n    chainId: token.chainId,\n    address: token.address,\n    decimals: token.decimals,\n    symbol: token.symbol,\n    name: token.name,\n  }\n}\n\nfunction deserializeToken(serializedToken: SerializedToken): Token {\n  return new Token(\n    serializedToken.chainId,\n    serializedToken.address,\n    serializedToken.decimals,\n    serializedToken.symbol,\n    serializedToken.name\n  )\n}\n\nexport function useIsDarkMode(): boolean {\n  const { userDarkMode, matchesDarkMode } = useAppSelector(\n    ({ user: { matchesDarkMode, userDarkMode } }) => ({\n      userDarkMode,\n      matchesDarkMode,\n    }),\n    shallowEqual\n  )\n\n  return userDarkMode === null ? matchesDarkMode : userDarkMode\n}\n\nexport function useDarkModeManager(): [boolean, () => void] {\n  const dispatch = useAppDispatch()\n  const darkMode = useIsDarkMode()\n\n  const toggleSetDarkMode = useCallback(() => {\n    dispatch(updateUserDarkMode({ userDarkMode: !darkMode }))\n  }, [darkMode, dispatch])\n\n  return [darkMode, toggleSetDarkMode]\n}\n\nexport function useUserLocale(): SupportedLocale | null {\n  return useAppSelector((state) => state.user.userLocale)\n}\n\nexport function useUserLocaleManager(): [SupportedLocale | null, (newLocale: SupportedLocale) => void] {\n  const dispatch = useAppDispatch()\n  const locale = useUserLocale()\n\n  const setLocale = useCallback(\n    (newLocale: SupportedLocale) => {\n      dispatch(updateUserLocale({ userLocale: newLocale }))\n    },\n    [dispatch]\n  )\n\n  return [locale, setLocale]\n}\n\nexport function useIsExpertMode(): boolean {\n  return useAppSelector((state) => state.user.userExpertMode)\n}\n\nexport function useExpertModeManager(): [boolean, () => void] {\n  const dispatch = useAppDispatch()\n  const expertMode = useIsExpertMode()\n\n  const toggleSetExpertMode = useCallback(() => {\n    dispatch(updateUserExpertMode({ userExpertMode: !expertMode }))\n  }, [expertMode, dispatch])\n\n  return [expertMode, toggleSetExpertMode]\n}\n\nexport function useClientSideRouter(): [boolean, (userClientSideRouter: boolean) => void] {\n  const dispatch = useAppDispatch()\n\n  const clientSideRouter = useAppSelector((state) => Boolean(state.user.userClientSideRouter))\n\n  const setClientSideRouter = useCallback(\n    (newClientSideRouter: boolean) => {\n      dispatch(updateUserClientSideRouter({ userClientSideRouter: newClientSideRouter }))\n    },\n    [dispatch]\n  )\n\n  return [clientSideRouter, setClientSideRouter]\n}\n\nexport function useSetUserSlippageTolerance(): (slippageTolerance: Percent | 'auto') => void {\n  const dispatch = useAppDispatch()\n\n  return useCallback(\n    (userSlippageTolerance: Percent | 'auto') => {\n      let value: 'auto' | number\n      try {\n        value =\n          userSlippageTolerance === 'auto' ? 'auto' : JSBI.toNumber(userSlippageTolerance.multiply(10_000).quotient)\n      } catch (error) {\n        value = 'auto'\n      }\n      dispatch(\n        updateUserSlippageTolerance({\n          userSlippageTolerance: value,\n        })\n      )\n    },\n    [dispatch]\n  )\n}\n\n/**\n * Return the user's slippage tolerance, from the redux store, and a function to update the slippage tolerance\n */\nexport function useUserSlippageTolerance(): Percent | 'auto' {\n  const userSlippageTolerance = useAppSelector((state) => {\n    return state.user.userSlippageTolerance\n  })\n\n  return useMemo(\n    () => (userSlippageTolerance === 'auto' ? 'auto' : new Percent(userSlippageTolerance, 10_000)),\n    [userSlippageTolerance]\n  )\n}\n\nexport function useUserHideClosedPositions(): [boolean, (newHideClosedPositions: boolean) => void] {\n  const dispatch = useAppDispatch()\n\n  const hideClosedPositions = useAppSelector((state) => state.user.userHideClosedPositions)\n\n  const setHideClosedPositions = useCallback(\n    (newHideClosedPositions: boolean) => {\n      dispatch(updateHideClosedPositions({ userHideClosedPositions: newHideClosedPositions }))\n    },\n    [dispatch]\n  )\n\n  return [hideClosedPositions, setHideClosedPositions]\n}\n\n/**\n * Same as above but replaces the auto with a default value\n * @param defaultSlippageTolerance the default value to replace auto with\n */\nexport function useUserSlippageToleranceWithDefault(defaultSlippageTolerance: Percent): Percent {\n  const allowedSlippage = useUserSlippageTolerance()\n  return useMemo(\n    () => (allowedSlippage === 'auto' ? defaultSlippageTolerance : allowedSlippage),\n    [allowedSlippage, defaultSlippageTolerance]\n  )\n}\n\nexport function useUserTransactionTTL(): [number, (slippage: number) => void] {\n  const { chainId } = useActiveWeb3React()\n  const dispatch = useAppDispatch()\n  const userDeadline = useAppSelector((state) => state.user.userDeadline)\n  const onL2 = Boolean(chainId && L2_CHAIN_IDS.includes(chainId))\n  const deadline = onL2 ? L2_DEADLINE_FROM_NOW : userDeadline\n\n  const setUserDeadline = useCallback(\n    (userDeadline: number) => {\n      dispatch(updateUserDeadline({ userDeadline }))\n    },\n    [dispatch]\n  )\n\n  return [deadline, setUserDeadline]\n}\n\nexport function useAddUserToken(): (token: Token) => void {\n  const dispatch = useAppDispatch()\n  return useCallback(\n    (token: Token) => {\n      dispatch(addSerializedToken({ serializedToken: serializeToken(token) }))\n    },\n    [dispatch]\n  )\n}\n\nexport function useRemoveUserAddedToken(): (chainId: number, address: string) => void {\n  const dispatch = useAppDispatch()\n  return useCallback(\n    (chainId: number, address: string) => {\n      dispatch(removeSerializedToken({ chainId, address }))\n    },\n    [dispatch]\n  )\n}\n\nexport function useUserAddedTokens(): Token[] {\n  const { chainId } = useActiveWeb3React()\n  const serializedTokensMap = useAppSelector(({ user: { tokens } }) => tokens)\n\n  return useMemo(() => {\n    if (!chainId) return []\n    return Object.values(serializedTokensMap?.[chainId] ?? {}).map(deserializeToken)\n  }, [serializedTokensMap, chainId])\n}\n\nfunction serializePair(pair: Pair): SerializedPair {\n  return {\n    token0: serializeToken(pair.token0),\n    token1: serializeToken(pair.token1),\n  }\n}\n\nexport function usePairAdder(): (pair: Pair) => void {\n  const dispatch = useAppDispatch()\n\n  return useCallback(\n    (pair: Pair) => {\n      dispatch(addSerializedPair({ serializedPair: serializePair(pair) }))\n    },\n    [dispatch]\n  )\n}\n\nexport function useURLWarningVisible(): boolean {\n  return useAppSelector((state: AppState) => state.user.URLWarningVisible)\n}\n\n/**\n * Given two tokens return the liquidity token that represents its liquidity shares\n * @param tokenA one of the two tokens\n * @param tokenB the other token\n */\nexport function toV2LiquidityToken([tokenA, tokenB]: [Token, Token]): Token {\n  if (tokenA.chainId !== tokenB.chainId) throw new Error('Not matching chain IDs')\n  if (tokenA.equals(tokenB)) throw new Error('Tokens cannot be equal')\n  if (!V2_FACTORY_ADDRESSES[tokenA.chainId]) throw new Error('No V2 factory address on this chain')\n\n  return new Token(\n    tokenA.chainId,\n    computePairAddress({ factoryAddress: V2_FACTORY_ADDRESSES[tokenA.chainId], tokenA, tokenB }),\n    18,\n    'UNI-V2',\n    'Uniswap V2'\n  )\n}\n\n/**\n * Returns all the pairs of tokens that are tracked by the user for the current chain ID.\n */\nexport function useTrackedTokenPairs(): [Token, Token][] {\n  const { chainId } = useActiveWeb3React()\n  const tokens = useAllTokens()\n\n  // pinned pairs\n  const pinnedPairs = useMemo(() => (chainId ? PINNED_PAIRS[chainId] ?? [] : []), [chainId])\n\n  // pairs for every token against every base\n  const generatedPairs: [Token, Token][] = useMemo(\n    () =>\n      chainId\n        ? Object.keys(tokens).flatMap((tokenAddress) => {\n            const token = tokens[tokenAddress]\n            // for each token on the current chain,\n            return (\n              // loop though all bases on the current chain\n              (BASES_TO_TRACK_LIQUIDITY_FOR[chainId] ?? [])\n                // to construct pairs of the given token with each base\n                .map((base) => {\n                  if (base.address === token.address) {\n                    return null\n                  } else {\n                    return [base, token]\n                  }\n                })\n                .filter((p): p is [Token, Token] => p !== null)\n            )\n          })\n        : [],\n    [tokens, chainId]\n  )\n\n  // pairs saved by users\n  const savedSerializedPairs = useAppSelector(({ user: { pairs } }) => pairs)\n\n  const userPairs: [Token, Token][] = useMemo(() => {\n    if (!chainId || !savedSerializedPairs) return []\n    const forChain = savedSerializedPairs[chainId]\n    if (!forChain) return []\n\n    return Object.keys(forChain).map((pairId) => {\n      return [deserializeToken(forChain[pairId].token0), deserializeToken(forChain[pairId].token1)]\n    })\n  }, [savedSerializedPairs, chainId])\n\n  const combinedList = useMemo(\n    () => userPairs.concat(generatedPairs).concat(pinnedPairs),\n    [generatedPairs, pinnedPairs, userPairs]\n  )\n\n  return useMemo(() => {\n    // dedupes pairs of tokens in the combined list\n    const keyed = combinedList.reduce<{ [key: string]: [Token, Token] }>((memo, [tokenA, tokenB]) => {\n      const sorted = tokenA.sortsBefore(tokenB)\n      const key = sorted ? `${tokenA.address}:${tokenB.address}` : `${tokenB.address}:${tokenA.address}`\n      if (memo[key]) return memo\n      memo[key] = sorted ? [tokenA, tokenB] : [tokenB, tokenA]\n      return memo\n    }, {})\n\n    return Object.keys(keyed).map((key) => keyed[key])\n  }, [combinedList])\n}\n"]},"metadata":{},"sourceType":"module"}