{"ast":null,"code":"import _regeneratorRuntime from \"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _BASES_TO_CHECK_TRADE;\n\nimport { FeeAmount, Pool } from '@uniswap/v3-sdk';\nimport JSBI from 'jsbi';\nimport _ from 'lodash';\nimport { unparseFeeAmount } from '../../util/amounts';\nimport { ChainId, WRAPPED_NATIVE_CURRENCY } from '../../util/chains';\nimport { log } from '../../util/log';\nimport { DAI_ARBITRUM, DAI_ARBITRUM_RINKEBY, DAI_GÖRLI, DAI_KOVAN, DAI_MAINNET, DAI_OPTIMISM, DAI_OPTIMISTIC_KOVAN, DAI_POLYGON_MUMBAI, DAI_RINKEBY_1, DAI_RINKEBY_2, DAI_ROPSTEN, UNI_ARBITRUM_RINKEBY, USDC_ARBITRUM, USDC_GÖRLI, USDC_KOVAN, USDC_MAINNET, USDC_OPTIMISM, USDC_OPTIMISTIC_KOVAN, USDC_POLYGON, USDC_RINKEBY, USDC_ROPSTEN, USDT_ARBITRUM, USDT_ARBITRUM_RINKEBY, USDT_GÖRLI, USDT_KOVAN, USDT_MAINNET, USDT_OPTIMISM, USDT_OPTIMISTIC_KOVAN, USDT_RINKEBY, USDT_ROPSTEN, WBTC_ARBITRUM, WBTC_GÖRLI, WBTC_KOVAN, WBTC_MAINNET, WBTC_OPTIMISM, WBTC_OPTIMISTIC_KOVAN, WETH_POLYGON, WMATIC_POLYGON, WMATIC_POLYGON_MUMBAI } from '../token-provider';\nvar BASES_TO_CHECK_TRADES_AGAINST = (_BASES_TO_CHECK_TRADE = {}, _defineProperty(_BASES_TO_CHECK_TRADE, ChainId.MAINNET, [WRAPPED_NATIVE_CURRENCY[ChainId.MAINNET], DAI_MAINNET, USDC_MAINNET, USDT_MAINNET, WBTC_MAINNET]), _defineProperty(_BASES_TO_CHECK_TRADE, ChainId.ROPSTEN, [WRAPPED_NATIVE_CURRENCY[ChainId.ROPSTEN], DAI_ROPSTEN, USDT_ROPSTEN, USDC_ROPSTEN]), _defineProperty(_BASES_TO_CHECK_TRADE, ChainId.RINKEBY, [WRAPPED_NATIVE_CURRENCY[ChainId.RINKEBY], DAI_RINKEBY_1, DAI_RINKEBY_2, USDC_RINKEBY, USDT_RINKEBY]), _defineProperty(_BASES_TO_CHECK_TRADE, ChainId.GÖRLI, [WRAPPED_NATIVE_CURRENCY[ChainId.GÖRLI], USDT_GÖRLI, USDC_GÖRLI, WBTC_GÖRLI, DAI_GÖRLI]), _defineProperty(_BASES_TO_CHECK_TRADE, ChainId.KOVAN, [WRAPPED_NATIVE_CURRENCY[ChainId.KOVAN], USDC_KOVAN, USDT_KOVAN, WBTC_KOVAN, DAI_KOVAN]), _defineProperty(_BASES_TO_CHECK_TRADE, ChainId.OPTIMISM, [WRAPPED_NATIVE_CURRENCY[ChainId.OPTIMISM], USDC_OPTIMISM, DAI_OPTIMISM, USDT_OPTIMISM, WBTC_OPTIMISM]), _defineProperty(_BASES_TO_CHECK_TRADE, ChainId.ARBITRUM_ONE, [WRAPPED_NATIVE_CURRENCY[ChainId.ARBITRUM_ONE], WBTC_ARBITRUM, DAI_ARBITRUM, USDC_ARBITRUM, USDT_ARBITRUM]), _defineProperty(_BASES_TO_CHECK_TRADE, ChainId.ARBITRUM_RINKEBY, [WRAPPED_NATIVE_CURRENCY[ChainId.ARBITRUM_RINKEBY], DAI_ARBITRUM_RINKEBY, UNI_ARBITRUM_RINKEBY, USDT_ARBITRUM_RINKEBY]), _defineProperty(_BASES_TO_CHECK_TRADE, ChainId.OPTIMISTIC_KOVAN, [WRAPPED_NATIVE_CURRENCY[ChainId.OPTIMISTIC_KOVAN], DAI_OPTIMISTIC_KOVAN, WBTC_OPTIMISTIC_KOVAN, USDT_OPTIMISTIC_KOVAN, USDC_OPTIMISTIC_KOVAN]), _defineProperty(_BASES_TO_CHECK_TRADE, ChainId.POLYGON, [USDC_POLYGON, WETH_POLYGON, WMATIC_POLYGON]), _defineProperty(_BASES_TO_CHECK_TRADE, ChainId.POLYGON_MUMBAI, [DAI_POLYGON_MUMBAI, WRAPPED_NATIVE_CURRENCY[ChainId.POLYGON_MUMBAI], WMATIC_POLYGON_MUMBAI]), _BASES_TO_CHECK_TRADE);\n/**\n * Provider that uses a hardcoded list of V3 pools to generate a list of subgraph pools.\n *\n * Since the pools are hardcoded and the data does not come from the Subgraph, the TVL values\n * are dummys and should not be depended on.\n *\n * Useful for instances where other data sources are unavailable. E.g. Subgraph not available.\n *\n * @export\n * @class StaticV3SubgraphProvider\n */\n\nexport var StaticV3SubgraphProvider = /*#__PURE__*/function () {\n  function StaticV3SubgraphProvider(chainId, poolProvider) {\n    _classCallCheck(this, StaticV3SubgraphProvider);\n\n    this.chainId = chainId;\n    this.poolProvider = poolProvider;\n  }\n\n  _createClass(StaticV3SubgraphProvider, [{\n    key: \"getPools\",\n    value: function () {\n      var _getPools = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(tokenIn, tokenOut) {\n        var bases, basePairs, pairs, poolAccessor, pools, poolAddressSet, subgraphPools;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                log.info('In static subgraph provider for V3');\n                bases = BASES_TO_CHECK_TRADES_AGAINST[this.chainId];\n                basePairs = _.flatMap(bases, function (base) {\n                  return bases.map(function (otherBase) {\n                    return [base, otherBase];\n                  });\n                });\n\n                if (tokenIn && tokenOut) {\n                  basePairs.push.apply(basePairs, [[tokenIn, tokenOut]].concat(_toConsumableArray(bases.map(function (base) {\n                    return [tokenIn, base];\n                  })), _toConsumableArray(bases.map(function (base) {\n                    return [tokenOut, base];\n                  }))));\n                }\n\n                pairs = _(basePairs).filter(function (tokens) {\n                  return Boolean(tokens[0] && tokens[1]);\n                }).filter(function (_ref) {\n                  var _ref2 = _slicedToArray(_ref, 2),\n                      tokenA = _ref2[0],\n                      tokenB = _ref2[1];\n\n                  return tokenA.address !== tokenB.address && !tokenA.equals(tokenB);\n                }).flatMap(function (_ref3) {\n                  var _ref4 = _slicedToArray(_ref3, 2),\n                      tokenA = _ref4[0],\n                      tokenB = _ref4[1];\n\n                  return [[tokenA, tokenB, FeeAmount.LOWEST], [tokenA, tokenB, FeeAmount.LOW], [tokenA, tokenB, FeeAmount.MEDIUM], [tokenA, tokenB, FeeAmount.HIGH]];\n                }).value();\n                log.info(\"V3 Static subgraph provider about to get \".concat(pairs.length, \" pools on-chain\"));\n                _context.next = 8;\n                return this.poolProvider.getPools(pairs);\n\n              case 8:\n                poolAccessor = _context.sent;\n                pools = poolAccessor.getAllPools();\n                poolAddressSet = new Set();\n                subgraphPools = _(pools).map(function (pool) {\n                  var token0 = pool.token0,\n                      token1 = pool.token1,\n                      fee = pool.fee,\n                      liquidity = pool.liquidity;\n                  var poolAddress = Pool.getAddress(pool.token0, pool.token1, pool.fee);\n\n                  if (poolAddressSet.has(poolAddress)) {\n                    return undefined;\n                  }\n\n                  poolAddressSet.add(poolAddress);\n                  var liquidityNumber = JSBI.toNumber(liquidity);\n                  return {\n                    id: poolAddress,\n                    feeTier: unparseFeeAmount(fee),\n                    liquidity: liquidity.toString(),\n                    token0: {\n                      id: token0.address\n                    },\n                    token1: {\n                      id: token1.address\n                    },\n                    // As a very rough proxy we just use liquidity for TVL.\n                    tvlETH: liquidityNumber,\n                    tvlUSD: liquidityNumber\n                  };\n                }).compact().value();\n                return _context.abrupt(\"return\", subgraphPools);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getPools(_x, _x2) {\n        return _getPools.apply(this, arguments);\n      }\n\n      return getPools;\n    }()\n  }]);\n\n  return StaticV3SubgraphProvider;\n}();","map":{"version":3,"sources":["../../../../../src/providers/v3/static-subgraph-provider.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { FeeAmount, Pool } from '@uniswap/v3-sdk';\nimport JSBI from 'jsbi';\nimport _ from 'lodash';\nimport { unparseFeeAmount } from '../../util/amounts';\nimport { ChainId, WRAPPED_NATIVE_CURRENCY } from '../../util/chains';\nimport { log } from '../../util/log';\nimport { DAI_ARBITRUM, DAI_ARBITRUM_RINKEBY, DAI_GÖRLI, DAI_KOVAN, DAI_MAINNET, DAI_OPTIMISM, DAI_OPTIMISTIC_KOVAN, DAI_POLYGON_MUMBAI, DAI_RINKEBY_1, DAI_RINKEBY_2, DAI_ROPSTEN, UNI_ARBITRUM_RINKEBY, USDC_ARBITRUM, USDC_GÖRLI, USDC_KOVAN, USDC_MAINNET, USDC_OPTIMISM, USDC_OPTIMISTIC_KOVAN, USDC_POLYGON, USDC_RINKEBY, USDC_ROPSTEN, USDT_ARBITRUM, USDT_ARBITRUM_RINKEBY, USDT_GÖRLI, USDT_KOVAN, USDT_MAINNET, USDT_OPTIMISM, USDT_OPTIMISTIC_KOVAN, USDT_RINKEBY, USDT_ROPSTEN, WBTC_ARBITRUM, WBTC_GÖRLI, WBTC_KOVAN, WBTC_MAINNET, WBTC_OPTIMISM, WBTC_OPTIMISTIC_KOVAN, WETH_POLYGON, WMATIC_POLYGON, WMATIC_POLYGON_MUMBAI, } from '../token-provider';\nconst BASES_TO_CHECK_TRADES_AGAINST = {\n    [ChainId.MAINNET]: [\n        WRAPPED_NATIVE_CURRENCY[ChainId.MAINNET],\n        DAI_MAINNET,\n        USDC_MAINNET,\n        USDT_MAINNET,\n        WBTC_MAINNET,\n    ],\n    [ChainId.ROPSTEN]: [\n        WRAPPED_NATIVE_CURRENCY[ChainId.ROPSTEN],\n        DAI_ROPSTEN,\n        USDT_ROPSTEN,\n        USDC_ROPSTEN,\n    ],\n    [ChainId.RINKEBY]: [\n        WRAPPED_NATIVE_CURRENCY[ChainId.RINKEBY],\n        DAI_RINKEBY_1,\n        DAI_RINKEBY_2,\n        USDC_RINKEBY,\n        USDT_RINKEBY,\n    ],\n    [ChainId.GÖRLI]: [\n        WRAPPED_NATIVE_CURRENCY[ChainId.GÖRLI],\n        USDT_GÖRLI,\n        USDC_GÖRLI,\n        WBTC_GÖRLI,\n        DAI_GÖRLI,\n    ],\n    [ChainId.KOVAN]: [\n        WRAPPED_NATIVE_CURRENCY[ChainId.KOVAN],\n        USDC_KOVAN,\n        USDT_KOVAN,\n        WBTC_KOVAN,\n        DAI_KOVAN,\n    ],\n    [ChainId.OPTIMISM]: [\n        WRAPPED_NATIVE_CURRENCY[ChainId.OPTIMISM],\n        USDC_OPTIMISM,\n        DAI_OPTIMISM,\n        USDT_OPTIMISM,\n        WBTC_OPTIMISM,\n    ],\n    [ChainId.ARBITRUM_ONE]: [\n        WRAPPED_NATIVE_CURRENCY[ChainId.ARBITRUM_ONE],\n        WBTC_ARBITRUM,\n        DAI_ARBITRUM,\n        USDC_ARBITRUM,\n        USDT_ARBITRUM,\n    ],\n    [ChainId.ARBITRUM_RINKEBY]: [\n        WRAPPED_NATIVE_CURRENCY[ChainId.ARBITRUM_RINKEBY],\n        DAI_ARBITRUM_RINKEBY,\n        UNI_ARBITRUM_RINKEBY,\n        USDT_ARBITRUM_RINKEBY,\n    ],\n    [ChainId.OPTIMISTIC_KOVAN]: [\n        WRAPPED_NATIVE_CURRENCY[ChainId.OPTIMISTIC_KOVAN],\n        DAI_OPTIMISTIC_KOVAN,\n        WBTC_OPTIMISTIC_KOVAN,\n        USDT_OPTIMISTIC_KOVAN,\n        USDC_OPTIMISTIC_KOVAN,\n    ],\n    [ChainId.POLYGON]: [USDC_POLYGON, WETH_POLYGON, WMATIC_POLYGON],\n    [ChainId.POLYGON_MUMBAI]: [\n        DAI_POLYGON_MUMBAI,\n        WRAPPED_NATIVE_CURRENCY[ChainId.POLYGON_MUMBAI],\n        WMATIC_POLYGON_MUMBAI,\n    ],\n};\n/**\n * Provider that uses a hardcoded list of V3 pools to generate a list of subgraph pools.\n *\n * Since the pools are hardcoded and the data does not come from the Subgraph, the TVL values\n * are dummys and should not be depended on.\n *\n * Useful for instances where other data sources are unavailable. E.g. Subgraph not available.\n *\n * @export\n * @class StaticV3SubgraphProvider\n */\nexport class StaticV3SubgraphProvider {\n    constructor(chainId, poolProvider) {\n        this.chainId = chainId;\n        this.poolProvider = poolProvider;\n    }\n    async getPools(tokenIn, tokenOut) {\n        log.info('In static subgraph provider for V3');\n        const bases = BASES_TO_CHECK_TRADES_AGAINST[this.chainId];\n        let basePairs = _.flatMap(bases, (base) => bases.map((otherBase) => [base, otherBase]));\n        if (tokenIn && tokenOut) {\n            basePairs.push([tokenIn, tokenOut], ...bases.map((base) => [tokenIn, base]), ...bases.map((base) => [tokenOut, base]));\n        }\n        const pairs = _(basePairs)\n            .filter((tokens) => Boolean(tokens[0] && tokens[1]))\n            .filter(([tokenA, tokenB]) => tokenA.address !== tokenB.address && !tokenA.equals(tokenB))\n            .flatMap(([tokenA, tokenB]) => {\n            return [\n                [tokenA, tokenB, FeeAmount.LOWEST],\n                [tokenA, tokenB, FeeAmount.LOW],\n                [tokenA, tokenB, FeeAmount.MEDIUM],\n                [tokenA, tokenB, FeeAmount.HIGH],\n            ];\n        })\n            .value();\n        log.info(`V3 Static subgraph provider about to get ${pairs.length} pools on-chain`);\n        const poolAccessor = await this.poolProvider.getPools(pairs);\n        const pools = poolAccessor.getAllPools();\n        const poolAddressSet = new Set();\n        const subgraphPools = _(pools)\n            .map((pool) => {\n            const { token0, token1, fee, liquidity } = pool;\n            const poolAddress = Pool.getAddress(pool.token0, pool.token1, pool.fee);\n            if (poolAddressSet.has(poolAddress)) {\n                return undefined;\n            }\n            poolAddressSet.add(poolAddress);\n            const liquidityNumber = JSBI.toNumber(liquidity);\n            return {\n                id: poolAddress,\n                feeTier: unparseFeeAmount(fee),\n                liquidity: liquidity.toString(),\n                token0: {\n                    id: token0.address,\n                },\n                token1: {\n                    id: token1.address,\n                },\n                // As a very rough proxy we just use liquidity for TVL.\n                tvlETH: liquidityNumber,\n                tvlUSD: liquidityNumber,\n            };\n        })\n            .compact()\n            .value();\n        return subgraphPools;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhdGljLXN1YmdyYXBoLXByb3ZpZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL3Byb3ZpZGVycy92My9zdGF0aWMtc3ViZ3JhcGgtcHJvdmlkZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNsRCxPQUFPLElBQUksTUFBTSxNQUFNLENBQUM7QUFDeEIsT0FBTyxDQUFDLE1BQU0sUUFBUSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3RELE9BQU8sRUFBRSxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNyRSxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDckMsT0FBTyxFQUNMLFlBQVksRUFDWixvQkFBb0IsRUFDcEIsU0FBUyxFQUNULFNBQVMsRUFDVCxXQUFXLEVBQ1gsWUFBWSxFQUNaLG9CQUFvQixFQUNwQixrQkFBa0IsRUFDbEIsYUFBYSxFQUNiLGFBQWEsRUFDYixXQUFXLEVBQ1gsb0JBQW9CLEVBQ3BCLGFBQWEsRUFDYixVQUFVLEVBQ1YsVUFBVSxFQUNWLFlBQVksRUFDWixhQUFhLEVBQ2IscUJBQXFCLEVBQ3JCLFlBQVksRUFDWixZQUFZLEVBQ1osWUFBWSxFQUNaLGFBQWEsRUFDYixxQkFBcUIsRUFDckIsVUFBVSxFQUNWLFVBQVUsRUFDVixZQUFZLEVBQ1osYUFBYSxFQUNiLHFCQUFxQixFQUNyQixZQUFZLEVBQ1osWUFBWSxFQUNaLGFBQWEsRUFDYixVQUFVLEVBQ1YsVUFBVSxFQUNWLFlBQVksRUFDWixhQUFhLEVBQ2IscUJBQXFCLEVBQ3JCLFlBQVksRUFDWixjQUFjLEVBQ2QscUJBQXFCLEdBQ3RCLE1BQU0sbUJBQW1CLENBQUM7QUFRM0IsTUFBTSw2QkFBNkIsR0FBbUI7SUFDcEQs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"]},"metadata":{},"sourceType":"module"}