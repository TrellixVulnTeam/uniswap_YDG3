{"ast":null,"code":"import { Percent } from '@uniswap/sdk-core';\nimport { Pool } from '@uniswap/v3-sdk';\nimport _ from 'lodash';\nimport { CurrencyAmount } from '.';\nexport const routeToString = route => {\n  const isV3Route = route => route.pools != undefined;\n\n  const routeStr = [];\n  const tokens = isV3Route(route) ? route.tokenPath : route.path;\n\n  const tokenPath = _.map(tokens, token => `${token.symbol}`);\n\n  const pools = isV3Route(route) ? route.pools : route.pairs;\n\n  const poolFeePath = _.map(pools, pool => `${pool instanceof Pool ? ` -- ${pool.fee / 10000}%` : ''} --> `);\n\n  for (let i = 0; i < tokenPath.length; i++) {\n    routeStr.push(tokenPath[i]);\n\n    if (i < poolFeePath.length) {\n      routeStr.push(poolFeePath[i]);\n    }\n  }\n\n  return routeStr.join('');\n};\nexport const routeAmountsToString = routeAmounts => {\n  const total = _.reduce(routeAmounts, (total, cur) => {\n    return total.add(cur.amount);\n  }, CurrencyAmount.fromRawAmount(routeAmounts[0].amount.currency, 0));\n\n  const routeStrings = _.map(routeAmounts, ({\n    protocol,\n    route,\n    amount\n  }) => {\n    const portion = amount.divide(total);\n    const percent = new Percent(portion.numerator, portion.denominator);\n    return `[${protocol}] ${percent.toFixed(2)}% = ${routeToString(route)}`;\n  });\n\n  return _.join(routeStrings, ', ');\n};\nexport const routeAmountToString = routeAmount => {\n  const {\n    route,\n    amount\n  } = routeAmount;\n  return `${amount.toExact()} = ${routeToString(route)}`;\n};\nexport const poolToString = p => {\n  return `${p.token0.symbol}/${p.token1.symbol}/${p.fee / 10000}%`;\n};","map":{"version":3,"sources":["../../../../src/util/routes.ts"],"names":[],"mappings":"AAAA,SAAS,OAAT,QAAwB,mBAAxB;AACA,SAAS,IAAT,QAAqB,iBAArB;AACA,OAAO,CAAP,MAAc,QAAd;AACA,SAAS,cAAT,QAA+B,GAA/B;AAIA,OAAO,MAAM,aAAa,GAAI,KAAD,IAAqC;AAChE,QAAM,SAAS,GAAI,KAAD,IACf,KAAiB,CAAC,KAAlB,IAA2B,SAD9B;;AAEA,QAAM,QAAQ,GAAG,EAAjB;AACA,QAAM,MAAM,GAAG,SAAS,CAAC,KAAD,CAAT,GAAmB,KAAK,CAAC,SAAzB,GAAqC,KAAK,CAAC,IAA1D;;AACA,QAAM,SAAS,GAAG,CAAC,CAAC,GAAF,CAAM,MAAN,EAAe,KAAD,IAAW,GAAG,KAAK,CAAC,MAAM,EAAxC,CAAlB;;AACA,QAAM,KAAK,GAAG,SAAS,CAAC,KAAD,CAAT,GAAmB,KAAK,CAAC,KAAzB,GAAiC,KAAK,CAAC,KAArD;;AACA,QAAM,WAAW,GAAG,CAAC,CAAC,GAAF,CAClB,KADkB,EAEjB,IAAD,IAAU,GAAG,IAAI,YAAY,IAAhB,GAAuB,OAAO,IAAI,CAAC,GAAL,GAAW,KAAK,GAA9C,GAAoD,EAAE,OAFjD,CAApB;;AAKA,OAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,SAAS,CAAC,MAA9B,EAAsC,CAAC,EAAvC,EAA2C;AACzC,IAAA,QAAQ,CAAC,IAAT,CAAc,SAAS,CAAC,CAAD,CAAvB;;AACA,QAAI,CAAC,GAAG,WAAW,CAAC,MAApB,EAA4B;AAC1B,MAAA,QAAQ,CAAC,IAAT,CAAc,WAAW,CAAC,CAAD,CAAzB;AACD;AACF;;AAED,SAAO,QAAQ,CAAC,IAAT,CAAc,EAAd,CAAP;AACD,CApBM;AAsBP,OAAO,MAAM,oBAAoB,GAC/B,YADkC,IAExB;AACV,QAAM,KAAK,GAAG,CAAC,CAAC,MAAF,CACZ,YADY,EAEZ,CAAC,KAAD,EAAwB,GAAxB,KAAoD;AAClD,WAAO,KAAK,CAAC,GAAN,CAAU,GAAG,CAAC,MAAd,CAAP;AACD,GAJW,EAKZ,cAAc,CAAC,aAAf,CAA6B,YAAY,CAAC,CAAD,CAAZ,CAAiB,MAAjB,CAAwB,QAArD,EAA+D,CAA/D,CALY,CAAd;;AAQA,QAAM,YAAY,GAAG,CAAC,CAAC,GAAF,CAAM,YAAN,EAAoB,CAAC;AAAE,IAAA,QAAF;AAAY,IAAA,KAAZ;AAAmB,IAAA;AAAnB,GAAD,KAAgC;AACvE,UAAM,OAAO,GAAG,MAAM,CAAC,MAAP,CAAc,KAAd,CAAhB;AACA,UAAM,OAAO,GAAG,IAAI,OAAJ,CAAY,OAAO,CAAC,SAApB,EAA+B,OAAO,CAAC,WAAvC,CAAhB;AACA,WAAO,IAAI,QAAQ,KAAK,OAAO,CAAC,OAAR,CAAgB,CAAhB,CAAkB,OAAO,aAAa,CAAC,KAAD,CAAO,EAArE;AACD,GAJoB,CAArB;;AAMA,SAAO,CAAC,CAAC,IAAF,CAAO,YAAP,EAAqB,IAArB,CAAP;AACD,CAlBM;AAoBP,OAAO,MAAM,mBAAmB,GAC9B,WADiC,IAEvB;AACV,QAAM;AAAE,IAAA,KAAF;AAAS,IAAA;AAAT,MAAoB,WAA1B;AACA,SAAO,GAAG,MAAM,CAAC,OAAP,EAAgB,MAAM,aAAa,CAAC,KAAD,CAAO,EAApD;AACD,CALM;AAOP,OAAO,MAAM,YAAY,GAAI,CAAD,IAAoB;AAC9C,SAAO,GAAG,CAAC,CAAC,MAAF,CAAS,MAAM,IAAI,CAAC,CAAC,MAAF,CAAS,MAAM,IAAI,CAAC,CAAC,GAAF,GAAQ,KAAK,GAA7D;AACD,CAFM","sourceRoot":"","sourcesContent":["import { Percent } from '@uniswap/sdk-core';\nimport { Pool } from '@uniswap/v3-sdk';\nimport _ from 'lodash';\nimport { CurrencyAmount } from '.';\nexport const routeToString = (route) => {\n    const isV3Route = (route) => route.pools != undefined;\n    const routeStr = [];\n    const tokens = isV3Route(route) ? route.tokenPath : route.path;\n    const tokenPath = _.map(tokens, (token) => `${token.symbol}`);\n    const pools = isV3Route(route) ? route.pools : route.pairs;\n    const poolFeePath = _.map(pools, (pool) => `${pool instanceof Pool ? ` -- ${pool.fee / 10000}%` : ''} --> `);\n    for (let i = 0; i < tokenPath.length; i++) {\n        routeStr.push(tokenPath[i]);\n        if (i < poolFeePath.length) {\n            routeStr.push(poolFeePath[i]);\n        }\n    }\n    return routeStr.join('');\n};\nexport const routeAmountsToString = (routeAmounts) => {\n    const total = _.reduce(routeAmounts, (total, cur) => {\n        return total.add(cur.amount);\n    }, CurrencyAmount.fromRawAmount(routeAmounts[0].amount.currency, 0));\n    const routeStrings = _.map(routeAmounts, ({ protocol, route, amount }) => {\n        const portion = amount.divide(total);\n        const percent = new Percent(portion.numerator, portion.denominator);\n        return `[${protocol}] ${percent.toFixed(2)}% = ${routeToString(route)}`;\n    });\n    return _.join(routeStrings, ', ');\n};\nexport const routeAmountToString = (routeAmount) => {\n    const { route, amount } = routeAmount;\n    return `${amount.toExact()} = ${routeToString(route)}`;\n};\nexport const poolToString = (p) => {\n    return `${p.token0.symbol}/${p.token1.symbol}/${p.fee / 10000}%`;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL3V0aWwvcm91dGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUM1QyxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDdkMsT0FBTyxDQUFDLE1BQU0sUUFBUSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxHQUFHLENBQUM7QUFJbkMsTUFBTSxDQUFDLE1BQU0sYUFBYSxHQUFHLENBQUMsS0FBd0IsRUFBVSxFQUFFO0lBQ2hFLE1BQU0sU0FBUyxHQUFHLENBQUMsS0FBd0IsRUFBb0IsRUFBRSxDQUM5RCxLQUFpQixDQUFDLEtBQUssSUFBSSxTQUFTLENBQUM7SUFDeEMsTUFBTSxRQUFRLEdBQUcsRUFBRSxDQUFDO0lBQ3BCLE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQztJQUMvRCxNQUFNLFNBQVMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUM5RCxNQUFNLEtBQUssR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDM0QsTUFBTSxXQUFXLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FDdkIsS0FBSyxFQUNMLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxHQUFHLElBQUksWUFBWSxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLEdBQUcsR0FBRyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQzNFLENBQUM7SUFFRixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUN6QyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVCLElBQUksQ0FBQyxHQUFHLFdBQVcsQ0FBQyxNQUFNLEVBQUU7WUFDMUIsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUMvQjtLQUNGO0lBRUQsT0FBTyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzNCLENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLG9CQUFvQixHQUFHLENBQ2xDLFlBQW1DLEVBQzNCLEVBQUU7SUFDVixNQUFNLEtBQUssR0FBRyxDQUFDLENBQUMsTUFBTSxDQUNwQixZQUFZLEVBQ1osQ0FBQyxLQUFxQixFQUFFLEdBQXdCLEVBQUUsRUFBRTtRQUNsRCxPQUFPLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQy9CLENBQUMsRUFDRCxjQUFjLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUUsQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUNsRSxDQUFDO0lBRUYsTUFBTSxZQUFZLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRTtRQUN2RSxNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3JDLE1BQU0sT0FBTyxHQUFHLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3BFLE9BQU8sSUFBSSxRQUFRLEtBQUssT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTyxhQUFhLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztJQUMxRSxDQUFDLENBQUMsQ0FBQztJQUVILE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDcEMsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sbUJBQW1CLEdBQUcsQ0FDakMsV0FBZ0MsRUFDeEIsRUFBRTtJQUNWLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEdBQUcsV0FBVyxDQUFDO0lBQ3RDLE9BQU8sR0FBRyxNQUFNLENBQUMsT0FBTyxFQUFFLE1BQU0sYUFBYSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7QUFDekQsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUFHLENBQUMsQ0FBTyxFQUFVLEVBQUU7SUFDOUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsS0FBSyxHQUFHLENBQUM7QUFDbkUsQ0FBQyxDQUFDIn0="]},"metadata":{},"sourceType":"module"}