{"ast":null,"code":"import _defineProperty from\"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import{keyframes as _keyframes}from\"styled-components\";import _styled from\"styled-components\";var _templateObject;import{Trans}from\"@lingui/react\";import{FeeAmount}from'@uniswap/v3-sdk';import{ButtonGray}from'components/Button';import Card from'components/Card';import{AutoColumn}from'components/Column';import{RowBetween}from'components/Row';import{useFeeTierDistribution}from'hooks/useFeeTierDistribution';import{PoolState,usePools}from'hooks/usePools';import usePrevious from'hooks/usePrevious';import{useActiveWeb3React}from'hooks/web3';import{DynamicSection}from'pages/AddLiquidity/styled';import React,{useCallback,useEffect,useMemo,useRef,useState}from'react';import ReactGA from'react-ga';import{Box}from'rebass';import{ThemedText}from'theme';import{FeeOption}from'./FeeOption';import{FeeTierPercentageBadge}from'./FeeTierPercentageBadge';import{FEE_AMOUNT_DETAIL}from'./shared';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var pulse=function pulse(color){return _keyframes(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  0% {\\n    box-shadow: 0 0 0 0 \",\";\\n  }\\n\\n  70% {\\n    box-shadow: 0 0 0 2px \",\";\\n  }\\n\\n  100% {\\n    box-shadow: 0 0 0 0 \",\";\\n  }\\n\"])),color,color,color);};var FocusedOutlineCard=_styled(Card).withConfig({componentId:\"sc-1xk2z0e-0\"})([\"border:1px solid \",\";animation:\",\" 0.6s linear;align-self:center;\"],function(_ref){var theme=_ref.theme;return theme.bg2;},function(_ref2){var pulsing=_ref2.pulsing,theme=_ref2.theme;return pulsing&&pulse(theme.primary1);});var Select=_styled.div.withConfig({componentId:\"sc-1xk2z0e-1\"})([\"align-items:flex-start;display:grid;grid-auto-flow:column;grid-gap:8px;\"]);export default function FeeSelector(_ref3){var _ref3$disabled=_ref3.disabled,disabled=_ref3$disabled===void 0?false:_ref3$disabled,feeAmount=_ref3.feeAmount,handleFeePoolSelect=_ref3.handleFeePoolSelect,currencyA=_ref3.currencyA,currencyB=_ref3.currencyB;var _useActiveWeb3React=useActiveWeb3React(),chainId=_useActiveWeb3React.chainId;var _useFeeTierDistributi=useFeeTierDistribution(currencyA,currencyB),isLoading=_useFeeTierDistributi.isLoading,isError=_useFeeTierDistributi.isError,largestUsageFeeTier=_useFeeTierDistributi.largestUsageFeeTier,distributions=_useFeeTierDistributi.distributions;// get pool data on-chain for latest states\nvar pools=usePools([[currencyA,currencyB,FeeAmount.LOWEST],[currencyA,currencyB,FeeAmount.LOW],[currencyA,currencyB,FeeAmount.MEDIUM],[currencyA,currencyB,FeeAmount.HIGH]]);var poolsByFeeTier=useMemo(function(){var _pools$reduce;return pools.reduce(function(acc,_ref4){var _ref5=_slicedToArray(_ref4,2),curPoolState=_ref5[0],curPool=_ref5[1];acc=_objectSpread(_objectSpread({},acc),_defineProperty({},curPool===null||curPool===void 0?void 0:curPool.fee,curPoolState));return acc;},(_pools$reduce={},_defineProperty(_pools$reduce,FeeAmount.LOWEST,PoolState.NOT_EXISTS),_defineProperty(_pools$reduce,FeeAmount.LOW,PoolState.NOT_EXISTS),_defineProperty(_pools$reduce,FeeAmount.MEDIUM,PoolState.NOT_EXISTS),_defineProperty(_pools$reduce,FeeAmount.HIGH,PoolState.NOT_EXISTS),_pools$reduce));},[pools]);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showOptions=_useState2[0],setShowOptions=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),pulsing=_useState4[0],setPulsing=_useState4[1];var previousFeeAmount=usePrevious(feeAmount);var recommended=useRef(false);var handleFeePoolSelectWithEvent=useCallback(function(fee){ReactGA.event({category:'FeePoolSelect',action:'Manual'});handleFeePoolSelect(fee);},[handleFeePoolSelect]);useEffect(function(){if(feeAmount||isLoading||isError){return;}if(!largestUsageFeeTier){// cannot recommend, open options\nsetShowOptions(true);}else{setShowOptions(false);recommended.current=true;ReactGA.event({category:'FeePoolSelect',action:' Recommended'});handleFeePoolSelect(largestUsageFeeTier);}},[feeAmount,isLoading,isError,largestUsageFeeTier,handleFeePoolSelect]);useEffect(function(){setShowOptions(isError);},[isError]);useEffect(function(){if(feeAmount&&previousFeeAmount!==feeAmount){setPulsing(true);}},[previousFeeAmount,feeAmount]);return/*#__PURE__*/_jsx(AutoColumn,{gap:\"16px\",children:/*#__PURE__*/_jsxs(DynamicSection,{gap:\"md\",disabled:disabled,children:[/*#__PURE__*/_jsx(FocusedOutlineCard,{pulsing:pulsing,onAnimationEnd:function onAnimationEnd(){return setPulsing(false);},children:/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(AutoColumn,{id:\"add-liquidity-selected-fee\",children:!feeAmount?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ThemedText.Label,{children:/*#__PURE__*/_jsx(Trans,{id:\"Fee tier\"})}),/*#__PURE__*/_jsx(ThemedText.Main,{fontWeight:400,fontSize:\"12px\",textAlign:\"left\",children:/*#__PURE__*/_jsx(Trans,{id:\"The % you will earn in fees.\"})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ThemedText.Label,{className:\"selected-fee-label\",children:/*#__PURE__*/_jsx(Trans,{id:\"{0}% fee tier\",values:{0:FEE_AMOUNT_DETAIL[feeAmount].label}})}),/*#__PURE__*/_jsx(Box,{style:{width:'fit-content',marginTop:'8px'},className:\"selected-fee-percentage\",children:distributions&&/*#__PURE__*/_jsx(FeeTierPercentageBadge,{distributions:distributions,feeAmount:feeAmount,poolState:poolsByFeeTier[feeAmount]})})]})}),/*#__PURE__*/_jsx(ButtonGray,{onClick:function onClick(){return setShowOptions(!showOptions);},width:\"auto\",padding:\"4px\",$borderRadius:\"6px\",children:showOptions?/*#__PURE__*/_jsx(Trans,{id:\"Hide\"}):/*#__PURE__*/_jsx(Trans,{id:\"Edit\"})})]})}),chainId&&showOptions&&/*#__PURE__*/_jsx(Select,{children:[FeeAmount.LOWEST,FeeAmount.LOW,FeeAmount.MEDIUM,FeeAmount.HIGH].map(function(_feeAmount,i){var supportedChains=FEE_AMOUNT_DETAIL[_feeAmount].supportedChains;if(supportedChains.includes(chainId)){return/*#__PURE__*/_jsx(FeeOption,{feeAmount:_feeAmount,active:feeAmount===_feeAmount,onClick:function onClick(){return handleFeePoolSelectWithEvent(_feeAmount);},distributions:distributions,poolState:poolsByFeeTier[_feeAmount]},i);}return null;})})]})});}","map":{"version":3,"sources":["/Users/safahi/Downloads/interface-4.30.1/src/components/FeeSelector/index.tsx"],"names":["FeeAmount","ButtonGray","Card","AutoColumn","RowBetween","useFeeTierDistribution","PoolState","usePools","usePrevious","useActiveWeb3React","DynamicSection","React","useCallback","useEffect","useMemo","useRef","useState","ReactGA","Box","ThemedText","FeeOption","FeeTierPercentageBadge","FEE_AMOUNT_DETAIL","pulse","color","keyframes","FocusedOutlineCard","styled","theme","bg2","pulsing","primary1","Select","div","FeeSelector","disabled","feeAmount","handleFeePoolSelect","currencyA","currencyB","chainId","isLoading","isError","largestUsageFeeTier","distributions","pools","LOWEST","LOW","MEDIUM","HIGH","poolsByFeeTier","reduce","acc","curPoolState","curPool","fee","NOT_EXISTS","showOptions","setShowOptions","setPulsing","previousFeeAmount","recommended","handleFeePoolSelectWithEvent","event","category","action","current","label","width","marginTop","map","_feeAmount","i","supportedChains","includes"],"mappings":"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","sourcesContent":["import { Trans } from '@lingui/macro'\nimport { Currency } from '@uniswap/sdk-core'\nimport { FeeAmount } from '@uniswap/v3-sdk'\nimport { ButtonGray } from 'components/Button'\nimport Card from 'components/Card'\nimport { AutoColumn } from 'components/Column'\nimport { RowBetween } from 'components/Row'\nimport { useFeeTierDistribution } from 'hooks/useFeeTierDistribution'\nimport { PoolState, usePools } from 'hooks/usePools'\nimport usePrevious from 'hooks/usePrevious'\nimport { useActiveWeb3React } from 'hooks/web3'\nimport { DynamicSection } from 'pages/AddLiquidity/styled'\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport ReactGA from 'react-ga'\nimport { Box } from 'rebass'\nimport styled, { keyframes } from 'styled-components/macro'\nimport { ThemedText } from 'theme'\n\nimport { FeeOption } from './FeeOption'\nimport { FeeTierPercentageBadge } from './FeeTierPercentageBadge'\nimport { FEE_AMOUNT_DETAIL } from './shared'\n\nconst pulse = (color: string) => keyframes`\n  0% {\n    box-shadow: 0 0 0 0 ${color};\n  }\n\n  70% {\n    box-shadow: 0 0 0 2px ${color};\n  }\n\n  100% {\n    box-shadow: 0 0 0 0 ${color};\n  }\n`\nconst FocusedOutlineCard = styled(Card)<{ pulsing: boolean }>`\n  border: 1px solid ${({ theme }) => theme.bg2};\n  animation: ${({ pulsing, theme }) => pulsing && pulse(theme.primary1)} 0.6s linear;\n  align-self: center;\n`\n\nconst Select = styled.div`\n  align-items: flex-start;\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 8px;\n`\n\nexport default function FeeSelector({\n  disabled = false,\n  feeAmount,\n  handleFeePoolSelect,\n  currencyA,\n  currencyB,\n}: {\n  disabled?: boolean\n  feeAmount?: FeeAmount\n  handleFeePoolSelect: (feeAmount: FeeAmount) => void\n  currencyA?: Currency | undefined\n  currencyB?: Currency | undefined\n}) {\n  const { chainId } = useActiveWeb3React()\n\n  const { isLoading, isError, largestUsageFeeTier, distributions } = useFeeTierDistribution(currencyA, currencyB)\n\n  // get pool data on-chain for latest states\n  const pools = usePools([\n    [currencyA, currencyB, FeeAmount.LOWEST],\n    [currencyA, currencyB, FeeAmount.LOW],\n    [currencyA, currencyB, FeeAmount.MEDIUM],\n    [currencyA, currencyB, FeeAmount.HIGH],\n  ])\n\n  const poolsByFeeTier: Record<FeeAmount, PoolState> = useMemo(\n    () =>\n      pools.reduce(\n        (acc, [curPoolState, curPool]) => {\n          acc = {\n            ...acc,\n            ...{ [curPool?.fee as FeeAmount]: curPoolState },\n          }\n          return acc\n        },\n        {\n          // default all states to NOT_EXISTS\n          [FeeAmount.LOWEST]: PoolState.NOT_EXISTS,\n          [FeeAmount.LOW]: PoolState.NOT_EXISTS,\n          [FeeAmount.MEDIUM]: PoolState.NOT_EXISTS,\n          [FeeAmount.HIGH]: PoolState.NOT_EXISTS,\n        }\n      ),\n    [pools]\n  )\n\n  const [showOptions, setShowOptions] = useState(false)\n  const [pulsing, setPulsing] = useState(false)\n\n  const previousFeeAmount = usePrevious(feeAmount)\n\n  const recommended = useRef(false)\n\n  const handleFeePoolSelectWithEvent = useCallback(\n    (fee: FeeAmount) => {\n      ReactGA.event({\n        category: 'FeePoolSelect',\n        action: 'Manual',\n      })\n      handleFeePoolSelect(fee)\n    },\n    [handleFeePoolSelect]\n  )\n\n  useEffect(() => {\n    if (feeAmount || isLoading || isError) {\n      return\n    }\n\n    if (!largestUsageFeeTier) {\n      // cannot recommend, open options\n      setShowOptions(true)\n    } else {\n      setShowOptions(false)\n\n      recommended.current = true\n      ReactGA.event({\n        category: 'FeePoolSelect',\n        action: ' Recommended',\n      })\n\n      handleFeePoolSelect(largestUsageFeeTier)\n    }\n  }, [feeAmount, isLoading, isError, largestUsageFeeTier, handleFeePoolSelect])\n\n  useEffect(() => {\n    setShowOptions(isError)\n  }, [isError])\n\n  useEffect(() => {\n    if (feeAmount && previousFeeAmount !== feeAmount) {\n      setPulsing(true)\n    }\n  }, [previousFeeAmount, feeAmount])\n\n  return (\n    <AutoColumn gap=\"16px\">\n      <DynamicSection gap=\"md\" disabled={disabled}>\n        <FocusedOutlineCard pulsing={pulsing} onAnimationEnd={() => setPulsing(false)}>\n          <RowBetween>\n            <AutoColumn id=\"add-liquidity-selected-fee\">\n              {!feeAmount ? (\n                <>\n                  <ThemedText.Label>\n                    <Trans>Fee tier</Trans>\n                  </ThemedText.Label>\n                  <ThemedText.Main fontWeight={400} fontSize=\"12px\" textAlign=\"left\">\n                    <Trans>The % you will earn in fees.</Trans>\n                  </ThemedText.Main>\n                </>\n              ) : (\n                <>\n                  <ThemedText.Label className=\"selected-fee-label\">\n                    <Trans>{FEE_AMOUNT_DETAIL[feeAmount].label}% fee tier</Trans>\n                  </ThemedText.Label>\n                  <Box style={{ width: 'fit-content', marginTop: '8px' }} className=\"selected-fee-percentage\">\n                    {distributions && (\n                      <FeeTierPercentageBadge\n                        distributions={distributions}\n                        feeAmount={feeAmount}\n                        poolState={poolsByFeeTier[feeAmount]}\n                      />\n                    )}\n                  </Box>\n                </>\n              )}\n            </AutoColumn>\n\n            <ButtonGray onClick={() => setShowOptions(!showOptions)} width=\"auto\" padding=\"4px\" $borderRadius=\"6px\">\n              {showOptions ? <Trans>Hide</Trans> : <Trans>Edit</Trans>}\n            </ButtonGray>\n          </RowBetween>\n        </FocusedOutlineCard>\n\n        {chainId && showOptions && (\n          <Select>\n            {[FeeAmount.LOWEST, FeeAmount.LOW, FeeAmount.MEDIUM, FeeAmount.HIGH].map((_feeAmount, i) => {\n              const { supportedChains } = FEE_AMOUNT_DETAIL[_feeAmount]\n              if (supportedChains.includes(chainId)) {\n                return (\n                  <FeeOption\n                    feeAmount={_feeAmount}\n                    active={feeAmount === _feeAmount}\n                    onClick={() => handleFeePoolSelectWithEvent(_feeAmount)}\n                    distributions={distributions}\n                    poolState={poolsByFeeTier[_feeAmount]}\n                    key={i}\n                  />\n                )\n              }\n              return null\n            })}\n          </Select>\n        )}\n      </DynamicSection>\n    </AutoColumn>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}