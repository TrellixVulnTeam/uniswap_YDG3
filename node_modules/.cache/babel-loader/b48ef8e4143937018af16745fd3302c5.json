{"ast":null,"code":"import _styled from \"styled-components\";\n\nvar _jsxFileName = \"/Users/safahi/Downloads/interface-4.30.1/src/pages/Vote/VotePage.tsx\",\n    _s = $RefreshSig$();\n\nimport { Trans } from \"@lingui/react\";\nimport { i18n } from \"@lingui/core\";\nimport { BigNumber } from '@ethersproject/bignumber'; // eslint-disable-next-line no-restricted-imports\n\nimport { useActiveLocale } from 'hooks/useActiveLocale';\nimport useCurrentBlockTimestamp from 'hooks/useCurrentBlockTimestamp';\nimport JSBI from 'jsbi';\nimport { useState } from 'react';\nimport { ArrowLeft } from 'react-feather';\nimport ReactMarkdown from 'react-markdown';\nimport { ButtonPrimary } from '../../components/Button';\nimport { GreyCard } from '../../components/Card';\nimport { AutoColumn } from '../../components/Column';\nimport { CardSection, DataCard } from '../../components/earn/styled';\nimport { RowBetween, RowFixed } from '../../components/Row';\nimport { SwitchLocaleLink } from '../../components/SwitchLocaleLink';\nimport DelegateModal from '../../components/vote/DelegateModal';\nimport VoteModal from '../../components/vote/VoteModal';\nimport { AVERAGE_BLOCK_TIME_IN_SECS, COMMON_CONTRACT_NAMES, DEFAULT_AVERAGE_BLOCK_TIME_IN_SECS } from '../../constants/governance';\nimport { ZERO_ADDRESS } from '../../constants/misc';\nimport { UNI } from '../../constants/tokens';\nimport { useActiveWeb3React } from '../../hooks/web3';\nimport { useBlockNumber, useModalOpen, useToggleDelegateModal, useToggleVoteModal } from '../../state/application/hooks';\nimport { ApplicationModal } from '../../state/application/reducer';\nimport { ProposalState, useProposalData, useUserDelegatee, useUserVotesAsOfBlock } from '../../state/governance/hooks';\nimport { VoteOption } from '../../state/governance/types';\nimport { useTokenBalance } from '../../state/wallet/hooks';\nimport { ExternalLink, StyledInternalLink, ThemedText } from '../../theme';\nimport { isAddress } from '../../utils';\nimport { ExplorerDataType, getExplorerLink } from '../../utils/getExplorerLink';\nimport { ProposalStatus } from './styled';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst PageWrapper = _styled(AutoColumn).withConfig({\n  displayName: \"VotePage__PageWrapper\",\n  componentId: \"sc-1vobn0f-0\"\n})([\"width:100%;\"]);\n\nconst ProposalInfo = _styled(AutoColumn).withConfig({\n  displayName: \"VotePage__ProposalInfo\",\n  componentId: \"sc-1vobn0f-1\"\n})([\"background:\", \";border-radius:12px;padding:1.5rem;position:relative;max-width:640px;width:100%;\"], ({\n  theme\n}) => theme.bg0);\n\nconst ArrowWrapper = _styled(StyledInternalLink).withConfig({\n  displayName: \"VotePage__ArrowWrapper\",\n  componentId: \"sc-1vobn0f-2\"\n})([\"display:flex;align-items:center;gap:8px;height:24px;color:\", \";a{color:\", \";text-decoration:none;}:hover{text-decoration:none;}\"], ({\n  theme\n}) => theme.text1, ({\n  theme\n}) => theme.text1);\n\nconst CardWrapper = _styled.div.withConfig({\n  displayName: \"VotePage__CardWrapper\",\n  componentId: \"sc-1vobn0f-3\"\n})([\"display:grid;grid-template-columns:1fr 1fr;gap:12px;width:100%;\"]);\n\nconst StyledDataCard = _styled(DataCard).withConfig({\n  displayName: \"VotePage__StyledDataCard\",\n  componentId: \"sc-1vobn0f-4\"\n})([\"width:100%;background:none;background-color:\", \";height:fit-content;z-index:2;\"], ({\n  theme\n}) => theme.bg1);\n\nconst ProgressWrapper = _styled.div.withConfig({\n  displayName: \"VotePage__ProgressWrapper\",\n  componentId: \"sc-1vobn0f-5\"\n})([\"width:100%;margin-top:1rem;height:4px;border-radius:4px;background-color:\", \";position:relative;\"], ({\n  theme\n}) => theme.bg3);\n\nconst Progress = _styled.div.withConfig({\n  displayName: \"VotePage__Progress\",\n  componentId: \"sc-1vobn0f-6\"\n})([\"height:4px;border-radius:4px;background-color:\", \";width:\", \";\"], ({\n  theme,\n  status\n}) => status === 'for' ? theme.green1 : theme.red1, ({\n  percentageString\n}) => percentageString);\n\nconst MarkDownWrapper = _styled.div.withConfig({\n  displayName: \"VotePage__MarkDownWrapper\",\n  componentId: \"sc-1vobn0f-7\"\n})([\"max-width:640px;overflow:hidden;\"]);\n\nconst WrapSmall = _styled(RowBetween).withConfig({\n  displayName: \"VotePage__WrapSmall\",\n  componentId: \"sc-1vobn0f-8\"\n})([\"\", \";\"], ({\n  theme\n}) => theme.mediaWidth.upToSmall`\n    align-items: flex-start;\n    flex-direction: column;\n  `);\n\nconst DetailText = _styled.div.withConfig({\n  displayName: \"VotePage__DetailText\",\n  componentId: \"sc-1vobn0f-9\"\n})([\"word-break:break-all;\"]);\n\nconst ProposerAddressLink = _styled(ExternalLink).withConfig({\n  displayName: \"VotePage__ProposerAddressLink\",\n  componentId: \"sc-1vobn0f-10\"\n})([\"word-break:break-all;\"]);\n\nfunction getDateFromBlock(targetBlock, currentBlock, averageBlockTimeInSeconds, currentTimestamp) {\n  if (targetBlock && currentBlock && averageBlockTimeInSeconds && currentTimestamp) {\n    const date = new Date();\n    date.setTime(currentTimestamp.add(BigNumber.from(averageBlockTimeInSeconds).mul(BigNumber.from(targetBlock - currentBlock))).toNumber() * 1000);\n    return date;\n  }\n\n  return undefined;\n}\n\nexport default function VotePage({\n  match: {\n    params: {\n      governorIndex,\n      id\n    }\n  }\n}) {\n  _s();\n\n  var _ref, _ref2, _proposalData$startBl, _proposalData$forCoun, _proposalData$against, _proposalData$details;\n\n  const {\n    chainId,\n    account\n  } = useActiveWeb3React(); // get data for this specific proposal\n\n  const proposalData = useProposalData(Number.parseInt(governorIndex), id); // update vote option based on button interactions\n\n  const [voteOption, setVoteOption] = useState(undefined); // modal for casting votes\n\n  const showVoteModal = useModalOpen(ApplicationModal.VOTE);\n  const toggleVoteModal = useToggleVoteModal(); // toggle for showing delegation modal\n\n  const showDelegateModal = useModalOpen(ApplicationModal.DELEGATE);\n  const toggleDelegateModal = useToggleDelegateModal(); // get and format date from data\n\n  const currentTimestamp = useCurrentBlockTimestamp();\n  const currentBlock = useBlockNumber();\n  const startDate = getDateFromBlock(proposalData === null || proposalData === void 0 ? void 0 : proposalData.startBlock, currentBlock, (_ref = chainId && AVERAGE_BLOCK_TIME_IN_SECS[chainId]) !== null && _ref !== void 0 ? _ref : DEFAULT_AVERAGE_BLOCK_TIME_IN_SECS, currentTimestamp);\n  const endDate = getDateFromBlock(proposalData === null || proposalData === void 0 ? void 0 : proposalData.endBlock, currentBlock, (_ref2 = chainId && AVERAGE_BLOCK_TIME_IN_SECS[chainId]) !== null && _ref2 !== void 0 ? _ref2 : DEFAULT_AVERAGE_BLOCK_TIME_IN_SECS, currentTimestamp);\n  const now = new Date();\n  const locale = useActiveLocale();\n  const dateFormat = {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n    timeZoneName: 'short'\n  }; // get total votes and format percentages for UI\n\n  const totalVotes = proposalData ? proposalData.forCount + proposalData.againstCount : undefined;\n\n  const forPercentage =\n  /*i18n*/\n  i18n._(\"{0} %\", {\n    0: proposalData && totalVotes ? (proposalData.forCount * 100 / totalVotes).toFixed(0) : '0'\n  });\n\n  const againstPercentage =\n  /*i18n*/\n  i18n._(\"{0} %\", {\n    0: proposalData && totalVotes ? (proposalData.againstCount * 100 / totalVotes).toFixed(0) : '0'\n  }); // only count available votes as of the proposal start block\n\n\n  const availableVotes = useUserVotesAsOfBlock((_proposalData$startBl = proposalData === null || proposalData === void 0 ? void 0 : proposalData.startBlock) !== null && _proposalData$startBl !== void 0 ? _proposalData$startBl : undefined); // only show voting if user has > 0 votes at proposal start block and proposal is active,\n\n  const showVotingButtons = availableVotes && JSBI.greaterThan(availableVotes.quotient, JSBI.BigInt(0)) && proposalData && proposalData.status === ProposalState.ACTIVE;\n  const uniBalance = useTokenBalance(account !== null && account !== void 0 ? account : undefined, chainId ? UNI[chainId] : undefined);\n  const userDelegatee = useUserDelegatee(); // in blurb link to home page if they are able to unlock\n\n  const showLinkForUnlock = Boolean(uniBalance && JSBI.notEqual(uniBalance.quotient, JSBI.BigInt(0)) && userDelegatee === ZERO_ADDRESS); // show links in propsoal details if content is an address\n  // if content is contract with common name, replace address with common name\n\n  const linkIfAddress = content => {\n    if (isAddress(content) && chainId) {\n      var _COMMON_CONTRACT_NAME, _COMMON_CONTRACT_NAME2;\n\n      const commonName = (_COMMON_CONTRACT_NAME = (_COMMON_CONTRACT_NAME2 = COMMON_CONTRACT_NAMES[chainId]) === null || _COMMON_CONTRACT_NAME2 === void 0 ? void 0 : _COMMON_CONTRACT_NAME2[content]) !== null && _COMMON_CONTRACT_NAME !== void 0 ? _COMMON_CONTRACT_NAME : content;\n      return /*#__PURE__*/_jsxDEV(ExternalLink, {\n        href: getExplorerLink(chainId, content, ExplorerDataType.ADDRESS),\n        children: commonName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      children: content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 12\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(PageWrapper, {\n      gap: \"lg\",\n      justify: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(VoteModal, {\n        isOpen: showVoteModal,\n        onDismiss: toggleVoteModal,\n        proposalId: proposalData === null || proposalData === void 0 ? void 0 : proposalData.id,\n        voteOption: voteOption\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DelegateModal, {\n        isOpen: showDelegateModal,\n        onDismiss: toggleDelegateModal,\n        title: /*#__PURE__*/_jsxDEV(Trans, {\n          id: \"Unlock Votes\"\n        }, void 0, false, void 0, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ProposalInfo, {\n        gap: \"lg\",\n        justify: \"start\",\n        children: [/*#__PURE__*/_jsxDEV(RowBetween, {\n          style: {\n            width: '100%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(ArrowWrapper, {\n            to: \"/vote\",\n            children: /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"<0/> All Proposals\",\n              components: {\n                0: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 17\n                }, this)\n              }\n            }, void 0, false, void 0, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this), proposalData && /*#__PURE__*/_jsxDEV(ProposalStatus, {\n            status: proposalData.status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 30\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AutoColumn, {\n          gap: \"10px\",\n          style: {\n            width: '100%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(ThemedText.LargeHeader, {\n            style: {\n              marginBottom: '.5rem'\n            },\n            children: proposalData === null || proposalData === void 0 ? void 0 : proposalData.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(RowBetween, {\n            children: /*#__PURE__*/_jsxDEV(ThemedText.Main, {\n              children: startDate && startDate > now ? /*#__PURE__*/_jsxDEV(Trans, {\n                id: \"Voting starts approximately {0}\",\n                values: {\n                  0: startDate.toLocaleString(locale, dateFormat)\n                }\n              }, void 0, false, void 0, this) : null\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(RowBetween, {\n            children: /*#__PURE__*/_jsxDEV(ThemedText.Main, {\n              children: endDate && (endDate < now ? /*#__PURE__*/_jsxDEV(Trans, {\n                id: \"Voting ended {0}\",\n                values: {\n                  0: endDate.toLocaleString(locale, dateFormat)\n                }\n              }, void 0, false, void 0, this) : /*#__PURE__*/_jsxDEV(Trans, {\n                id: \"Voting ends approximately {0}\",\n                values: {\n                  0: endDate.toLocaleString(locale, dateFormat)\n                }\n              }, void 0, false, void 0, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 13\n          }, this), proposalData && proposalData.status === ProposalState.ACTIVE && !showVotingButtons && /*#__PURE__*/_jsxDEV(GreyCard, {\n            children: /*#__PURE__*/_jsxDEV(ThemedText.Black, {\n              children: [/*#__PURE__*/_jsxDEV(Trans, {\n                id: \"Only UNI votes that were self delegated or delegated to another address before block {0} are eligible for voting.\",\n                values: {\n                  0: proposalData.startBlock\n                }\n              }, void 0, false, void 0, this), showLinkForUnlock && /*#__PURE__*/_jsxDEV(\"span\", {\n                children: /*#__PURE__*/_jsxDEV(Trans, {\n                  id: \"<0>Unlock voting</0> to prepare for the next proposal.\",\n                  components: {\n                    0: /*#__PURE__*/_jsxDEV(StyledInternalLink, {\n                      to: \"/vote\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 280,\n                      columnNumber: 25\n                    }, this)\n                  }\n                }, void 0, false, void 0, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this), showVotingButtons ? /*#__PURE__*/_jsxDEV(RowFixed, {\n          style: {\n            width: '100%',\n            gap: '12px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(ButtonPrimary, {\n            padding: \"8px\",\n            $borderRadius: \"8px\",\n            onClick: () => {\n              setVoteOption(VoteOption.For);\n              toggleVoteModal();\n            },\n            children: /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Vote For\"\n            }, void 0, false, void 0, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ButtonPrimary, {\n            padding: \"8px\",\n            $borderRadius: \"8px\",\n            onClick: () => {\n              setVoteOption(VoteOption.Against);\n              toggleVoteModal();\n            },\n            children: /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Vote Against\"\n            }, void 0, false, void 0, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }, this) : '', /*#__PURE__*/_jsxDEV(CardWrapper, {\n          children: [/*#__PURE__*/_jsxDEV(StyledDataCard, {\n            children: /*#__PURE__*/_jsxDEV(CardSection, {\n              children: [/*#__PURE__*/_jsxDEV(AutoColumn, {\n                gap: \"md\",\n                children: /*#__PURE__*/_jsxDEV(WrapSmall, {\n                  children: [/*#__PURE__*/_jsxDEV(ThemedText.Black, {\n                    fontWeight: 600,\n                    children: /*#__PURE__*/_jsxDEV(Trans, {\n                      id: \"For\"\n                    }, void 0, false, void 0, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 320,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(ThemedText.Black, {\n                    fontWeight: 600,\n                    children: proposalData === null || proposalData === void 0 ? void 0 : (_proposalData$forCoun = proposalData.forCount) === null || _proposalData$forCoun === void 0 ? void 0 : _proposalData$forCoun.toLocaleString(undefined, {\n                      maximumFractionDigits: 0\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 323,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(ProgressWrapper, {\n                children: /*#__PURE__*/_jsxDEV(Progress, {\n                  status: 'for',\n                  percentageString: forPercentage\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(StyledDataCard, {\n            children: /*#__PURE__*/_jsxDEV(CardSection, {\n              children: [/*#__PURE__*/_jsxDEV(AutoColumn, {\n                gap: \"md\",\n                children: /*#__PURE__*/_jsxDEV(WrapSmall, {\n                  children: [/*#__PURE__*/_jsxDEV(ThemedText.Black, {\n                    fontWeight: 600,\n                    children: /*#__PURE__*/_jsxDEV(Trans, {\n                      id: \"Against\"\n                    }, void 0, false, void 0, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 337,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(ThemedText.Black, {\n                    fontWeight: 600,\n                    children: proposalData === null || proposalData === void 0 ? void 0 : (_proposalData$against = proposalData.againstCount) === null || _proposalData$against === void 0 ? void 0 : _proposalData$against.toLocaleString(undefined, {\n                      maximumFractionDigits: 0\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 340,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 336,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(ProgressWrapper, {\n                children: /*#__PURE__*/_jsxDEV(Progress, {\n                  status: 'against',\n                  percentageString: againstPercentage\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AutoColumn, {\n          gap: \"md\",\n          children: [/*#__PURE__*/_jsxDEV(ThemedText.MediumHeader, {\n            fontWeight: 600,\n            children: /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Details\"\n            }, void 0, false, void 0, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 13\n          }, this), proposalData === null || proposalData === void 0 ? void 0 : (_proposalData$details = proposalData.details) === null || _proposalData$details === void 0 ? void 0 : _proposalData$details.map((d, i) => {\n            return /*#__PURE__*/_jsxDEV(DetailText, {\n              children: [i + 1, \": \", linkIfAddress(d.target), \".\", d.functionSig, \"(\", d.callData.split(',').map((content, i) => {\n                return /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [linkIfAddress(content), d.callData.split(',').length - 1 === i ? '' : ',']\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 361,\n                  columnNumber: 23\n                }, this);\n              }), \")\"]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 17\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AutoColumn, {\n          gap: \"md\",\n          children: [/*#__PURE__*/_jsxDEV(ThemedText.MediumHeader, {\n            fontWeight: 600,\n            children: /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Description\"\n            }, void 0, false, void 0, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MarkDownWrapper, {\n            children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n              source: proposalData === null || proposalData === void 0 ? void 0 : proposalData.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AutoColumn, {\n          gap: \"md\",\n          children: [/*#__PURE__*/_jsxDEV(ThemedText.MediumHeader, {\n            fontWeight: 600,\n            children: /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Proposer\"\n            }, void 0, false, void 0, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ProposerAddressLink, {\n            href: (proposalData === null || proposalData === void 0 ? void 0 : proposalData.proposer) && chainId ? getExplorerLink(chainId, proposalData === null || proposalData === void 0 ? void 0 : proposalData.proposer, ExplorerDataType.ADDRESS) : '',\n            children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n              source: proposalData === null || proposalData === void 0 ? void 0 : proposalData.proposer\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SwitchLocaleLink, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(VotePage, \"7Iw20jULyK+UkoH9K53D5OcvS5E=\", false, function () {\n  return [useActiveWeb3React, useProposalData, useModalOpen, useToggleVoteModal, useModalOpen, useToggleDelegateModal, useCurrentBlockTimestamp, useBlockNumber, useActiveLocale, useUserVotesAsOfBlock, useTokenBalance, useUserDelegatee];\n});\n\n_c = VotePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"VotePage\");","map":{"version":3,"sources":["/Users/safahi/Downloads/interface-4.30.1/src/pages/Vote/VotePage.tsx"],"names":["BigNumber","useActiveLocale","useCurrentBlockTimestamp","JSBI","useState","ArrowLeft","ReactMarkdown","ButtonPrimary","GreyCard","AutoColumn","CardSection","DataCard","RowBetween","RowFixed","SwitchLocaleLink","DelegateModal","VoteModal","AVERAGE_BLOCK_TIME_IN_SECS","COMMON_CONTRACT_NAMES","DEFAULT_AVERAGE_BLOCK_TIME_IN_SECS","ZERO_ADDRESS","UNI","useActiveWeb3React","useBlockNumber","useModalOpen","useToggleDelegateModal","useToggleVoteModal","ApplicationModal","ProposalState","useProposalData","useUserDelegatee","useUserVotesAsOfBlock","VoteOption","useTokenBalance","ExternalLink","StyledInternalLink","ThemedText","isAddress","ExplorerDataType","getExplorerLink","ProposalStatus","PageWrapper","styled","ProposalInfo","theme","bg0","ArrowWrapper","text1","CardWrapper","div","StyledDataCard","bg1","ProgressWrapper","bg3","Progress","status","green1","red1","percentageString","MarkDownWrapper","WrapSmall","mediaWidth","upToSmall","DetailText","ProposerAddressLink","getDateFromBlock","targetBlock","currentBlock","averageBlockTimeInSeconds","currentTimestamp","date","Date","setTime","add","from","mul","toNumber","undefined","VotePage","match","params","governorIndex","id","chainId","account","proposalData","Number","parseInt","voteOption","setVoteOption","showVoteModal","VOTE","toggleVoteModal","showDelegateModal","DELEGATE","toggleDelegateModal","startDate","startBlock","endDate","endBlock","now","locale","dateFormat","year","month","day","hour","minute","timeZoneName","totalVotes","forCount","againstCount","forPercentage","toFixed","againstPercentage","availableVotes","showVotingButtons","greaterThan","quotient","BigInt","ACTIVE","uniBalance","userDelegatee","showLinkForUnlock","Boolean","notEqual","linkIfAddress","content","commonName","ADDRESS","width","marginBottom","title","toLocaleString","gap","For","Against","maximumFractionDigits","details","map","d","i","target","functionSig","callData","split","length","description","proposer"],"mappings":"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","sourcesContent":["import { BigNumber } from '@ethersproject/bignumber'\n// eslint-disable-next-line no-restricted-imports\nimport { t, Trans } from '@lingui/macro'\nimport { CurrencyAmount, Token } from '@uniswap/sdk-core'\nimport { useActiveLocale } from 'hooks/useActiveLocale'\nimport useCurrentBlockTimestamp from 'hooks/useCurrentBlockTimestamp'\nimport JSBI from 'jsbi'\nimport { useState } from 'react'\nimport { ArrowLeft } from 'react-feather'\nimport ReactMarkdown from 'react-markdown'\nimport { RouteComponentProps } from 'react-router-dom'\nimport styled from 'styled-components/macro'\n\nimport { ButtonPrimary } from '../../components/Button'\nimport { GreyCard } from '../../components/Card'\nimport { AutoColumn } from '../../components/Column'\nimport { CardSection, DataCard } from '../../components/earn/styled'\nimport { RowBetween, RowFixed } from '../../components/Row'\nimport { SwitchLocaleLink } from '../../components/SwitchLocaleLink'\nimport DelegateModal from '../../components/vote/DelegateModal'\nimport VoteModal from '../../components/vote/VoteModal'\nimport {\n  AVERAGE_BLOCK_TIME_IN_SECS,\n  COMMON_CONTRACT_NAMES,\n  DEFAULT_AVERAGE_BLOCK_TIME_IN_SECS,\n} from '../../constants/governance'\nimport { ZERO_ADDRESS } from '../../constants/misc'\nimport { UNI } from '../../constants/tokens'\nimport { useActiveWeb3React } from '../../hooks/web3'\nimport { useBlockNumber, useModalOpen, useToggleDelegateModal, useToggleVoteModal } from '../../state/application/hooks'\nimport { ApplicationModal } from '../../state/application/reducer'\nimport {\n  ProposalData,\n  ProposalState,\n  useProposalData,\n  useUserDelegatee,\n  useUserVotesAsOfBlock,\n} from '../../state/governance/hooks'\nimport { VoteOption } from '../../state/governance/types'\nimport { useTokenBalance } from '../../state/wallet/hooks'\nimport { ExternalLink, StyledInternalLink, ThemedText } from '../../theme'\nimport { isAddress } from '../../utils'\nimport { ExplorerDataType, getExplorerLink } from '../../utils/getExplorerLink'\nimport { ProposalStatus } from './styled'\n\nconst PageWrapper = styled(AutoColumn)`\n  width: 100%;\n`\n\nconst ProposalInfo = styled(AutoColumn)`\n  background: ${({ theme }) => theme.bg0};\n  border-radius: 12px;\n  padding: 1.5rem;\n  position: relative;\n  max-width: 640px;\n  width: 100%;\n`\n\nconst ArrowWrapper = styled(StyledInternalLink)`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  height: 24px;\n  color: ${({ theme }) => theme.text1};\n\n  a {\n    color: ${({ theme }) => theme.text1};\n    text-decoration: none;\n  }\n  :hover {\n    text-decoration: none;\n  }\n`\nconst CardWrapper = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 12px;\n  width: 100%;\n`\n\nconst StyledDataCard = styled(DataCard)`\n  width: 100%;\n  background: none;\n  background-color: ${({ theme }) => theme.bg1};\n  height: fit-content;\n  z-index: 2;\n`\n\nconst ProgressWrapper = styled.div`\n  width: 100%;\n  margin-top: 1rem;\n  height: 4px;\n  border-radius: 4px;\n  background-color: ${({ theme }) => theme.bg3};\n  position: relative;\n`\n\nconst Progress = styled.div<{ status: 'for' | 'against'; percentageString?: string }>`\n  height: 4px;\n  border-radius: 4px;\n  background-color: ${({ theme, status }) => (status === 'for' ? theme.green1 : theme.red1)};\n  width: ${({ percentageString }) => percentageString};\n`\n\nconst MarkDownWrapper = styled.div`\n  max-width: 640px;\n  overflow: hidden;\n`\n\nconst WrapSmall = styled(RowBetween)`\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    align-items: flex-start;\n    flex-direction: column;\n  `};\n`\n\nconst DetailText = styled.div`\n  word-break: break-all;\n`\n\nconst ProposerAddressLink = styled(ExternalLink)`\n  word-break: break-all;\n`\n\nfunction getDateFromBlock(\n  targetBlock: number | undefined,\n  currentBlock: number | undefined,\n  averageBlockTimeInSeconds: number | undefined,\n  currentTimestamp: BigNumber | undefined\n): Date | undefined {\n  if (targetBlock && currentBlock && averageBlockTimeInSeconds && currentTimestamp) {\n    const date = new Date()\n    date.setTime(\n      currentTimestamp\n        .add(BigNumber.from(averageBlockTimeInSeconds).mul(BigNumber.from(targetBlock - currentBlock)))\n        .toNumber() * 1000\n    )\n    return date\n  }\n  return undefined\n}\n\nexport default function VotePage({\n  match: {\n    params: { governorIndex, id },\n  },\n}: RouteComponentProps<{ governorIndex: string; id: string }>) {\n  const { chainId, account } = useActiveWeb3React()\n\n  // get data for this specific proposal\n  const proposalData: ProposalData | undefined = useProposalData(Number.parseInt(governorIndex), id)\n\n  // update vote option based on button interactions\n  const [voteOption, setVoteOption] = useState<VoteOption | undefined>(undefined)\n\n  // modal for casting votes\n  const showVoteModal = useModalOpen(ApplicationModal.VOTE)\n  const toggleVoteModal = useToggleVoteModal()\n\n  // toggle for showing delegation modal\n  const showDelegateModal = useModalOpen(ApplicationModal.DELEGATE)\n  const toggleDelegateModal = useToggleDelegateModal()\n\n  // get and format date from data\n  const currentTimestamp = useCurrentBlockTimestamp()\n  const currentBlock = useBlockNumber()\n  const startDate = getDateFromBlock(\n    proposalData?.startBlock,\n    currentBlock,\n    (chainId && AVERAGE_BLOCK_TIME_IN_SECS[chainId]) ?? DEFAULT_AVERAGE_BLOCK_TIME_IN_SECS,\n    currentTimestamp\n  )\n  const endDate = getDateFromBlock(\n    proposalData?.endBlock,\n    currentBlock,\n    (chainId && AVERAGE_BLOCK_TIME_IN_SECS[chainId]) ?? DEFAULT_AVERAGE_BLOCK_TIME_IN_SECS,\n    currentTimestamp\n  )\n  const now = new Date()\n  const locale = useActiveLocale()\n  const dateFormat: Intl.DateTimeFormatOptions = {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n    timeZoneName: 'short',\n  }\n\n  // get total votes and format percentages for UI\n  const totalVotes: number | undefined = proposalData ? proposalData.forCount + proposalData.againstCount : undefined\n  const forPercentage: string = t`${\n    proposalData && totalVotes ? ((proposalData.forCount * 100) / totalVotes).toFixed(0) : '0'\n  } %`\n  const againstPercentage: string = t`${\n    proposalData && totalVotes ? ((proposalData.againstCount * 100) / totalVotes).toFixed(0) : '0'\n  } %`\n\n  // only count available votes as of the proposal start block\n  const availableVotes: CurrencyAmount<Token> | undefined = useUserVotesAsOfBlock(proposalData?.startBlock ?? undefined)\n\n  // only show voting if user has > 0 votes at proposal start block and proposal is active,\n  const showVotingButtons =\n    availableVotes &&\n    JSBI.greaterThan(availableVotes.quotient, JSBI.BigInt(0)) &&\n    proposalData &&\n    proposalData.status === ProposalState.ACTIVE\n\n  const uniBalance: CurrencyAmount<Token> | undefined = useTokenBalance(\n    account ?? undefined,\n    chainId ? UNI[chainId] : undefined\n  )\n  const userDelegatee: string | undefined = useUserDelegatee()\n\n  // in blurb link to home page if they are able to unlock\n  const showLinkForUnlock = Boolean(\n    uniBalance && JSBI.notEqual(uniBalance.quotient, JSBI.BigInt(0)) && userDelegatee === ZERO_ADDRESS\n  )\n\n  // show links in propsoal details if content is an address\n  // if content is contract with common name, replace address with common name\n  const linkIfAddress = (content: string) => {\n    if (isAddress(content) && chainId) {\n      const commonName = COMMON_CONTRACT_NAMES[chainId]?.[content] ?? content\n      return (\n        <ExternalLink href={getExplorerLink(chainId, content, ExplorerDataType.ADDRESS)}>{commonName}</ExternalLink>\n      )\n    }\n    return <span>{content}</span>\n  }\n\n  return (\n    <>\n      <PageWrapper gap=\"lg\" justify=\"center\">\n        <VoteModal\n          isOpen={showVoteModal}\n          onDismiss={toggleVoteModal}\n          proposalId={proposalData?.id}\n          voteOption={voteOption}\n        />\n        <DelegateModal isOpen={showDelegateModal} onDismiss={toggleDelegateModal} title={<Trans>Unlock Votes</Trans>} />\n        <ProposalInfo gap=\"lg\" justify=\"start\">\n          <RowBetween style={{ width: '100%' }}>\n            <ArrowWrapper to=\"/vote\">\n              <Trans>\n                <ArrowLeft size={20} /> All Proposals\n              </Trans>\n            </ArrowWrapper>\n            {proposalData && <ProposalStatus status={proposalData.status} />}\n          </RowBetween>\n          <AutoColumn gap=\"10px\" style={{ width: '100%' }}>\n            <ThemedText.LargeHeader style={{ marginBottom: '.5rem' }}>{proposalData?.title}</ThemedText.LargeHeader>\n            <RowBetween>\n              <ThemedText.Main>\n                {startDate && startDate > now ? (\n                  <Trans>Voting starts approximately {startDate.toLocaleString(locale, dateFormat)}</Trans>\n                ) : null}\n              </ThemedText.Main>\n            </RowBetween>\n            <RowBetween>\n              <ThemedText.Main>\n                {endDate &&\n                  (endDate < now ? (\n                    <Trans>Voting ended {endDate.toLocaleString(locale, dateFormat)}</Trans>\n                  ) : (\n                    <Trans>Voting ends approximately {endDate.toLocaleString(locale, dateFormat)}</Trans>\n                  ))}\n              </ThemedText.Main>\n            </RowBetween>\n            {proposalData && proposalData.status === ProposalState.ACTIVE && !showVotingButtons && (\n              <GreyCard>\n                <ThemedText.Black>\n                  <Trans>\n                    Only UNI votes that were self delegated or delegated to another address before block{' '}\n                    {proposalData.startBlock} are eligible for voting.{' '}\n                  </Trans>\n                  {showLinkForUnlock && (\n                    <span>\n                      <Trans>\n                        <StyledInternalLink to=\"/vote\">Unlock voting</StyledInternalLink> to prepare for the next\n                        proposal.\n                      </Trans>\n                    </span>\n                  )}\n                </ThemedText.Black>\n              </GreyCard>\n            )}\n          </AutoColumn>\n          {showVotingButtons ? (\n            <RowFixed style={{ width: '100%', gap: '12px' }}>\n              <ButtonPrimary\n                padding=\"8px\"\n                $borderRadius=\"8px\"\n                onClick={() => {\n                  setVoteOption(VoteOption.For)\n                  toggleVoteModal()\n                }}\n              >\n                <Trans>Vote For</Trans>\n              </ButtonPrimary>\n              <ButtonPrimary\n                padding=\"8px\"\n                $borderRadius=\"8px\"\n                onClick={() => {\n                  setVoteOption(VoteOption.Against)\n                  toggleVoteModal()\n                }}\n              >\n                <Trans>Vote Against</Trans>\n              </ButtonPrimary>\n            </RowFixed>\n          ) : (\n            ''\n          )}\n          <CardWrapper>\n            <StyledDataCard>\n              <CardSection>\n                <AutoColumn gap=\"md\">\n                  <WrapSmall>\n                    <ThemedText.Black fontWeight={600}>\n                      <Trans>For</Trans>\n                    </ThemedText.Black>\n                    <ThemedText.Black fontWeight={600}>\n                      {proposalData?.forCount?.toLocaleString(undefined, { maximumFractionDigits: 0 })}\n                    </ThemedText.Black>\n                  </WrapSmall>\n                </AutoColumn>\n                <ProgressWrapper>\n                  <Progress status={'for'} percentageString={forPercentage} />\n                </ProgressWrapper>\n              </CardSection>\n            </StyledDataCard>\n            <StyledDataCard>\n              <CardSection>\n                <AutoColumn gap=\"md\">\n                  <WrapSmall>\n                    <ThemedText.Black fontWeight={600}>\n                      <Trans>Against</Trans>\n                    </ThemedText.Black>\n                    <ThemedText.Black fontWeight={600}>\n                      {proposalData?.againstCount?.toLocaleString(undefined, { maximumFractionDigits: 0 })}\n                    </ThemedText.Black>\n                  </WrapSmall>\n                </AutoColumn>\n                <ProgressWrapper>\n                  <Progress status={'against'} percentageString={againstPercentage} />\n                </ProgressWrapper>\n              </CardSection>\n            </StyledDataCard>\n          </CardWrapper>\n          <AutoColumn gap=\"md\">\n            <ThemedText.MediumHeader fontWeight={600}>\n              <Trans>Details</Trans>\n            </ThemedText.MediumHeader>\n            {proposalData?.details?.map((d, i) => {\n              return (\n                <DetailText key={i}>\n                  {i + 1}: {linkIfAddress(d.target)}.{d.functionSig}(\n                  {d.callData.split(',').map((content, i) => {\n                    return (\n                      <span key={i}>\n                        {linkIfAddress(content)}\n                        {d.callData.split(',').length - 1 === i ? '' : ','}\n                      </span>\n                    )\n                  })}\n                  )\n                </DetailText>\n              )\n            })}\n          </AutoColumn>\n          <AutoColumn gap=\"md\">\n            <ThemedText.MediumHeader fontWeight={600}>\n              <Trans>Description</Trans>\n            </ThemedText.MediumHeader>\n            <MarkDownWrapper>\n              <ReactMarkdown source={proposalData?.description} />\n            </MarkDownWrapper>\n          </AutoColumn>\n          <AutoColumn gap=\"md\">\n            <ThemedText.MediumHeader fontWeight={600}>\n              <Trans>Proposer</Trans>\n            </ThemedText.MediumHeader>\n            <ProposerAddressLink\n              href={\n                proposalData?.proposer && chainId\n                  ? getExplorerLink(chainId, proposalData?.proposer, ExplorerDataType.ADDRESS)\n                  : ''\n              }\n            >\n              <ReactMarkdown source={proposalData?.proposer} />\n            </ProposerAddressLink>\n          </AutoColumn>\n        </ProposalInfo>\n      </PageWrapper>\n      <SwitchLocaleLink />\n    </>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}