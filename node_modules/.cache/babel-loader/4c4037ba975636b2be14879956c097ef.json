{"ast":null,"code":"import { ThemeContext as _ThemeContext } from \"styled-components\";\nimport _styled from \"styled-components\";\n\nvar _jsxFileName = \"/Users/safahi/Downloads/interface-4.30.1/src/components/vote/VoteModal.tsx\",\n    _s = $RefreshSig$();\n\nimport { Trans } from \"@lingui/react\";\nimport { useContext, useState } from 'react';\nimport { ArrowUpCircle, X } from 'react-feather';\nimport { formatCurrencyAmount } from 'utils/formatCurrencyAmount';\nimport Circle from \"../../assets/images/blue-loader.svg\";\nimport { useActiveWeb3React } from '../../hooks/web3';\nimport { useUserVotes, useVoteCallback } from '../../state/governance/hooks';\nimport { VoteOption } from '../../state/governance/types';\nimport { CustomLightSpinner, ThemedText } from '../../theme';\nimport { ExternalLink } from '../../theme';\nimport { ExplorerDataType, getExplorerLink } from '../../utils/getExplorerLink';\nimport { ButtonPrimary } from '../Button';\nimport { AutoColumn, ColumnCenter } from '../Column';\nimport Modal from '../Modal';\nimport { RowBetween } from '../Row';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ContentWrapper = _styled(AutoColumn).withConfig({\n  displayName: \"VoteModal__ContentWrapper\",\n  componentId: \"sc-km2t4x-0\"\n})([\"width:100%;padding:24px;\"]);\n\nconst StyledClosed = _styled(X).withConfig({\n  displayName: \"VoteModal__StyledClosed\",\n  componentId: \"sc-km2t4x-1\"\n})([\":hover{cursor:pointer;}\"]);\n\nconst ConfirmOrLoadingWrapper = _styled.div.withConfig({\n  displayName: \"VoteModal__ConfirmOrLoadingWrapper\",\n  componentId: \"sc-km2t4x-2\"\n})([\"width:100%;padding:24px;\"]);\n\nconst ConfirmedIcon = _styled(ColumnCenter).withConfig({\n  displayName: \"VoteModal__ConfirmedIcon\",\n  componentId: \"sc-km2t4x-3\"\n})([\"padding:60px 0;\"]);\n\nexport default function VoteModal({\n  isOpen,\n  onDismiss,\n  proposalId,\n  voteOption\n}) {\n  _s();\n\n  const {\n    chainId\n  } = useActiveWeb3React();\n  const {\n    voteCallback\n  } = useVoteCallback();\n  const {\n    votes: availableVotes\n  } = useUserVotes(); // monitor call to help UI loading state\n\n  const [hash, setHash] = useState();\n  const [attempting, setAttempting] = useState(false); // get theme for colors\n\n  const theme = useContext(_ThemeContext); // wrapper to reset state on modal close\n\n  function wrappedOndismiss() {\n    setHash(undefined);\n    setAttempting(false);\n    onDismiss();\n  }\n\n  async function onVote() {\n    var _voteCallback;\n\n    setAttempting(true); // if callback not returned properly ignore\n\n    if (!voteCallback || voteOption === undefined) return; // try delegation and store hash\n\n    const hash = await ((_voteCallback = voteCallback(proposalId, voteOption)) === null || _voteCallback === void 0 ? void 0 : _voteCallback.catch(error => {\n      setAttempting(false);\n      console.log(error);\n    }));\n\n    if (hash) {\n      setHash(hash);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: isOpen,\n    onDismiss: wrappedOndismiss,\n    maxHeight: 90,\n    children: [!attempting && !hash && /*#__PURE__*/_jsxDEV(ContentWrapper, {\n      gap: \"lg\",\n      children: /*#__PURE__*/_jsxDEV(AutoColumn, {\n        gap: \"lg\",\n        justify: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(RowBetween, {\n          children: [/*#__PURE__*/_jsxDEV(ThemedText.MediumHeader, {\n            fontWeight: 500,\n            children: voteOption === VoteOption.Against ? /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Vote against proposal {proposalId}\",\n              values: {\n                proposalId: proposalId\n              }\n            }, void 0, false, void 0, this) : voteOption === VoteOption.For ? /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Vote for proposal {proposalId}\",\n              values: {\n                proposalId: proposalId\n              }\n            }, void 0, false, void 0, this) : /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Vote to abstain on proposal {proposalId}\",\n              values: {\n                proposalId: proposalId\n              }\n            }, void 0, false, void 0, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(StyledClosed, {\n            stroke: \"black\",\n            onClick: wrappedOndismiss\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ThemedText.LargeHeader, {\n          children: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"{0} Votes\",\n            values: {\n              0: formatCurrencyAmount(availableVotes, 4)\n            }\n          }, void 0, false, void 0, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ButtonPrimary, {\n          onClick: onVote,\n          children: /*#__PURE__*/_jsxDEV(ThemedText.MediumHeader, {\n            color: \"white\",\n            children: voteOption === VoteOption.Against ? /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Vote against proposal {proposalId}\",\n              values: {\n                proposalId: proposalId\n              }\n            }, void 0, false, void 0, this) : voteOption === VoteOption.For ? /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Vote for proposal {proposalId}\",\n              values: {\n                proposalId: proposalId\n              }\n            }, void 0, false, void 0, this) : /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Vote to abstain on proposal {proposalId}\",\n              values: {\n                proposalId: proposalId\n              }\n            }, void 0, false, void 0, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this), attempting && !hash && /*#__PURE__*/_jsxDEV(ConfirmOrLoadingWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(RowBetween, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(StyledClosed, {\n          onClick: wrappedOndismiss\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ConfirmedIcon, {\n        children: /*#__PURE__*/_jsxDEV(CustomLightSpinner, {\n          src: Circle,\n          alt: \"loader\",\n          size: '90px'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(AutoColumn, {\n        gap: \"100px\",\n        justify: 'center',\n        children: [/*#__PURE__*/_jsxDEV(AutoColumn, {\n          gap: \"12px\",\n          justify: 'center',\n          children: /*#__PURE__*/_jsxDEV(ThemedText.LargeHeader, {\n            children: /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Submitting Vote\"\n            }, void 0, false, void 0, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ThemedText.SubHeader, {\n          children: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Confirm this transaction in your wallet\"\n          }, void 0, false, void 0, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }, this), hash && /*#__PURE__*/_jsxDEV(ConfirmOrLoadingWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(RowBetween, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(StyledClosed, {\n          onClick: wrappedOndismiss\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ConfirmedIcon, {\n        children: /*#__PURE__*/_jsxDEV(ArrowUpCircle, {\n          strokeWidth: 0.5,\n          size: 90,\n          color: theme.primary1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(AutoColumn, {\n        gap: \"100px\",\n        justify: 'center',\n        children: [/*#__PURE__*/_jsxDEV(AutoColumn, {\n          gap: \"12px\",\n          justify: 'center',\n          children: /*#__PURE__*/_jsxDEV(ThemedText.LargeHeader, {\n            children: /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"Transaction Submitted\"\n            }, void 0, false, void 0, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this), chainId && /*#__PURE__*/_jsxDEV(ExternalLink, {\n          href: getExplorerLink(chainId, hash, ExplorerDataType.TRANSACTION),\n          style: {\n            marginLeft: '4px'\n          },\n          children: /*#__PURE__*/_jsxDEV(ThemedText.SubHeader, {\n            children: /*#__PURE__*/_jsxDEV(Trans, {\n              id: \"View transaction on Explorer\"\n            }, void 0, false, void 0, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n\n_s(VoteModal, \"OFxzUpz92DOOkzdK2bJQWoriBzQ=\", false, function () {\n  return [useActiveWeb3React, useVoteCallback, useUserVotes];\n});\n\n_c = VoteModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"VoteModal\");","map":{"version":3,"sources":["/Users/safahi/Downloads/interface-4.30.1/src/components/vote/VoteModal.tsx"],"names":["useContext","useState","ArrowUpCircle","X","formatCurrencyAmount","useActiveWeb3React","useUserVotes","useVoteCallback","VoteOption","CustomLightSpinner","ThemedText","ExternalLink","ExplorerDataType","getExplorerLink","ButtonPrimary","AutoColumn","ColumnCenter","Modal","RowBetween","ContentWrapper","styled","StyledClosed","ConfirmOrLoadingWrapper","div","ConfirmedIcon","VoteModal","isOpen","onDismiss","proposalId","voteOption","chainId","voteCallback","votes","availableVotes","hash","setHash","attempting","setAttempting","theme","ThemeContext","wrappedOndismiss","undefined","onVote","catch","error","console","log","Against","For","Circle","primary1","TRANSACTION","marginLeft"],"mappings":"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","sourcesContent":["import { Trans } from '@lingui/macro'\nimport { useContext, useState } from 'react'\nimport { ArrowUpCircle, X } from 'react-feather'\nimport styled, { ThemeContext } from 'styled-components/macro'\nimport { formatCurrencyAmount } from 'utils/formatCurrencyAmount'\n\nimport Circle from '../../assets/images/blue-loader.svg'\nimport { useActiveWeb3React } from '../../hooks/web3'\nimport { useUserVotes, useVoteCallback } from '../../state/governance/hooks'\nimport { VoteOption } from '../../state/governance/types'\nimport { CustomLightSpinner, ThemedText } from '../../theme'\nimport { ExternalLink } from '../../theme'\nimport { ExplorerDataType, getExplorerLink } from '../../utils/getExplorerLink'\nimport { ButtonPrimary } from '../Button'\nimport { AutoColumn, ColumnCenter } from '../Column'\nimport Modal from '../Modal'\nimport { RowBetween } from '../Row'\n\nconst ContentWrapper = styled(AutoColumn)`\n  width: 100%;\n  padding: 24px;\n`\n\nconst StyledClosed = styled(X)`\n  :hover {\n    cursor: pointer;\n  }\n`\n\nconst ConfirmOrLoadingWrapper = styled.div`\n  width: 100%;\n  padding: 24px;\n`\n\nconst ConfirmedIcon = styled(ColumnCenter)`\n  padding: 60px 0;\n`\n\ninterface VoteModalProps {\n  isOpen: boolean\n  onDismiss: () => void\n  voteOption: VoteOption | undefined\n  proposalId: string | undefined // id for the proposal to vote on\n}\n\nexport default function VoteModal({ isOpen, onDismiss, proposalId, voteOption }: VoteModalProps) {\n  const { chainId } = useActiveWeb3React()\n  const { voteCallback } = useVoteCallback()\n  const { votes: availableVotes } = useUserVotes()\n\n  // monitor call to help UI loading state\n  const [hash, setHash] = useState<string | undefined>()\n  const [attempting, setAttempting] = useState<boolean>(false)\n\n  // get theme for colors\n  const theme = useContext(ThemeContext)\n\n  // wrapper to reset state on modal close\n  function wrappedOndismiss() {\n    setHash(undefined)\n    setAttempting(false)\n    onDismiss()\n  }\n\n  async function onVote() {\n    setAttempting(true)\n\n    // if callback not returned properly ignore\n    if (!voteCallback || voteOption === undefined) return\n\n    // try delegation and store hash\n    const hash = await voteCallback(proposalId, voteOption)?.catch((error) => {\n      setAttempting(false)\n      console.log(error)\n    })\n\n    if (hash) {\n      setHash(hash)\n    }\n  }\n\n  return (\n    <Modal isOpen={isOpen} onDismiss={wrappedOndismiss} maxHeight={90}>\n      {!attempting && !hash && (\n        <ContentWrapper gap=\"lg\">\n          <AutoColumn gap=\"lg\" justify=\"center\">\n            <RowBetween>\n              <ThemedText.MediumHeader fontWeight={500}>\n                {voteOption === VoteOption.Against ? (\n                  <Trans>Vote against proposal {proposalId}</Trans>\n                ) : voteOption === VoteOption.For ? (\n                  <Trans>Vote for proposal {proposalId}</Trans>\n                ) : (\n                  <Trans>Vote to abstain on proposal {proposalId}</Trans>\n                )}\n              </ThemedText.MediumHeader>\n              <StyledClosed stroke=\"black\" onClick={wrappedOndismiss} />\n            </RowBetween>\n            <ThemedText.LargeHeader>\n              <Trans>{formatCurrencyAmount(availableVotes, 4)} Votes</Trans>\n            </ThemedText.LargeHeader>\n            <ButtonPrimary onClick={onVote}>\n              <ThemedText.MediumHeader color=\"white\">\n                {voteOption === VoteOption.Against ? (\n                  <Trans>Vote against proposal {proposalId}</Trans>\n                ) : voteOption === VoteOption.For ? (\n                  <Trans>Vote for proposal {proposalId}</Trans>\n                ) : (\n                  <Trans>Vote to abstain on proposal {proposalId}</Trans>\n                )}\n              </ThemedText.MediumHeader>\n            </ButtonPrimary>\n          </AutoColumn>\n        </ContentWrapper>\n      )}\n      {attempting && !hash && (\n        <ConfirmOrLoadingWrapper>\n          <RowBetween>\n            <div />\n            <StyledClosed onClick={wrappedOndismiss} />\n          </RowBetween>\n          <ConfirmedIcon>\n            <CustomLightSpinner src={Circle} alt=\"loader\" size={'90px'} />\n          </ConfirmedIcon>\n          <AutoColumn gap=\"100px\" justify={'center'}>\n            <AutoColumn gap=\"12px\" justify={'center'}>\n              <ThemedText.LargeHeader>\n                <Trans>Submitting Vote</Trans>\n              </ThemedText.LargeHeader>\n            </AutoColumn>\n            <ThemedText.SubHeader>\n              <Trans>Confirm this transaction in your wallet</Trans>\n            </ThemedText.SubHeader>\n          </AutoColumn>\n        </ConfirmOrLoadingWrapper>\n      )}\n      {hash && (\n        <ConfirmOrLoadingWrapper>\n          <RowBetween>\n            <div />\n            <StyledClosed onClick={wrappedOndismiss} />\n          </RowBetween>\n          <ConfirmedIcon>\n            <ArrowUpCircle strokeWidth={0.5} size={90} color={theme.primary1} />\n          </ConfirmedIcon>\n          <AutoColumn gap=\"100px\" justify={'center'}>\n            <AutoColumn gap=\"12px\" justify={'center'}>\n              <ThemedText.LargeHeader>\n                <Trans>Transaction Submitted</Trans>\n              </ThemedText.LargeHeader>\n            </AutoColumn>\n            {chainId && (\n              <ExternalLink\n                href={getExplorerLink(chainId, hash, ExplorerDataType.TRANSACTION)}\n                style={{ marginLeft: '4px' }}\n              >\n                <ThemedText.SubHeader>\n                  <Trans>View transaction on Explorer</Trans>\n                </ThemedText.SubHeader>\n              </ExternalLink>\n            )}\n          </AutoColumn>\n        </ConfirmOrLoadingWrapper>\n      )}\n    </Modal>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}