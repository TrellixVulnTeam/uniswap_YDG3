{"ast":null,"code":"import _regeneratorRuntime from \"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { SwapRouter02__factory } from '../types/other';\nimport { log } from '../util';\nvar SWAP_ROUTER_ADDRESS = '0x075B36dE1Bd11cb361c5B3B1E80A9ab0e7aa8a60';\nexport var SwapRouterProvider = /*#__PURE__*/function () {\n  function SwapRouterProvider(multicall2Provider) {\n    _classCallCheck(this, SwapRouterProvider);\n\n    this.multicall2Provider = multicall2Provider;\n  }\n\n  _createClass(SwapRouterProvider, [{\n    key: \"getApprovalType\",\n    value: function () {\n      var _getApprovalType = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(tokenInAmount, tokenOutAmount) {\n        var _a, _b, functionParams, tx, approvalTokenIn, approvalTokenOut;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                functionParams = [[tokenInAmount.currency.wrapped.address, tokenInAmount.quotient.toString()], [tokenOutAmount.currency.wrapped.address, tokenOutAmount.quotient.toString()]];\n                _context.next = 3;\n                return this.multicall2Provider.callSameFunctionOnContractWithMultipleParams({\n                  address: SWAP_ROUTER_ADDRESS,\n                  contractInterface: SwapRouter02__factory.createInterface(),\n                  functionName: 'getApprovalType',\n                  functionParams: functionParams\n                });\n\n              case 3:\n                tx = _context.sent;\n\n                if (!(!((_a = tx.results[0]) === null || _a === void 0 ? void 0 : _a.success) || !((_b = tx.results[1]) === null || _b === void 0 ? void 0 : _b.success))) {\n                  _context.next = 7;\n                  break;\n                }\n\n                log.info({\n                  results: tx.results\n                }, 'Failed to get approval type from swap router for token in or token out');\n                throw new Error('Failed to get approval type from swap router for token in or token out');\n\n              case 7:\n                approvalTokenIn = tx.results[0].result;\n                approvalTokenOut = tx.results[1].result;\n                return _context.abrupt(\"return\", {\n                  approvalTokenIn: approvalTokenIn[0],\n                  approvalTokenOut: approvalTokenOut[0]\n                });\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getApprovalType(_x, _x2) {\n        return _getApprovalType.apply(this, arguments);\n      }\n\n      return getApprovalType;\n    }()\n  }]);\n\n  return SwapRouterProvider;\n}();","map":{"version":3,"sources":["../../../../src/providers/swap-router-provider.ts"],"names":[],"mappings":";;;;AAEA,SAAS,qBAAT,QAAsC,gBAAtC;AACA,SAAS,GAAT,QAAoB,SAApB;AAQA,IAAM,mBAAmB,GAAG,4CAA5B;AAsBA,WAAa,kBAAb;AACE,8BAAsB,kBAAtB,EAA4D;AAAA;;AAAtC,SAAA,kBAAA,GAAA,kBAAA;AAA0C;;AADlE;AAAA;AAAA;AAAA,sFAGS,iBACL,aADK,EAEL,cAFK;AAAA;;AAAA;AAAA;AAAA;AAAA;AAIC,gBAAA,cAJD,GAIsC,CACzC,CACE,aAAa,CAAC,QAAd,CAAuB,OAAvB,CAA+B,OADjC,EAEE,aAAa,CAAC,QAAd,CAAuB,QAAvB,EAFF,CADyC,EAKzC,CACE,cAAc,CAAC,QAAf,CAAwB,OAAxB,CAAgC,OADlC,EAEE,cAAc,CAAC,QAAf,CAAwB,QAAxB,EAFF,CALyC,CAJtC;AAAA;AAAA,uBAgBG,KAAK,kBAAL,CAAwB,4CAAxB,CAGJ;AACA,kBAAA,OAAO,EAAE,mBADT;AAEA,kBAAA,iBAAiB,EAAE,qBAAqB,CAAC,eAAtB,EAFnB;AAGA,kBAAA,YAAY,EAAE,iBAHd;AAIA,kBAAA,cAAc,EAAd;AAJA,iBAHI,CAhBH;;AAAA;AAeC,gBAAA,EAfD;;AAAA,sBA0BD,EAAC,CAAA,EAAA,GAAA,EAAE,CAAC,OAAH,CAAW,CAAX,CAAA,MAAa,IAAb,IAAa,EAAA,KAAA,KAAA,CAAb,GAAa,KAAA,CAAb,GAAa,EAAA,CAAE,OAAhB,KAA2B,EAAC,CAAA,EAAA,GAAA,EAAE,CAAC,OAAH,CAAW,CAAX,CAAA,MAAa,IAAb,IAAa,EAAA,KAAA,KAAA,CAAb,GAAa,KAAA,CAAb,GAAa,EAAA,CAAE,OAAhB,CA1B1B;AAAA;AAAA;AAAA;;AA2BH,gBAAA,GAAG,CAAC,IAAJ,CACE;AAAE,kBAAA,OAAO,EAAE,EAAE,CAAC;AAAd,iBADF,EAEE,wEAFF;AA3BG,sBA+BG,IAAI,KAAJ,CACJ,wEADI,CA/BH;;AAAA;AAoCW,gBAAA,eApCX,GAoC+B,EAAE,CAAC,OAAH,CAAY,CAAZ,CApC/B,CAoCG,MApCH;AAqCW,gBAAA,gBArCX,GAqCgC,EAAE,CAAC,OAAH,CAAY,CAAZ,CArChC,CAqCG,MArCH;AAAA,iDAuCE;AACL,kBAAA,eAAe,EAAE,eAAe,CAAC,CAAD,CAD3B;AAEL,kBAAA,gBAAgB,EAAE,gBAAgB,CAAC,CAAD;AAF7B,iBAvCF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAHT;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA","sourceRoot":"","sourcesContent":["import { SwapRouter02__factory } from '../types/other';\nimport { log } from '../util';\nconst SWAP_ROUTER_ADDRESS = '0x075B36dE1Bd11cb361c5B3B1E80A9ab0e7aa8a60';\nexport class SwapRouterProvider {\n    constructor(multicall2Provider) {\n        this.multicall2Provider = multicall2Provider;\n    }\n    async getApprovalType(tokenInAmount, tokenOutAmount) {\n        var _a, _b;\n        const functionParams = [\n            [\n                tokenInAmount.currency.wrapped.address,\n                tokenInAmount.quotient.toString(),\n            ],\n            [\n                tokenOutAmount.currency.wrapped.address,\n                tokenOutAmount.quotient.toString(),\n            ],\n        ];\n        const tx = await this.multicall2Provider.callSameFunctionOnContractWithMultipleParams({\n            address: SWAP_ROUTER_ADDRESS,\n            contractInterface: SwapRouter02__factory.createInterface(),\n            functionName: 'getApprovalType',\n            functionParams,\n        });\n        if (!((_a = tx.results[0]) === null || _a === void 0 ? void 0 : _a.success) || !((_b = tx.results[1]) === null || _b === void 0 ? void 0 : _b.success)) {\n            log.info({ results: tx.results }, 'Failed to get approval type from swap router for token in or token out');\n            throw new Error('Failed to get approval type from swap router for token in or token out');\n        }\n        const { result: approvalTokenIn } = tx.results[0];\n        const { result: approvalTokenOut } = tx.results[1];\n        return {\n            approvalTokenIn: approvalTokenIn[0],\n            approvalTokenOut: approvalTokenOut[0],\n        };\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3dhcC1yb3V0ZXItcHJvdmlkZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvcHJvdmlkZXJzL3N3YXAtcm91dGVyLXByb3ZpZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxTQUFTLENBQUM7QUFROUIsTUFBTSxtQkFBbUIsR0FBRyw0Q0FBNEMsQ0FBQztBQXNCekUsTUFBTSxPQUFPLGtCQUFrQjtJQUM3QixZQUFzQixrQkFBc0M7UUFBdEMsdUJBQWtCLEdBQWxCLGtCQUFrQixDQUFvQjtJQUFHLENBQUM7SUFFekQsS0FBSyxDQUFDLGVBQWUsQ0FDMUIsYUFBdUMsRUFDdkMsY0FBd0M7O1FBRXhDLE1BQU0sY0FBYyxHQUF1QjtZQUN6QztnQkFDRSxhQUFhLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxPQUFPO2dCQUN0QyxhQUFhLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRTthQUNsQztZQUNEO2dCQUNFLGNBQWMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE9BQU87Z0JBQ3ZDLGNBQWMsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFO2FBQ25DO1NBQ0YsQ0FBQztRQUVGLE1BQU0sRUFBRSxHQUNOLE1BQU0sSUFBSSxDQUFDLGtCQUFrQixDQUFDLDRDQUE0QyxDQUd4RTtZQUNBLE9BQU8sRUFBRSxtQkFBbUI7WUFDNUIsaUJBQWlCLEVBQUUscUJBQXFCLENBQUMsZUFBZSxFQUFFO1lBQzFELFlBQVksRUFBRSxpQkFBaUI7WUFDL0IsY0FBYztTQUNmLENBQUMsQ0FBQztRQUVMLElBQUksQ0FBQyxDQUFBLE1BQUEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsMENBQUUsT0FBTyxDQUFBLElBQUksQ0FBQyxDQUFBLE1BQUEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsMENBQUUsT0FBTyxDQUFBLEVBQUU7WUFDdEQsR0FBRyxDQUFDLElBQUksQ0FDTixFQUFFLE9BQU8sRUFBRSxFQUFFLENBQUMsT0FBTyxFQUFFLEVBQ3ZCLHdFQUF3RSxDQUN6RSxDQUFDO1lBQ0YsTUFBTSxJQUFJLEtBQUssQ0FDYix3RUFBd0UsQ0FDekUsQ0FBQztTQUNIO1FBRUQsTUFBTSxFQUFFLE1BQU0sRUFBRSxlQUFlLEVBQUUsR0FBRyxFQUFFLENBQUMsT0FBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ25ELE1BQU0sRUFBRSxNQUFNLEVBQUUsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFLENBQUMsT0FBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXBELE9BQU87WUFDTCxlQUFlLEVBQUUsZUFBZSxDQUFDLENBQUMsQ0FBQztZQUNuQyxnQkFBZ0IsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7U0FDdEMsQ0FBQztJQUNKLENBQUM7Q0FDRiJ9"]},"metadata":{},"sourceType":"module"}