{"ast":null,"code":"/**\n * Mnemonist Fuzzy Map\n * ====================\n *\n * The fuzzy map is a map whose keys are processed by a function before\n * read/write operations. This can often result in multiple keys accessing\n * the same resource (example: a map with lowercased keys).\n */\nvar forEach = require('obliterator/foreach');\n\nvar identity = function identity(x) {\n  return x;\n};\n/**\n * FuzzyMap.\n *\n * @constructor\n * @param {array|function} descriptor - Hash functions descriptor.\n */\n\n\nfunction FuzzyMap(descriptor) {\n  this.items = new Map();\n  this.clear();\n\n  if (Array.isArray(descriptor)) {\n    this.writeHashFunction = descriptor[0];\n    this.readHashFunction = descriptor[1];\n  } else {\n    this.writeHashFunction = descriptor;\n    this.readHashFunction = descriptor;\n  }\n\n  if (!this.writeHashFunction) this.writeHashFunction = identity;\n  if (!this.readHashFunction) this.readHashFunction = identity;\n  if (typeof this.writeHashFunction !== 'function') throw new Error('mnemonist/FuzzyMap.constructor: invalid hash function given.');\n  if (typeof this.readHashFunction !== 'function') throw new Error('mnemonist/FuzzyMap.constructor: invalid hash function given.');\n}\n/**\n * Method used to clear the structure.\n *\n * @return {undefined}\n */\n\n\nFuzzyMap.prototype.clear = function () {\n  this.items.clear(); // Properties\n\n  this.size = 0;\n};\n/**\n * Method used to add an item to the FuzzyMap.\n *\n * @param  {any} item - Item to add.\n * @return {FuzzyMap}\n */\n\n\nFuzzyMap.prototype.add = function (item) {\n  var key = this.writeHashFunction(item);\n  this.items.set(key, item);\n  this.size = this.items.size;\n  return this;\n};\n/**\n * Method used to set an item in the FuzzyMap using the given key.\n *\n * @param  {any} key  - Key to use.\n * @param  {any} item - Item to add.\n * @return {FuzzyMap}\n */\n\n\nFuzzyMap.prototype.set = function (key, item) {\n  key = this.writeHashFunction(key);\n  this.items.set(key, item);\n  this.size = this.items.size;\n  return this;\n};\n/**\n * Method used to retrieve an item from the FuzzyMap.\n *\n * @param  {any} key - Key to use.\n * @return {any}\n */\n\n\nFuzzyMap.prototype.get = function (key) {\n  key = this.readHashFunction(key);\n  return this.items.get(key);\n};\n/**\n * Method used to test the existence of an item in the map.\n *\n * @param  {any} key - Key to check.\n * @return {boolean}\n */\n\n\nFuzzyMap.prototype.has = function (key) {\n  key = this.readHashFunction(key);\n  return this.items.has(key);\n};\n/**\n * Method used to iterate over each of the FuzzyMap's values.\n *\n * @param  {function}  callback - Function to call for each item.\n * @param  {object}    scope    - Optional scope.\n * @return {undefined}\n */\n\n\nFuzzyMap.prototype.forEach = function (callback, scope) {\n  scope = arguments.length > 1 ? scope : this;\n  this.items.forEach(function (value) {\n    callback.call(scope, value, value);\n  });\n};\n/**\n * Method returning an iterator over the FuzzyMap's values.\n *\n * @return {FuzzyMapIterator}\n */\n\n\nFuzzyMap.prototype.values = function () {\n  return this.items.values();\n};\n/**\n * Attaching the #.values method to Symbol.iterator if possible.\n */\n\n\nif (typeof Symbol !== 'undefined') FuzzyMap.prototype[Symbol.iterator] = FuzzyMap.prototype.values;\n/**\n * Convenience known method.\n */\n\nFuzzyMap.prototype.inspect = function () {\n  var array = Array.from(this.items.values());\n  Object.defineProperty(array, 'constructor', {\n    value: FuzzyMap,\n    enumerable: false\n  });\n  return array;\n};\n\nif (typeof Symbol !== 'undefined') FuzzyMap.prototype[Symbol.for('nodejs.util.inspect.custom')] = FuzzyMap.prototype.inspect;\n/**\n * Static @.from function taking an arbitrary iterable & converting it into\n * a structure.\n *\n * @param  {Iterable}       iterable   - Target iterable.\n * @param  {array|function} descriptor - Hash functions descriptor.\n * @param  {boolean}        useSet     - Whether to use #.set or #.add\n * @return {FuzzyMap}\n */\n\nFuzzyMap.from = function (iterable, descriptor, useSet) {\n  var map = new FuzzyMap(descriptor);\n  forEach(iterable, function (value, key) {\n    if (useSet) map.set(key, value);else map.add(value);\n  });\n  return map;\n};\n/**\n * Exporting.\n */\n\n\nmodule.exports = FuzzyMap;","map":{"version":3,"sources":["/Users/safahi/Downloads/interface-4.30.1/node_modules/mnemonist/fuzzy-map.js"],"names":["forEach","require","identity","x","FuzzyMap","descriptor","items","Map","clear","Array","isArray","writeHashFunction","readHashFunction","Error","prototype","size","add","item","key","set","get","has","callback","scope","arguments","length","value","call","values","Symbol","iterator","inspect","array","from","Object","defineProperty","enumerable","for","iterable","useSet","map","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,OAAO,GAAGC,OAAO,CAAC,qBAAD,CAArB;;AAEA,IAAIC,QAAQ,GAAG,SAAXA,QAAW,CAASC,CAAT,EAAY;AACzB,SAAOA,CAAP;AACD,CAFD;AAIA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASC,QAAT,CAAkBC,UAAlB,EAA8B;AAC5B,OAAKC,KAAL,GAAa,IAAIC,GAAJ,EAAb;AACA,OAAKC,KAAL;;AAEA,MAAIC,KAAK,CAACC,OAAN,CAAcL,UAAd,CAAJ,EAA+B;AAC7B,SAAKM,iBAAL,GAAyBN,UAAU,CAAC,CAAD,CAAnC;AACA,SAAKO,gBAAL,GAAwBP,UAAU,CAAC,CAAD,CAAlC;AACD,GAHD,MAIK;AACH,SAAKM,iBAAL,GAAyBN,UAAzB;AACA,SAAKO,gBAAL,GAAwBP,UAAxB;AACD;;AAED,MAAI,CAAC,KAAKM,iBAAV,EACE,KAAKA,iBAAL,GAAyBT,QAAzB;AACF,MAAI,CAAC,KAAKU,gBAAV,EACE,KAAKA,gBAAL,GAAwBV,QAAxB;AAEF,MAAI,OAAO,KAAKS,iBAAZ,KAAkC,UAAtC,EACE,MAAM,IAAIE,KAAJ,CAAU,8DAAV,CAAN;AAEF,MAAI,OAAO,KAAKD,gBAAZ,KAAiC,UAArC,EACE,MAAM,IAAIC,KAAJ,CAAU,8DAAV,CAAN;AACH;AAED;AACA;AACA;AACA;AACA;;;AACAT,QAAQ,CAACU,SAAT,CAAmBN,KAAnB,GAA2B,YAAW;AACpC,OAAKF,KAAL,CAAWE,KAAX,GADoC,CAGpC;;AACA,OAAKO,IAAL,GAAY,CAAZ;AACD,CALD;AAOA;AACA;AACA;AACA;AACA;AACA;;;AACAX,QAAQ,CAACU,SAAT,CAAmBE,GAAnB,GAAyB,UAASC,IAAT,EAAe;AACtC,MAAIC,GAAG,GAAG,KAAKP,iBAAL,CAAuBM,IAAvB,CAAV;AAEA,OAAKX,KAAL,CAAWa,GAAX,CAAeD,GAAf,EAAoBD,IAApB;AACA,OAAKF,IAAL,GAAY,KAAKT,KAAL,CAAWS,IAAvB;AAEA,SAAO,IAAP;AACD,CAPD;AASA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAX,QAAQ,CAACU,SAAT,CAAmBK,GAAnB,GAAyB,UAASD,GAAT,EAAcD,IAAd,EAAoB;AAC3CC,EAAAA,GAAG,GAAG,KAAKP,iBAAL,CAAuBO,GAAvB,CAAN;AAEA,OAAKZ,KAAL,CAAWa,GAAX,CAAeD,GAAf,EAAoBD,IAApB;AACA,OAAKF,IAAL,GAAY,KAAKT,KAAL,CAAWS,IAAvB;AAEA,SAAO,IAAP;AACD,CAPD;AASA;AACA;AACA;AACA;AACA;AACA;;;AACAX,QAAQ,CAACU,SAAT,CAAmBM,GAAnB,GAAyB,UAASF,GAAT,EAAc;AACrCA,EAAAA,GAAG,GAAG,KAAKN,gBAAL,CAAsBM,GAAtB,CAAN;AAEA,SAAO,KAAKZ,KAAL,CAAWc,GAAX,CAAeF,GAAf,CAAP;AACD,CAJD;AAMA;AACA;AACA;AACA;AACA;AACA;;;AACAd,QAAQ,CAACU,SAAT,CAAmBO,GAAnB,GAAyB,UAASH,GAAT,EAAc;AACrCA,EAAAA,GAAG,GAAG,KAAKN,gBAAL,CAAsBM,GAAtB,CAAN;AAEA,SAAO,KAAKZ,KAAL,CAAWe,GAAX,CAAeH,GAAf,CAAP;AACD,CAJD;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAd,QAAQ,CAACU,SAAT,CAAmBd,OAAnB,GAA6B,UAASsB,QAAT,EAAmBC,KAAnB,EAA0B;AACrDA,EAAAA,KAAK,GAAGC,SAAS,CAACC,MAAV,GAAmB,CAAnB,GAAuBF,KAAvB,GAA+B,IAAvC;AAEA,OAAKjB,KAAL,CAAWN,OAAX,CAAmB,UAAS0B,KAAT,EAAgB;AACjCJ,IAAAA,QAAQ,CAACK,IAAT,CAAcJ,KAAd,EAAqBG,KAArB,EAA4BA,KAA5B;AACD,GAFD;AAGD,CAND;AAQA;AACA;AACA;AACA;AACA;;;AACAtB,QAAQ,CAACU,SAAT,CAAmBc,MAAnB,GAA4B,YAAW;AACrC,SAAO,KAAKtB,KAAL,CAAWsB,MAAX,EAAP;AACD,CAFD;AAIA;AACA;AACA;;;AACA,IAAI,OAAOC,MAAP,KAAkB,WAAtB,EACEzB,QAAQ,CAACU,SAAT,CAAmBe,MAAM,CAACC,QAA1B,IAAsC1B,QAAQ,CAACU,SAAT,CAAmBc,MAAzD;AAEF;AACA;AACA;;AACAxB,QAAQ,CAACU,SAAT,CAAmBiB,OAAnB,GAA6B,YAAW;AACtC,MAAIC,KAAK,GAAGvB,KAAK,CAACwB,IAAN,CAAW,KAAK3B,KAAL,CAAWsB,MAAX,EAAX,CAAZ;AAEAM,EAAAA,MAAM,CAACC,cAAP,CAAsBH,KAAtB,EAA6B,aAA7B,EAA4C;AAC1CN,IAAAA,KAAK,EAAEtB,QADmC;AAE1CgC,IAAAA,UAAU,EAAE;AAF8B,GAA5C;AAKA,SAAOJ,KAAP;AACD,CATD;;AAWA,IAAI,OAAOH,MAAP,KAAkB,WAAtB,EACEzB,QAAQ,CAACU,SAAT,CAAmBe,MAAM,CAACQ,GAAP,CAAW,4BAAX,CAAnB,IAA+DjC,QAAQ,CAACU,SAAT,CAAmBiB,OAAlF;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA3B,QAAQ,CAAC6B,IAAT,GAAgB,UAASK,QAAT,EAAmBjC,UAAnB,EAA+BkC,MAA/B,EAAuC;AACrD,MAAIC,GAAG,GAAG,IAAIpC,QAAJ,CAAaC,UAAb,CAAV;AAEAL,EAAAA,OAAO,CAACsC,QAAD,EAAW,UAASZ,KAAT,EAAgBR,GAAhB,EAAqB;AACrC,QAAIqB,MAAJ,EACEC,GAAG,CAACrB,GAAJ,CAAQD,GAAR,EAAaQ,KAAb,EADF,KAGEc,GAAG,CAACxB,GAAJ,CAAQU,KAAR;AACH,GALM,CAAP;AAOA,SAAOc,GAAP;AACD,CAXD;AAaA;AACA;AACA;;;AACAC,MAAM,CAACC,OAAP,GAAiBtC,QAAjB","sourcesContent":["/**\n * Mnemonist Fuzzy Map\n * ====================\n *\n * The fuzzy map is a map whose keys are processed by a function before\n * read/write operations. This can often result in multiple keys accessing\n * the same resource (example: a map with lowercased keys).\n */\nvar forEach = require('obliterator/foreach');\n\nvar identity = function(x) {\n  return x;\n};\n\n/**\n * FuzzyMap.\n *\n * @constructor\n * @param {array|function} descriptor - Hash functions descriptor.\n */\nfunction FuzzyMap(descriptor) {\n  this.items = new Map();\n  this.clear();\n\n  if (Array.isArray(descriptor)) {\n    this.writeHashFunction = descriptor[0];\n    this.readHashFunction = descriptor[1];\n  }\n  else {\n    this.writeHashFunction = descriptor;\n    this.readHashFunction = descriptor;\n  }\n\n  if (!this.writeHashFunction)\n    this.writeHashFunction = identity;\n  if (!this.readHashFunction)\n    this.readHashFunction = identity;\n\n  if (typeof this.writeHashFunction !== 'function')\n    throw new Error('mnemonist/FuzzyMap.constructor: invalid hash function given.');\n\n  if (typeof this.readHashFunction !== 'function')\n    throw new Error('mnemonist/FuzzyMap.constructor: invalid hash function given.');\n}\n\n/**\n * Method used to clear the structure.\n *\n * @return {undefined}\n */\nFuzzyMap.prototype.clear = function() {\n  this.items.clear();\n\n  // Properties\n  this.size = 0;\n};\n\n/**\n * Method used to add an item to the FuzzyMap.\n *\n * @param  {any} item - Item to add.\n * @return {FuzzyMap}\n */\nFuzzyMap.prototype.add = function(item) {\n  var key = this.writeHashFunction(item);\n\n  this.items.set(key, item);\n  this.size = this.items.size;\n\n  return this;\n};\n\n/**\n * Method used to set an item in the FuzzyMap using the given key.\n *\n * @param  {any} key  - Key to use.\n * @param  {any} item - Item to add.\n * @return {FuzzyMap}\n */\nFuzzyMap.prototype.set = function(key, item) {\n  key = this.writeHashFunction(key);\n\n  this.items.set(key, item);\n  this.size = this.items.size;\n\n  return this;\n};\n\n/**\n * Method used to retrieve an item from the FuzzyMap.\n *\n * @param  {any} key - Key to use.\n * @return {any}\n */\nFuzzyMap.prototype.get = function(key) {\n  key = this.readHashFunction(key);\n\n  return this.items.get(key);\n};\n\n/**\n * Method used to test the existence of an item in the map.\n *\n * @param  {any} key - Key to check.\n * @return {boolean}\n */\nFuzzyMap.prototype.has = function(key) {\n  key = this.readHashFunction(key);\n\n  return this.items.has(key);\n};\n\n/**\n * Method used to iterate over each of the FuzzyMap's values.\n *\n * @param  {function}  callback - Function to call for each item.\n * @param  {object}    scope    - Optional scope.\n * @return {undefined}\n */\nFuzzyMap.prototype.forEach = function(callback, scope) {\n  scope = arguments.length > 1 ? scope : this;\n\n  this.items.forEach(function(value) {\n    callback.call(scope, value, value);\n  });\n};\n\n/**\n * Method returning an iterator over the FuzzyMap's values.\n *\n * @return {FuzzyMapIterator}\n */\nFuzzyMap.prototype.values = function() {\n  return this.items.values();\n};\n\n/**\n * Attaching the #.values method to Symbol.iterator if possible.\n */\nif (typeof Symbol !== 'undefined')\n  FuzzyMap.prototype[Symbol.iterator] = FuzzyMap.prototype.values;\n\n/**\n * Convenience known method.\n */\nFuzzyMap.prototype.inspect = function() {\n  var array = Array.from(this.items.values());\n\n  Object.defineProperty(array, 'constructor', {\n    value: FuzzyMap,\n    enumerable: false\n  });\n\n  return array;\n};\n\nif (typeof Symbol !== 'undefined')\n  FuzzyMap.prototype[Symbol.for('nodejs.util.inspect.custom')] = FuzzyMap.prototype.inspect;\n\n/**\n * Static @.from function taking an arbitrary iterable & converting it into\n * a structure.\n *\n * @param  {Iterable}       iterable   - Target iterable.\n * @param  {array|function} descriptor - Hash functions descriptor.\n * @param  {boolean}        useSet     - Whether to use #.set or #.add\n * @return {FuzzyMap}\n */\nFuzzyMap.from = function(iterable, descriptor, useSet) {\n  var map = new FuzzyMap(descriptor);\n\n  forEach(iterable, function(value, key) {\n    if (useSet)\n      map.set(key, value);\n    else\n      map.add(value);\n  });\n\n  return map;\n};\n\n/**\n * Exporting.\n */\nmodule.exports = FuzzyMap;\n"]},"metadata":{},"sourceType":"script"}