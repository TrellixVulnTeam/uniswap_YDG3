{"ast":null,"code":"import _styled from \"styled-components\";\n\nvar _jsxFileName = \"/Users/safahi/Downloads/interface-4.30.1/src/components/SearchModal/CurrencySearch.tsx\",\n    _s = $RefreshSig$();\n\nimport { Trans } from \"@lingui/react\";\nimport { i18n } from \"@lingui/core\";\nimport useDebounce from 'hooks/useDebounce';\nimport { useOnClickOutside } from 'hooks/useOnClickOutside';\nimport useTheme from 'hooks/useTheme';\nimport useToggle from 'hooks/useToggle';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { Edit } from 'react-feather';\nimport ReactGA from 'react-ga';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport { Text } from 'rebass';\nimport { useAllTokens, useIsUserAddedToken, useNativeCurrency, useSearchInactiveTokenLists, useToken } from '../../hooks/Tokens';\nimport { useActiveWeb3React } from '../../hooks/web3';\nimport { ButtonText, CloseIcon, IconWrapper, ThemedText } from '../../theme';\nimport { isAddress } from '../../utils';\nimport Column from '../Column';\nimport Row, { RowBetween, RowFixed } from '../Row';\nimport CommonBases from './CommonBases';\nimport CurrencyList from './CurrencyList';\nimport { filterTokens, useSortedTokensByQuery } from './filtering';\nimport ImportRow from './ImportRow';\nimport { useTokenComparator } from './sorting';\nimport { PaddedColumn, SearchInput, Separator } from './styleds';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ContentWrapper = _styled(Column).withConfig({\n  displayName: \"CurrencySearch__ContentWrapper\",\n  componentId: \"sc-1it7zu4-0\"\n})([\"width:100%;flex:1 1;position:relative;\"]);\n\nconst Footer = _styled.div.withConfig({\n  displayName: \"CurrencySearch__Footer\",\n  componentId: \"sc-1it7zu4-1\"\n})([\"width:100%;border-radius:20px;padding:20px;border-top-left-radius:0;border-top-right-radius:0;background-color:\", \";border-top:1px solid \", \";\"], ({\n  theme\n}) => theme.bg1, ({\n  theme\n}) => theme.bg2);\n\nexport function CurrencySearch({\n  selectedCurrency,\n  onCurrencySelect,\n  otherSelectedCurrency,\n  showCommonBases,\n  showCurrencyAmount,\n  disableNonToken,\n  onDismiss,\n  isOpen,\n  showManageView,\n  showImportView,\n  setImportToken\n}) {\n  _s();\n\n  const {\n    chainId\n  } = useActiveWeb3React();\n  const theme = useTheme(); // refs for fixed size lists\n\n  const fixedList = useRef();\n  const [searchQuery, setSearchQuery] = useState('');\n  const debouncedQuery = useDebounce(searchQuery, 200);\n  const [invertSearchOrder] = useState(false);\n  const allTokens = useAllTokens(); // if they input an address, use it\n\n  const isAddressSearch = isAddress(debouncedQuery);\n  const searchToken = useToken(debouncedQuery);\n  const searchTokenIsAdded = useIsUserAddedToken(searchToken);\n  useEffect(() => {\n    if (isAddressSearch) {\n      ReactGA.event({\n        category: 'Currency Select',\n        action: 'Search by address',\n        label: isAddressSearch\n      });\n    }\n  }, [isAddressSearch]);\n  const tokenComparator = useTokenComparator(invertSearchOrder);\n  const filteredTokens = useMemo(() => {\n    return filterTokens(Object.values(allTokens), debouncedQuery);\n  }, [allTokens, debouncedQuery]);\n  const sortedTokens = useMemo(() => {\n    return filteredTokens.sort(tokenComparator);\n  }, [filteredTokens, tokenComparator]);\n  const filteredSortedTokens = useSortedTokensByQuery(sortedTokens, debouncedQuery);\n  const native = useNativeCurrency();\n  const filteredSortedTokensWithETH = useMemo(() => {\n    var _native$symbol, _native$symbol$toLowe;\n\n    if (!native) return filteredSortedTokens;\n    const s = debouncedQuery.toLowerCase().trim();\n\n    if (((_native$symbol = native.symbol) === null || _native$symbol === void 0 ? void 0 : (_native$symbol$toLowe = _native$symbol.toLowerCase()) === null || _native$symbol$toLowe === void 0 ? void 0 : _native$symbol$toLowe.indexOf(s)) !== -1) {\n      return native ? [native, ...filteredSortedTokens] : filteredSortedTokens;\n    }\n\n    return filteredSortedTokens;\n  }, [debouncedQuery, native, filteredSortedTokens]);\n  const handleCurrencySelect = useCallback(currency => {\n    onCurrencySelect(currency);\n    onDismiss();\n  }, [onDismiss, onCurrencySelect]); // clear the input on open\n\n  useEffect(() => {\n    if (isOpen) setSearchQuery('');\n  }, [isOpen]); // manage focus on modal show\n\n  const inputRef = useRef();\n  const handleInput = useCallback(event => {\n    var _fixedList$current;\n\n    const input = event.target.value;\n    const checksummedInput = isAddress(input);\n    setSearchQuery(checksummedInput || input);\n    (_fixedList$current = fixedList.current) === null || _fixedList$current === void 0 ? void 0 : _fixedList$current.scrollTo(0);\n  }, []);\n  const handleEnter = useCallback(e => {\n    if (e.key === 'Enter') {\n      var _native$symbol2;\n\n      const s = debouncedQuery.toLowerCase().trim();\n\n      if (s === (native === null || native === void 0 ? void 0 : (_native$symbol2 = native.symbol) === null || _native$symbol2 === void 0 ? void 0 : _native$symbol2.toLowerCase())) {\n        handleCurrencySelect(native);\n      } else if (filteredSortedTokensWithETH.length > 0) {\n        var _filteredSortedTokens;\n\n        if (((_filteredSortedTokens = filteredSortedTokensWithETH[0].symbol) === null || _filteredSortedTokens === void 0 ? void 0 : _filteredSortedTokens.toLowerCase()) === debouncedQuery.trim().toLowerCase() || filteredSortedTokensWithETH.length === 1) {\n          handleCurrencySelect(filteredSortedTokensWithETH[0]);\n        }\n      }\n    }\n  }, [debouncedQuery, native, filteredSortedTokensWithETH, handleCurrencySelect]); // menu ui\n\n  const [open, toggle] = useToggle(false);\n  const node = useRef();\n  useOnClickOutside(node, open ? toggle : undefined); // if no results on main list, show option to expand into inactive\n\n  const filteredInactiveTokens = useSearchInactiveTokenLists(filteredTokens.length === 0 || debouncedQuery.length > 2 && !isAddressSearch ? debouncedQuery : undefined);\n  return /*#__PURE__*/_jsxDEV(ContentWrapper, {\n    children: [/*#__PURE__*/_jsxDEV(PaddedColumn, {\n      gap: \"16px\",\n      children: [/*#__PURE__*/_jsxDEV(RowBetween, {\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          fontWeight: 500,\n          fontSize: 16,\n          children: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Select a token\"\n          }, void 0, false, void 0, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CloseIcon, {\n          onClick: onDismiss\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(SearchInput, {\n          type: \"text\",\n          id: \"token-search-input\",\n          placeholder:\n          /*i18n*/\n          i18n._(\"Search name or paste address\"),\n          autoComplete: \"off\",\n          value: searchQuery,\n          ref: inputRef,\n          onChange: handleInput,\n          onKeyDown: handleEnter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), showCommonBases && /*#__PURE__*/_jsxDEV(CommonBases, {\n        chainId: chainId,\n        onSelect: handleCurrencySelect,\n        selectedCurrency: selectedCurrency\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Separator, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this), searchToken && !searchTokenIsAdded ? /*#__PURE__*/_jsxDEV(Column, {\n      style: {\n        padding: '20px 0',\n        height: '100%'\n      },\n      children: /*#__PURE__*/_jsxDEV(ImportRow, {\n        token: searchToken,\n        showImportView: showImportView,\n        setImportToken: setImportToken\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 9\n    }, this) : (filteredSortedTokens === null || filteredSortedTokens === void 0 ? void 0 : filteredSortedTokens.length) > 0 || (filteredInactiveTokens === null || filteredInactiveTokens === void 0 ? void 0 : filteredInactiveTokens.length) > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: '1'\n      },\n      children: /*#__PURE__*/_jsxDEV(AutoSizer, {\n        disableWidth: true,\n        children: ({\n          height\n        }) => /*#__PURE__*/_jsxDEV(CurrencyList, {\n          height: height,\n          currencies: disableNonToken ? filteredSortedTokens : filteredSortedTokensWithETH,\n          otherListTokens: filteredInactiveTokens,\n          onCurrencySelect: handleCurrencySelect,\n          otherCurrency: otherSelectedCurrency,\n          selectedCurrency: selectedCurrency,\n          fixedListRef: fixedList,\n          showImportView: showImportView,\n          setImportToken: setImportToken,\n          showCurrencyAmount: showCurrencyAmount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Column, {\n      style: {\n        padding: '20px',\n        height: '100%'\n      },\n      children: /*#__PURE__*/_jsxDEV(ThemedText.Main, {\n        color: theme.text3,\n        textAlign: \"center\",\n        mb: \"20px\",\n        children: /*#__PURE__*/_jsxDEV(Trans, {\n          id: \"No results found.\"\n        }, void 0, false, void 0, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        justify: \"center\",\n        children: /*#__PURE__*/_jsxDEV(ButtonText, {\n          onClick: showManageView,\n          color: theme.primary1,\n          className: \"list-token-manage-button\",\n          children: /*#__PURE__*/_jsxDEV(RowFixed, {\n            children: [/*#__PURE__*/_jsxDEV(IconWrapper, {\n              size: \"16px\",\n              marginRight: \"6px\",\n              stroke: theme.primaryText1,\n              children: /*#__PURE__*/_jsxDEV(Edit, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ThemedText.Main, {\n              color: theme.primaryText1,\n              children: /*#__PURE__*/_jsxDEV(Trans, {\n                id: \"Manage Token Lists\"\n              }, void 0, false, void 0, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 184,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CurrencySearch, \"WiR8S5NbLwjZ3I0Rf3759stgGJU=\", false, function () {\n  return [useActiveWeb3React, useTheme, useDebounce, useAllTokens, useToken, useIsUserAddedToken, useTokenComparator, useSortedTokensByQuery, useNativeCurrency, useToggle, useOnClickOutside, useSearchInactiveTokenLists];\n});\n\n_c = CurrencySearch;\n\nvar _c;\n\n$RefreshReg$(_c, \"CurrencySearch\");","map":{"version":3,"sources":["/Users/safahi/Downloads/interface-4.30.1/src/components/SearchModal/CurrencySearch.tsx"],"names":["useDebounce","useOnClickOutside","useTheme","useToggle","useCallback","useEffect","useMemo","useRef","useState","Edit","ReactGA","AutoSizer","Text","useAllTokens","useIsUserAddedToken","useNativeCurrency","useSearchInactiveTokenLists","useToken","useActiveWeb3React","ButtonText","CloseIcon","IconWrapper","ThemedText","isAddress","Column","Row","RowBetween","RowFixed","CommonBases","CurrencyList","filterTokens","useSortedTokensByQuery","ImportRow","useTokenComparator","PaddedColumn","SearchInput","Separator","ContentWrapper","styled","Footer","div","theme","bg1","bg2","CurrencySearch","selectedCurrency","onCurrencySelect","otherSelectedCurrency","showCommonBases","showCurrencyAmount","disableNonToken","onDismiss","isOpen","showManageView","showImportView","setImportToken","chainId","fixedList","searchQuery","setSearchQuery","debouncedQuery","invertSearchOrder","allTokens","isAddressSearch","searchToken","searchTokenIsAdded","event","category","action","label","tokenComparator","filteredTokens","Object","values","sortedTokens","sort","filteredSortedTokens","native","filteredSortedTokensWithETH","s","toLowerCase","trim","symbol","indexOf","handleCurrencySelect","currency","inputRef","handleInput","input","target","value","checksummedInput","current","scrollTo","handleEnter","e","key","length","open","toggle","node","undefined","filteredInactiveTokens","padding","height","flex","text3","primary1","primaryText1"],"mappings":"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","sourcesContent":["// eslint-disable-next-line no-restricted-imports\nimport { t, Trans } from '@lingui/macro'\nimport { Currency, Token } from '@uniswap/sdk-core'\nimport useDebounce from 'hooks/useDebounce'\nimport { useOnClickOutside } from 'hooks/useOnClickOutside'\nimport useTheme from 'hooks/useTheme'\nimport useToggle from 'hooks/useToggle'\nimport { KeyboardEvent, RefObject, useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport { Edit } from 'react-feather'\nimport ReactGA from 'react-ga'\nimport AutoSizer from 'react-virtualized-auto-sizer'\nimport { FixedSizeList } from 'react-window'\nimport { Text } from 'rebass'\nimport styled from 'styled-components/macro'\n\nimport {\n  useAllTokens,\n  useIsUserAddedToken,\n  useNativeCurrency,\n  useSearchInactiveTokenLists,\n  useToken,\n} from '../../hooks/Tokens'\nimport { useActiveWeb3React } from '../../hooks/web3'\nimport { ButtonText, CloseIcon, IconWrapper, ThemedText } from '../../theme'\nimport { isAddress } from '../../utils'\nimport Column from '../Column'\nimport Row, { RowBetween, RowFixed } from '../Row'\nimport CommonBases from './CommonBases'\nimport CurrencyList from './CurrencyList'\nimport { filterTokens, useSortedTokensByQuery } from './filtering'\nimport ImportRow from './ImportRow'\nimport { useTokenComparator } from './sorting'\nimport { PaddedColumn, SearchInput, Separator } from './styleds'\n\nconst ContentWrapper = styled(Column)`\n  width: 100%;\n  flex: 1 1;\n  position: relative;\n`\n\nconst Footer = styled.div`\n  width: 100%;\n  border-radius: 20px;\n  padding: 20px;\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  background-color: ${({ theme }) => theme.bg1};\n  border-top: 1px solid ${({ theme }) => theme.bg2};\n`\n\ninterface CurrencySearchProps {\n  isOpen: boolean\n  onDismiss: () => void\n  selectedCurrency?: Currency | null\n  onCurrencySelect: (currency: Currency) => void\n  otherSelectedCurrency?: Currency | null\n  showCommonBases?: boolean\n  showCurrencyAmount?: boolean\n  disableNonToken?: boolean\n  showManageView: () => void\n  showImportView: () => void\n  setImportToken: (token: Token) => void\n}\n\nexport function CurrencySearch({\n  selectedCurrency,\n  onCurrencySelect,\n  otherSelectedCurrency,\n  showCommonBases,\n  showCurrencyAmount,\n  disableNonToken,\n  onDismiss,\n  isOpen,\n  showManageView,\n  showImportView,\n  setImportToken,\n}: CurrencySearchProps) {\n  const { chainId } = useActiveWeb3React()\n  const theme = useTheme()\n\n  // refs for fixed size lists\n  const fixedList = useRef<FixedSizeList>()\n\n  const [searchQuery, setSearchQuery] = useState<string>('')\n  const debouncedQuery = useDebounce(searchQuery, 200)\n\n  const [invertSearchOrder] = useState<boolean>(false)\n\n  const allTokens = useAllTokens()\n\n  // if they input an address, use it\n  const isAddressSearch = isAddress(debouncedQuery)\n\n  const searchToken = useToken(debouncedQuery)\n\n  const searchTokenIsAdded = useIsUserAddedToken(searchToken)\n\n  useEffect(() => {\n    if (isAddressSearch) {\n      ReactGA.event({\n        category: 'Currency Select',\n        action: 'Search by address',\n        label: isAddressSearch,\n      })\n    }\n  }, [isAddressSearch])\n\n  const tokenComparator = useTokenComparator(invertSearchOrder)\n\n  const filteredTokens: Token[] = useMemo(() => {\n    return filterTokens(Object.values(allTokens), debouncedQuery)\n  }, [allTokens, debouncedQuery])\n\n  const sortedTokens: Token[] = useMemo(() => {\n    return filteredTokens.sort(tokenComparator)\n  }, [filteredTokens, tokenComparator])\n\n  const filteredSortedTokens = useSortedTokensByQuery(sortedTokens, debouncedQuery)\n\n  const native = useNativeCurrency()\n\n  const filteredSortedTokensWithETH: Currency[] = useMemo(() => {\n    if (!native) return filteredSortedTokens\n\n    const s = debouncedQuery.toLowerCase().trim()\n    if (native.symbol?.toLowerCase()?.indexOf(s) !== -1) {\n      return native ? [native, ...filteredSortedTokens] : filteredSortedTokens\n    }\n    return filteredSortedTokens\n  }, [debouncedQuery, native, filteredSortedTokens])\n\n  const handleCurrencySelect = useCallback(\n    (currency: Currency) => {\n      onCurrencySelect(currency)\n      onDismiss()\n    },\n    [onDismiss, onCurrencySelect]\n  )\n\n  // clear the input on open\n  useEffect(() => {\n    if (isOpen) setSearchQuery('')\n  }, [isOpen])\n\n  // manage focus on modal show\n  const inputRef = useRef<HTMLInputElement>()\n  const handleInput = useCallback((event) => {\n    const input = event.target.value\n    const checksummedInput = isAddress(input)\n    setSearchQuery(checksummedInput || input)\n    fixedList.current?.scrollTo(0)\n  }, [])\n\n  const handleEnter = useCallback(\n    (e: KeyboardEvent<HTMLInputElement>) => {\n      if (e.key === 'Enter') {\n        const s = debouncedQuery.toLowerCase().trim()\n        if (s === native?.symbol?.toLowerCase()) {\n          handleCurrencySelect(native)\n        } else if (filteredSortedTokensWithETH.length > 0) {\n          if (\n            filteredSortedTokensWithETH[0].symbol?.toLowerCase() === debouncedQuery.trim().toLowerCase() ||\n            filteredSortedTokensWithETH.length === 1\n          ) {\n            handleCurrencySelect(filteredSortedTokensWithETH[0])\n          }\n        }\n      }\n    },\n    [debouncedQuery, native, filteredSortedTokensWithETH, handleCurrencySelect]\n  )\n\n  // menu ui\n  const [open, toggle] = useToggle(false)\n  const node = useRef<HTMLDivElement>()\n  useOnClickOutside(node, open ? toggle : undefined)\n\n  // if no results on main list, show option to expand into inactive\n  const filteredInactiveTokens = useSearchInactiveTokenLists(\n    filteredTokens.length === 0 || (debouncedQuery.length > 2 && !isAddressSearch) ? debouncedQuery : undefined\n  )\n\n  return (\n    <ContentWrapper>\n      <PaddedColumn gap=\"16px\">\n        <RowBetween>\n          <Text fontWeight={500} fontSize={16}>\n            <Trans>Select a token</Trans>\n          </Text>\n          <CloseIcon onClick={onDismiss} />\n        </RowBetween>\n        <Row>\n          <SearchInput\n            type=\"text\"\n            id=\"token-search-input\"\n            placeholder={t`Search name or paste address`}\n            autoComplete=\"off\"\n            value={searchQuery}\n            ref={inputRef as RefObject<HTMLInputElement>}\n            onChange={handleInput}\n            onKeyDown={handleEnter}\n          />\n        </Row>\n        {showCommonBases && (\n          <CommonBases chainId={chainId} onSelect={handleCurrencySelect} selectedCurrency={selectedCurrency} />\n        )}\n      </PaddedColumn>\n      <Separator />\n      {searchToken && !searchTokenIsAdded ? (\n        <Column style={{ padding: '20px 0', height: '100%' }}>\n          <ImportRow token={searchToken} showImportView={showImportView} setImportToken={setImportToken} />\n        </Column>\n      ) : filteredSortedTokens?.length > 0 || filteredInactiveTokens?.length > 0 ? (\n        <div style={{ flex: '1' }}>\n          <AutoSizer disableWidth>\n            {({ height }) => (\n              <CurrencyList\n                height={height}\n                currencies={disableNonToken ? filteredSortedTokens : filteredSortedTokensWithETH}\n                otherListTokens={filteredInactiveTokens}\n                onCurrencySelect={handleCurrencySelect}\n                otherCurrency={otherSelectedCurrency}\n                selectedCurrency={selectedCurrency}\n                fixedListRef={fixedList}\n                showImportView={showImportView}\n                setImportToken={setImportToken}\n                showCurrencyAmount={showCurrencyAmount}\n              />\n            )}\n          </AutoSizer>\n        </div>\n      ) : (\n        <Column style={{ padding: '20px', height: '100%' }}>\n          <ThemedText.Main color={theme.text3} textAlign=\"center\" mb=\"20px\">\n            <Trans>No results found.</Trans>\n          </ThemedText.Main>\n        </Column>\n      )}\n      <Footer>\n        <Row justify=\"center\">\n          <ButtonText onClick={showManageView} color={theme.primary1} className=\"list-token-manage-button\">\n            <RowFixed>\n              <IconWrapper size=\"16px\" marginRight=\"6px\" stroke={theme.primaryText1}>\n                <Edit />\n              </IconWrapper>\n              <ThemedText.Main color={theme.primaryText1}>\n                <Trans>Manage Token Lists</Trans>\n              </ThemedText.Main>\n            </RowFixed>\n          </ButtonText>\n        </Row>\n      </Footer>\n    </ContentWrapper>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}