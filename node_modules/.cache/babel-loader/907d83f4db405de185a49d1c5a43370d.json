{"ast":null,"code":"import _regeneratorRuntime from\"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/safahi/Downloads/interface-4.30.1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{ThemeContext as _ThemeContext}from\"styled-components\";import _styled from\"styled-components\";import{Trans}from\"@lingui/react\";import{Trade as V2Trade}from'@uniswap/v2-sdk';import{Trade as V3Trade}from'@uniswap/v3-sdk';import{NetworkAlert}from'components/NetworkAlert/NetworkAlert';import SwapDetailsDropdown from'components/swap/SwapDetailsDropdown';import UnsupportedCurrencyFooter from'components/swap/UnsupportedCurrencyFooter';import{MouseoverTooltip}from'components/Tooltip';import JSBI from'jsbi';import{useCallback,useContext,useEffect,useMemo,useState}from'react';import{ArrowDown,CheckCircle,HelpCircle}from'react-feather';import ReactGA from'react-ga';import{Text}from'rebass';import{TradeState}from'state/routing/types';import AddressInputPanel from'../../components/AddressInputPanel';import{ButtonConfirmed,ButtonError,ButtonLight,ButtonPrimary}from'../../components/Button';import{GreyCard}from'../../components/Card';import{AutoColumn}from'../../components/Column';import CurrencyInputPanel from'../../components/CurrencyInputPanel';import CurrencyLogo from'../../components/CurrencyLogo';import Loader from'../../components/Loader';import{AutoRow}from'../../components/Row';import confirmPriceImpactWithoutFee from'../../components/swap/confirmPriceImpactWithoutFee';import ConfirmSwapModal from'../../components/swap/ConfirmSwapModal';import{ArrowWrapper,SwapCallbackError,Wrapper}from'../../components/swap/styleds';import SwapHeader from'../../components/swap/SwapHeader';import{SwitchLocaleLink}from'../../components/SwitchLocaleLink';import TokenWarningModal from'../../components/TokenWarningModal';import{useAllTokens,useCurrency}from'../../hooks/Tokens';import{ApprovalState,useApprovalOptimizedTrade,useApproveCallbackFromTrade}from'../../hooks/useApproveCallback';import useENSAddress from'../../hooks/useENSAddress';import{useERC20PermitFromTrade,UseERC20PermitState}from'../../hooks/useERC20Permit';import useIsArgentWallet from'../../hooks/useIsArgentWallet';import{useIsSwapUnsupported}from'../../hooks/useIsSwapUnsupported';import{useSwapCallback}from'../../hooks/useSwapCallback';import{useUSDCValue}from'../../hooks/useUSDCPrice';import useWrapCallback,{WrapErrorText,WrapType}from'../../hooks/useWrapCallback';import{useActiveWeb3React}from'../../hooks/web3';import{useWalletModalToggle}from'../../state/application/hooks';import{Field}from'../../state/swap/actions';import{useDefaultsFromURLSearch,useDerivedSwapInfo,useSwapActionHandlers,useSwapState}from'../../state/swap/hooks';import{useExpertModeManager}from'../../state/user/hooks';import{LinkStyledButton,ThemedText}from'../../theme';import{computeFiatValuePriceImpact}from'../../utils/computeFiatValuePriceImpact';import{maxAmountSpend}from'../../utils/maxAmountSpend';import{warningSeverity}from'../../utils/prices';import AppBody from'../AppBody';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AlertWrapper=_styled.div.withConfig({componentId:\"sc-1es900k-0\"})([\"max-width:460px;width:100%;\"]);export default function Swap(_ref){var _parsedAmounts$indepe3,_approvalOptimizedTra2,_parsedAmounts$Field$,_approvalOptimizedTra7,_approvalOptimizedTra8,_approvalOptimizedTra9,_approvalOptimizedTra10,_currencies$Field$INP,_currencies$Field$INP2,_currencies$Field$INP3;var history=_ref.history;var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account;var loadedUrlParams=useDefaultsFromURLSearch();// token warning stuff\nvar _ref2=[useCurrency(loadedUrlParams===null||loadedUrlParams===void 0?void 0:loadedUrlParams.inputCurrencyId),useCurrency(loadedUrlParams===null||loadedUrlParams===void 0?void 0:loadedUrlParams.outputCurrencyId)],loadedInputCurrency=_ref2[0],loadedOutputCurrency=_ref2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),dismissTokenWarning=_useState2[0],setDismissTokenWarning=_useState2[1];var urlLoadedTokens=useMemo(function(){var _filter,_ref3;return(_filter=(_ref3=[loadedInputCurrency,loadedOutputCurrency])===null||_ref3===void 0?void 0:_ref3.filter(function(c){var _c$isToken;return(_c$isToken=c===null||c===void 0?void 0:c.isToken)!==null&&_c$isToken!==void 0?_c$isToken:false;}))!==null&&_filter!==void 0?_filter:[];},[loadedInputCurrency,loadedOutputCurrency]);var handleConfirmTokenWarning=useCallback(function(){setDismissTokenWarning(true);},[]);// dismiss warning if all imported tokens are in active lists\nvar defaultTokens=useAllTokens();var importTokensNotInDefault=useMemo(function(){return urlLoadedTokens&&urlLoadedTokens.filter(function(token){return!Boolean(token.address in defaultTokens);});},[defaultTokens,urlLoadedTokens]);var theme=useContext(_ThemeContext);// toggle wallet when disconnected\nvar toggleWalletModal=useWalletModalToggle();// for expert mode\nvar _useExpertModeManager=useExpertModeManager(),_useExpertModeManager2=_slicedToArray(_useExpertModeManager,1),isExpertMode=_useExpertModeManager2[0];// swap state\nvar _useSwapState=useSwapState(),independentField=_useSwapState.independentField,typedValue=_useSwapState.typedValue,recipient=_useSwapState.recipient;var _useDerivedSwapInfo=useDerivedSwapInfo(),_useDerivedSwapInfo$t=_useDerivedSwapInfo.trade,tradeState=_useDerivedSwapInfo$t.state,trade=_useDerivedSwapInfo$t.trade,allowedSlippage=_useDerivedSwapInfo.allowedSlippage,currencyBalances=_useDerivedSwapInfo.currencyBalances,parsedAmount=_useDerivedSwapInfo.parsedAmount,currencies=_useDerivedSwapInfo.currencies,swapInputError=_useDerivedSwapInfo.inputError;var _useWrapCallback=useWrapCallback(currencies[Field.INPUT],currencies[Field.OUTPUT],typedValue),wrapType=_useWrapCallback.wrapType,onWrap=_useWrapCallback.execute,wrapInputError=_useWrapCallback.inputError;var showWrap=wrapType!==WrapType.NOT_APPLICABLE;var _useENSAddress=useENSAddress(recipient),recipientAddress=_useENSAddress.address;var parsedAmounts=useMemo(function(){var _ref4,_ref5;return showWrap?(_ref4={},_defineProperty(_ref4,Field.INPUT,parsedAmount),_defineProperty(_ref4,Field.OUTPUT,parsedAmount),_ref4):(_ref5={},_defineProperty(_ref5,Field.INPUT,independentField===Field.INPUT?parsedAmount:trade===null||trade===void 0?void 0:trade.inputAmount),_defineProperty(_ref5,Field.OUTPUT,independentField===Field.OUTPUT?parsedAmount:trade===null||trade===void 0?void 0:trade.outputAmount),_ref5);},[independentField,parsedAmount,showWrap,trade]);var _useMemo=useMemo(function(){return[!(trade===null||trade===void 0?void 0:trade.swaps),TradeState.LOADING===tradeState,TradeState.SYNCING===tradeState];},[trade,tradeState]),_useMemo2=_slicedToArray(_useMemo,3),routeNotFound=_useMemo2[0],routeIsLoading=_useMemo2[1],routeIsSyncing=_useMemo2[2];var fiatValueInput=useUSDCValue(parsedAmounts[Field.INPUT]);var fiatValueOutput=useUSDCValue(parsedAmounts[Field.OUTPUT]);var priceImpact=routeIsSyncing?undefined:computeFiatValuePriceImpact(fiatValueInput,fiatValueOutput);var _useSwapActionHandler=useSwapActionHandlers(),onSwitchTokens=_useSwapActionHandler.onSwitchTokens,onCurrencySelection=_useSwapActionHandler.onCurrencySelection,onUserInput=_useSwapActionHandler.onUserInput,onChangeRecipient=_useSwapActionHandler.onChangeRecipient;var isValid=!swapInputError;var dependentField=independentField===Field.INPUT?Field.OUTPUT:Field.INPUT;var handleTypeInput=useCallback(function(value){onUserInput(Field.INPUT,value);},[onUserInput]);var handleTypeOutput=useCallback(function(value){onUserInput(Field.OUTPUT,value);},[onUserInput]);// reset if they close warning without tokens in params\nvar handleDismissTokenWarning=useCallback(function(){setDismissTokenWarning(true);history.push('/swap/');},[history]);// modal and loading\nvar _useState3=useState({showConfirm:false,tradeToConfirm:undefined,attemptingTxn:false,swapErrorMessage:undefined,txHash:undefined}),_useState4=_slicedToArray(_useState3,2),_useState4$=_useState4[0],showConfirm=_useState4$.showConfirm,tradeToConfirm=_useState4$.tradeToConfirm,swapErrorMessage=_useState4$.swapErrorMessage,attemptingTxn=_useState4$.attemptingTxn,txHash=_useState4$.txHash,setSwapState=_useState4[1];var formattedAmounts=useMemo(function(){var _parsedAmounts$indepe,_parsedAmounts$indepe2,_parsedAmounts$depend,_parsedAmounts$depend2,_ref6;return _ref6={},_defineProperty(_ref6,independentField,typedValue),_defineProperty(_ref6,dependentField,showWrap?(_parsedAmounts$indepe=(_parsedAmounts$indepe2=parsedAmounts[independentField])===null||_parsedAmounts$indepe2===void 0?void 0:_parsedAmounts$indepe2.toExact())!==null&&_parsedAmounts$indepe!==void 0?_parsedAmounts$indepe:'':(_parsedAmounts$depend=(_parsedAmounts$depend2=parsedAmounts[dependentField])===null||_parsedAmounts$depend2===void 0?void 0:_parsedAmounts$depend2.toSignificant(6))!==null&&_parsedAmounts$depend!==void 0?_parsedAmounts$depend:''),_ref6;},[dependentField,independentField,parsedAmounts,showWrap,typedValue]);var userHasSpecifiedInputOutput=Boolean(currencies[Field.INPUT]&&currencies[Field.OUTPUT]&&((_parsedAmounts$indepe3=parsedAmounts[independentField])===null||_parsedAmounts$indepe3===void 0?void 0:_parsedAmounts$indepe3.greaterThan(JSBI.BigInt(0))));var approvalOptimizedTrade=useApprovalOptimizedTrade(trade,allowedSlippage);var approvalOptimizedTradeString=approvalOptimizedTrade instanceof V2Trade?'V2SwapRouter':approvalOptimizedTrade instanceof V3Trade?'V3SwapRouter':'SwapRouter';// check whether the user has approved the router on the input token\nvar _useApproveCallbackFr=useApproveCallbackFromTrade(approvalOptimizedTrade,allowedSlippage),_useApproveCallbackFr2=_slicedToArray(_useApproveCallbackFr,2),approvalState=_useApproveCallbackFr2[0],approveCallback=_useApproveCallbackFr2[1];var _useERC20PermitFromTr=useERC20PermitFromTrade(approvalOptimizedTrade,allowedSlippage),signatureState=_useERC20PermitFromTr.state,signatureData=_useERC20PermitFromTr.signatureData,gatherPermitSignature=_useERC20PermitFromTr.gatherPermitSignature;var handleApprove=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _approvalOptimizedTra;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(signatureState===UseERC20PermitState.NOT_SIGNED&&gatherPermitSignature)){_context.next=13;break;}_context.prev=1;_context.next=4;return gatherPermitSignature();case 4:_context.next=11;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](1);if(!((_context.t0===null||_context.t0===void 0?void 0:_context.t0.code)!==4001)){_context.next=11;break;}_context.next=11;return approveCallback();case 11:_context.next=16;break;case 13:_context.next=15;return approveCallback();case 15:ReactGA.event({category:'Swap',action:'Approve',label:[approvalOptimizedTradeString,approvalOptimizedTrade===null||approvalOptimizedTrade===void 0?void 0:(_approvalOptimizedTra=approvalOptimizedTrade.inputAmount)===null||_approvalOptimizedTra===void 0?void 0:_approvalOptimizedTra.currency.symbol].join('/')});case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,6]]);})),[signatureState,gatherPermitSignature,approveCallback,approvalOptimizedTradeString,approvalOptimizedTrade===null||approvalOptimizedTrade===void 0?void 0:(_approvalOptimizedTra2=approvalOptimizedTrade.inputAmount)===null||_approvalOptimizedTra2===void 0?void 0:_approvalOptimizedTra2.currency.symbol]);// check if user has gone through approval process, used to show two step buttons, reset on token change\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),approvalSubmitted=_useState6[0],setApprovalSubmitted=_useState6[1];// mark when a user has submitted an approval, reset onTokenSelection for input field\nuseEffect(function(){if(approvalState===ApprovalState.PENDING){setApprovalSubmitted(true);}},[approvalState,approvalSubmitted]);var maxInputAmount=useMemo(function(){return maxAmountSpend(currencyBalances[Field.INPUT]);},[currencyBalances]);var showMaxButton=Boolean((maxInputAmount===null||maxInputAmount===void 0?void 0:maxInputAmount.greaterThan(0))&&!((_parsedAmounts$Field$=parsedAmounts[Field.INPUT])===null||_parsedAmounts$Field$===void 0?void 0:_parsedAmounts$Field$.equalTo(maxInputAmount)));// the callback to execute the swap\nvar _useSwapCallback=useSwapCallback(approvalOptimizedTrade,allowedSlippage,recipient,signatureData),swapCallback=_useSwapCallback.callback,swapCallbackError=_useSwapCallback.error;var handleSwap=useCallback(function(){if(!swapCallback){return;}if(priceImpact&&!confirmPriceImpactWithoutFee(priceImpact)){return;}setSwapState({attemptingTxn:true,tradeToConfirm:tradeToConfirm,showConfirm:showConfirm,swapErrorMessage:undefined,txHash:undefined});swapCallback().then(function(hash){var _approvalOptimizedTra3,_approvalOptimizedTra4,_approvalOptimizedTra5,_approvalOptimizedTra6;setSwapState({attemptingTxn:false,tradeToConfirm:tradeToConfirm,showConfirm:showConfirm,swapErrorMessage:undefined,txHash:hash});ReactGA.event({category:'Swap',action:recipient===null?'Swap w/o Send':(recipientAddress!==null&&recipientAddress!==void 0?recipientAddress:recipient)===account?'Swap w/o Send + recipient':'Swap w/ Send',label:[approvalOptimizedTradeString,approvalOptimizedTrade===null||approvalOptimizedTrade===void 0?void 0:(_approvalOptimizedTra3=approvalOptimizedTrade.inputAmount)===null||_approvalOptimizedTra3===void 0?void 0:(_approvalOptimizedTra4=_approvalOptimizedTra3.currency)===null||_approvalOptimizedTra4===void 0?void 0:_approvalOptimizedTra4.symbol,approvalOptimizedTrade===null||approvalOptimizedTrade===void 0?void 0:(_approvalOptimizedTra5=approvalOptimizedTrade.outputAmount)===null||_approvalOptimizedTra5===void 0?void 0:(_approvalOptimizedTra6=_approvalOptimizedTra5.currency)===null||_approvalOptimizedTra6===void 0?void 0:_approvalOptimizedTra6.symbol,'MH'].join('/')});}).catch(function(error){setSwapState({attemptingTxn:false,tradeToConfirm:tradeToConfirm,showConfirm:showConfirm,swapErrorMessage:error.message,txHash:undefined});});},[swapCallback,priceImpact,tradeToConfirm,showConfirm,recipient,recipientAddress,account,approvalOptimizedTradeString,approvalOptimizedTrade===null||approvalOptimizedTrade===void 0?void 0:(_approvalOptimizedTra7=approvalOptimizedTrade.inputAmount)===null||_approvalOptimizedTra7===void 0?void 0:(_approvalOptimizedTra8=_approvalOptimizedTra7.currency)===null||_approvalOptimizedTra8===void 0?void 0:_approvalOptimizedTra8.symbol,approvalOptimizedTrade===null||approvalOptimizedTrade===void 0?void 0:(_approvalOptimizedTra9=approvalOptimizedTrade.outputAmount)===null||_approvalOptimizedTra9===void 0?void 0:(_approvalOptimizedTra10=_approvalOptimizedTra9.currency)===null||_approvalOptimizedTra10===void 0?void 0:_approvalOptimizedTra10.symbol]);// errors\nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showInverted=_useState8[0],setShowInverted=_useState8[1];// warnings on the greater of fiat value price impact and execution price impact\nvar priceImpactSeverity=useMemo(function(){var executionPriceImpact=trade===null||trade===void 0?void 0:trade.priceImpact;return warningSeverity(executionPriceImpact&&priceImpact?executionPriceImpact.greaterThan(priceImpact)?executionPriceImpact:priceImpact:executionPriceImpact!==null&&executionPriceImpact!==void 0?executionPriceImpact:priceImpact);},[priceImpact,trade]);var isArgentWallet=useIsArgentWallet();// show approve flow when: no error on inputs, not approved or pending, or approved in current session\n// never show if price impact is above threshold in non expert mode\nvar showApproveFlow=!isArgentWallet&&!swapInputError&&(approvalState===ApprovalState.NOT_APPROVED||approvalState===ApprovalState.PENDING||approvalSubmitted&&approvalState===ApprovalState.APPROVED)&&!(priceImpactSeverity>3&&!isExpertMode);var handleConfirmDismiss=useCallback(function(){setSwapState({showConfirm:false,tradeToConfirm:tradeToConfirm,attemptingTxn:attemptingTxn,swapErrorMessage:swapErrorMessage,txHash:txHash});// if there was a tx hash, we want to clear the input\nif(txHash){onUserInput(Field.INPUT,'');}},[attemptingTxn,onUserInput,swapErrorMessage,tradeToConfirm,txHash]);var handleAcceptChanges=useCallback(function(){setSwapState({tradeToConfirm:trade,swapErrorMessage:swapErrorMessage,txHash:txHash,attemptingTxn:attemptingTxn,showConfirm:showConfirm});},[attemptingTxn,showConfirm,swapErrorMessage,trade,txHash]);var handleInputSelect=useCallback(function(inputCurrency){setApprovalSubmitted(false);// reset 2 step UI for approvals\nonCurrencySelection(Field.INPUT,inputCurrency);},[onCurrencySelection]);var handleMaxInput=useCallback(function(){maxInputAmount&&onUserInput(Field.INPUT,maxInputAmount.toExact());ReactGA.event({category:'Swap',action:'Max'});},[maxInputAmount,onUserInput]);var handleOutputSelect=useCallback(function(outputCurrency){return onCurrencySelection(Field.OUTPUT,outputCurrency);},[onCurrencySelection]);var swapIsUnsupported=useIsSwapUnsupported(currencies[Field.INPUT],currencies[Field.OUTPUT]);var priceImpactTooHigh=priceImpactSeverity>3&&!isExpertMode;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TokenWarningModal,{isOpen:importTokensNotInDefault.length>0&&!dismissTokenWarning,tokens:importTokensNotInDefault,onConfirm:handleConfirmTokenWarning,onDismiss:handleDismissTokenWarning}),/*#__PURE__*/_jsxs(AppBody,{children:[/*#__PURE__*/_jsx(SwapHeader,{allowedSlippage:allowedSlippage}),/*#__PURE__*/_jsxs(Wrapper,{id:\"swap-page\",children:[/*#__PURE__*/_jsx(ConfirmSwapModal,{isOpen:showConfirm,trade:trade,originalTrade:tradeToConfirm,onAcceptChanges:handleAcceptChanges,attemptingTxn:attemptingTxn,txHash:txHash,recipient:recipient,allowedSlippage:allowedSlippage,onConfirm:handleSwap,swapErrorMessage:swapErrorMessage,onDismiss:handleConfirmDismiss}),/*#__PURE__*/_jsxs(AutoColumn,{gap:'sm',children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'relative'},children:[/*#__PURE__*/_jsx(CurrencyInputPanel,{label:independentField===Field.OUTPUT&&!showWrap?/*#__PURE__*/_jsx(Trans,{id:\"From (at most)\"}):/*#__PURE__*/_jsx(Trans,{id:\"From\"}),value:formattedAmounts[Field.INPUT],showMaxButton:showMaxButton,currency:currencies[Field.INPUT],onUserInput:handleTypeInput,onMax:handleMaxInput,fiatValue:fiatValueInput!==null&&fiatValueInput!==void 0?fiatValueInput:undefined,onCurrencySelect:handleInputSelect,otherCurrency:currencies[Field.OUTPUT],showCommonBases:true,id:\"swap-currency-input\",loading:independentField===Field.OUTPUT&&routeIsSyncing}),/*#__PURE__*/_jsx(ArrowWrapper,{clickable:true,children:/*#__PURE__*/_jsx(ArrowDown,{size:\"16\",onClick:function onClick(){setApprovalSubmitted(false);// reset 2 step UI for approvals\nonSwitchTokens();},color:currencies[Field.INPUT]&&currencies[Field.OUTPUT]?theme.text1:theme.text3})}),/*#__PURE__*/_jsx(CurrencyInputPanel,{value:formattedAmounts[Field.OUTPUT],onUserInput:handleTypeOutput,label:independentField===Field.INPUT&&!showWrap?/*#__PURE__*/_jsx(Trans,{id:\"To (at least)\"}):/*#__PURE__*/_jsx(Trans,{id:\"To\"}),showMaxButton:false,hideBalance:false,fiatValue:fiatValueOutput!==null&&fiatValueOutput!==void 0?fiatValueOutput:undefined,priceImpact:priceImpact,currency:currencies[Field.OUTPUT],onCurrencySelect:handleOutputSelect,otherCurrency:currencies[Field.INPUT],showCommonBases:true,id:\"swap-currency-output\",loading:independentField===Field.INPUT&&routeIsSyncing})]}),recipient!==null&&!showWrap?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(AutoRow,{justify:\"space-between\",style:{padding:'0 1rem'},children:[/*#__PURE__*/_jsx(ArrowWrapper,{clickable:false,children:/*#__PURE__*/_jsx(ArrowDown,{size:\"16\",color:theme.text2})}),/*#__PURE__*/_jsx(LinkStyledButton,{id:\"remove-recipient-button\",onClick:function onClick(){return onChangeRecipient(null);},children:/*#__PURE__*/_jsx(Trans,{id:\"- Remove recipient\"})})]}),/*#__PURE__*/_jsx(AddressInputPanel,{id:\"recipient\",value:recipient,onChange:onChangeRecipient})]}):null,!showWrap&&userHasSpecifiedInputOutput&&(trade||routeIsLoading||routeIsSyncing)&&/*#__PURE__*/_jsx(SwapDetailsDropdown,{trade:trade,syncing:routeIsSyncing,loading:routeIsLoading,showInverted:showInverted,setShowInverted:setShowInverted,allowedSlippage:allowedSlippage}),/*#__PURE__*/_jsxs(\"div\",{children:[swapIsUnsupported?/*#__PURE__*/_jsx(ButtonPrimary,{disabled:true,children:/*#__PURE__*/_jsx(ThemedText.Main,{mb:\"4px\",children:/*#__PURE__*/_jsx(Trans,{id:\"Unsupported Asset\"})})}):!account?/*#__PURE__*/_jsx(ButtonLight,{onClick:toggleWalletModal,children:/*#__PURE__*/_jsx(Trans,{id:\"Connect Wallet\"})}):showWrap?/*#__PURE__*/_jsx(ButtonPrimary,{disabled:Boolean(wrapInputError),onClick:onWrap,children:wrapInputError?/*#__PURE__*/_jsx(WrapErrorText,{wrapInputError:wrapInputError}):wrapType===WrapType.WRAP?/*#__PURE__*/_jsx(Trans,{id:\"Wrap\"}):wrapType===WrapType.UNWRAP?/*#__PURE__*/_jsx(Trans,{id:\"Unwrap\"}):null}):routeNotFound&&userHasSpecifiedInputOutput&&!routeIsLoading&&!routeIsSyncing?/*#__PURE__*/_jsx(GreyCard,{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(ThemedText.Main,{mb:\"4px\",children:/*#__PURE__*/_jsx(Trans,{id:\"Insufficient liquidity for this trade.\"})})}):showApproveFlow?/*#__PURE__*/_jsx(AutoRow,{style:{flexWrap:'nowrap',width:'100%'},children:/*#__PURE__*/_jsxs(AutoColumn,{style:{width:'100%'},gap:\"12px\",children:[/*#__PURE__*/_jsx(ButtonConfirmed,{onClick:handleApprove,disabled:approvalState!==ApprovalState.NOT_APPROVED||approvalSubmitted||signatureState===UseERC20PermitState.SIGNED,width:\"100%\",altDisabledStyle:approvalState===ApprovalState.PENDING// show solid button while waiting\n,confirmed:approvalState===ApprovalState.APPROVED||signatureState===UseERC20PermitState.SIGNED,children:/*#__PURE__*/_jsxs(AutoRow,{justify:\"space-between\",style:{flexWrap:'nowrap'},children:[/*#__PURE__*/_jsxs(\"span\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(CurrencyLogo,{currency:currencies[Field.INPUT],size:'20px',style:{marginRight:'8px',flexShrink:0}}),approvalState===ApprovalState.APPROVED||signatureState===UseERC20PermitState.SIGNED?/*#__PURE__*/_jsx(Trans,{id:\"You can now trade {0}\",values:{0:(_currencies$Field$INP=currencies[Field.INPUT])===null||_currencies$Field$INP===void 0?void 0:_currencies$Field$INP.symbol}}):/*#__PURE__*/_jsx(Trans,{id:\"Allow the Uniswap Protocol to use your {0}\",values:{0:(_currencies$Field$INP2=currencies[Field.INPUT])===null||_currencies$Field$INP2===void 0?void 0:_currencies$Field$INP2.symbol}})]}),approvalState===ApprovalState.PENDING?/*#__PURE__*/_jsx(Loader,{stroke:\"white\"}):approvalSubmitted&&approvalState===ApprovalState.APPROVED||signatureState===UseERC20PermitState.SIGNED?/*#__PURE__*/_jsx(CheckCircle,{size:\"20\",color:theme.green1}):/*#__PURE__*/_jsx(MouseoverTooltip,{text:/*#__PURE__*/_jsx(Trans,{id:\"You must give the Uniswap smart contracts permission to use your {0}. You only have to do this once per token.\",values:{0:(_currencies$Field$INP3=currencies[Field.INPUT])===null||_currencies$Field$INP3===void 0?void 0:_currencies$Field$INP3.symbol}}),children:/*#__PURE__*/_jsx(HelpCircle,{size:\"20\",color:'white',style:{marginLeft:'8px'}})})]})}),/*#__PURE__*/_jsx(ButtonError,{onClick:function onClick(){if(isExpertMode){handleSwap();}else{setSwapState({tradeToConfirm:trade,attemptingTxn:false,swapErrorMessage:undefined,showConfirm:true,txHash:undefined});}},width:\"100%\",id:\"swap-button\",disabled:!isValid||routeIsSyncing||routeIsLoading||approvalState!==ApprovalState.APPROVED&&signatureState!==UseERC20PermitState.SIGNED||priceImpactTooHigh,error:isValid&&priceImpactSeverity>2,children:/*#__PURE__*/_jsx(Text,{fontSize:16,fontWeight:500,children:priceImpactTooHigh?/*#__PURE__*/_jsx(Trans,{id:\"High Price Impact\"}):trade&&priceImpactSeverity>2?/*#__PURE__*/_jsx(Trans,{id:\"Swap Anyway\"}):/*#__PURE__*/_jsx(Trans,{id:\"Swap\"})})})]})}):/*#__PURE__*/_jsx(ButtonError,{onClick:function onClick(){if(isExpertMode){handleSwap();}else{setSwapState({tradeToConfirm:trade,attemptingTxn:false,swapErrorMessage:undefined,showConfirm:true,txHash:undefined});}},id:\"swap-button\",disabled:!isValid||routeIsSyncing||routeIsLoading||priceImpactTooHigh||!!swapCallbackError,error:isValid&&priceImpactSeverity>2&&!swapCallbackError,children:/*#__PURE__*/_jsx(Text,{fontSize:20,fontWeight:500,children:swapInputError?swapInputError:routeIsSyncing||routeIsLoading?/*#__PURE__*/_jsx(Trans,{id:\"Swap\"}):priceImpactSeverity>2?/*#__PURE__*/_jsx(Trans,{id:\"Swap Anyway\"}):priceImpactTooHigh?/*#__PURE__*/_jsx(Trans,{id:\"Price Impact Too High\"}):/*#__PURE__*/_jsx(Trans,{id:\"Swap\"})})}),isExpertMode&&swapErrorMessage?/*#__PURE__*/_jsx(SwapCallbackError,{error:swapErrorMessage}):null]})]})]})]}),/*#__PURE__*/_jsx(AlertWrapper,{children:/*#__PURE__*/_jsx(NetworkAlert,{})}),/*#__PURE__*/_jsx(SwitchLocaleLink,{}),!swapIsUnsupported?null:/*#__PURE__*/_jsx(UnsupportedCurrencyFooter,{show:swapIsUnsupported,currencies:[currencies[Field.INPUT],currencies[Field.OUTPUT]]})]});}","map":{"version":3,"sources":["/Users/safahi/Downloads/interface-4.30.1/src/pages/Swap/index.tsx"],"names":["Trade","V2Trade","V3Trade","NetworkAlert","SwapDetailsDropdown","UnsupportedCurrencyFooter","MouseoverTooltip","JSBI","useCallback","useContext","useEffect","useMemo","useState","ArrowDown","CheckCircle","HelpCircle","ReactGA","Text","TradeState","AddressInputPanel","ButtonConfirmed","ButtonError","ButtonLight","ButtonPrimary","GreyCard","AutoColumn","CurrencyInputPanel","CurrencyLogo","Loader","AutoRow","confirmPriceImpactWithoutFee","ConfirmSwapModal","ArrowWrapper","SwapCallbackError","Wrapper","SwapHeader","SwitchLocaleLink","TokenWarningModal","useAllTokens","useCurrency","ApprovalState","useApprovalOptimizedTrade","useApproveCallbackFromTrade","useENSAddress","useERC20PermitFromTrade","UseERC20PermitState","useIsArgentWallet","useIsSwapUnsupported","useSwapCallback","useUSDCValue","useWrapCallback","WrapErrorText","WrapType","useActiveWeb3React","useWalletModalToggle","Field","useDefaultsFromURLSearch","useDerivedSwapInfo","useSwapActionHandlers","useSwapState","useExpertModeManager","LinkStyledButton","ThemedText","computeFiatValuePriceImpact","maxAmountSpend","warningSeverity","AppBody","AlertWrapper","styled","div","Swap","history","account","loadedUrlParams","inputCurrencyId","outputCurrencyId","loadedInputCurrency","loadedOutputCurrency","dismissTokenWarning","setDismissTokenWarning","urlLoadedTokens","filter","c","isToken","handleConfirmTokenWarning","defaultTokens","importTokensNotInDefault","token","Boolean","address","theme","ThemeContext","toggleWalletModal","isExpertMode","independentField","typedValue","recipient","trade","tradeState","state","allowedSlippage","currencyBalances","parsedAmount","currencies","swapInputError","inputError","INPUT","OUTPUT","wrapType","onWrap","execute","wrapInputError","showWrap","NOT_APPLICABLE","recipientAddress","parsedAmounts","inputAmount","outputAmount","swaps","LOADING","SYNCING","routeNotFound","routeIsLoading","routeIsSyncing","fiatValueInput","fiatValueOutput","priceImpact","undefined","onSwitchTokens","onCurrencySelection","onUserInput","onChangeRecipient","isValid","dependentField","handleTypeInput","value","handleTypeOutput","handleDismissTokenWarning","push","showConfirm","tradeToConfirm","attemptingTxn","swapErrorMessage","txHash","setSwapState","formattedAmounts","toExact","toSignificant","userHasSpecifiedInputOutput","greaterThan","BigInt","approvalOptimizedTrade","approvalOptimizedTradeString","approvalState","approveCallback","signatureState","signatureData","gatherPermitSignature","handleApprove","NOT_SIGNED","code","event","category","action","label","currency","symbol","join","approvalSubmitted","setApprovalSubmitted","PENDING","maxInputAmount","showMaxButton","equalTo","swapCallback","callback","swapCallbackError","error","handleSwap","then","hash","catch","message","showInverted","setShowInverted","priceImpactSeverity","executionPriceImpact","isArgentWallet","showApproveFlow","NOT_APPROVED","APPROVED","handleConfirmDismiss","handleAcceptChanges","handleInputSelect","inputCurrency","handleMaxInput","handleOutputSelect","outputCurrency","swapIsUnsupported","priceImpactTooHigh","length","display","text1","text3","padding","text2","WRAP","UNWRAP","textAlign","flexWrap","width","SIGNED","alignItems","marginRight","flexShrink","green1","marginLeft"],"mappings":"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","sourcesContent":["import { Trans } from '@lingui/macro'\nimport { Trade } from '@uniswap/router-sdk'\nimport { Currency, CurrencyAmount, Token, TradeType } from '@uniswap/sdk-core'\nimport { Trade as V2Trade } from '@uniswap/v2-sdk'\nimport { Trade as V3Trade } from '@uniswap/v3-sdk'\nimport { NetworkAlert } from 'components/NetworkAlert/NetworkAlert'\nimport SwapDetailsDropdown from 'components/swap/SwapDetailsDropdown'\nimport UnsupportedCurrencyFooter from 'components/swap/UnsupportedCurrencyFooter'\nimport { MouseoverTooltip } from 'components/Tooltip'\nimport JSBI from 'jsbi'\nimport { useCallback, useContext, useEffect, useMemo, useState } from 'react'\nimport { ArrowDown, CheckCircle, HelpCircle } from 'react-feather'\nimport ReactGA from 'react-ga'\nimport { RouteComponentProps } from 'react-router-dom'\nimport { Text } from 'rebass'\nimport { TradeState } from 'state/routing/types'\nimport styled, { ThemeContext } from 'styled-components/macro'\n\nimport AddressInputPanel from '../../components/AddressInputPanel'\nimport { ButtonConfirmed, ButtonError, ButtonLight, ButtonPrimary } from '../../components/Button'\nimport { GreyCard } from '../../components/Card'\nimport { AutoColumn } from '../../components/Column'\nimport CurrencyInputPanel from '../../components/CurrencyInputPanel'\nimport CurrencyLogo from '../../components/CurrencyLogo'\nimport Loader from '../../components/Loader'\nimport { AutoRow } from '../../components/Row'\nimport confirmPriceImpactWithoutFee from '../../components/swap/confirmPriceImpactWithoutFee'\nimport ConfirmSwapModal from '../../components/swap/ConfirmSwapModal'\nimport { ArrowWrapper, SwapCallbackError, Wrapper } from '../../components/swap/styleds'\nimport SwapHeader from '../../components/swap/SwapHeader'\nimport { SwitchLocaleLink } from '../../components/SwitchLocaleLink'\nimport TokenWarningModal from '../../components/TokenWarningModal'\nimport { useAllTokens, useCurrency } from '../../hooks/Tokens'\nimport { ApprovalState, useApprovalOptimizedTrade, useApproveCallbackFromTrade } from '../../hooks/useApproveCallback'\nimport useENSAddress from '../../hooks/useENSAddress'\nimport { useERC20PermitFromTrade, UseERC20PermitState } from '../../hooks/useERC20Permit'\nimport useIsArgentWallet from '../../hooks/useIsArgentWallet'\nimport { useIsSwapUnsupported } from '../../hooks/useIsSwapUnsupported'\nimport { useSwapCallback } from '../../hooks/useSwapCallback'\nimport { useUSDCValue } from '../../hooks/useUSDCPrice'\nimport useWrapCallback, { WrapErrorText, WrapType } from '../../hooks/useWrapCallback'\nimport { useActiveWeb3React } from '../../hooks/web3'\nimport { useWalletModalToggle } from '../../state/application/hooks'\nimport { Field } from '../../state/swap/actions'\nimport {\n  useDefaultsFromURLSearch,\n  useDerivedSwapInfo,\n  useSwapActionHandlers,\n  useSwapState,\n} from '../../state/swap/hooks'\nimport { useExpertModeManager } from '../../state/user/hooks'\nimport { LinkStyledButton, ThemedText } from '../../theme'\nimport { computeFiatValuePriceImpact } from '../../utils/computeFiatValuePriceImpact'\nimport { maxAmountSpend } from '../../utils/maxAmountSpend'\nimport { warningSeverity } from '../../utils/prices'\nimport AppBody from '../AppBody'\n\nconst AlertWrapper = styled.div`\n  max-width: 460px;\n  width: 100%;\n`\n\nexport default function Swap({ history }: RouteComponentProps) {\n  const { account } = useActiveWeb3React()\n  const loadedUrlParams = useDefaultsFromURLSearch()\n\n  // token warning stuff\n  const [loadedInputCurrency, loadedOutputCurrency] = [\n    useCurrency(loadedUrlParams?.inputCurrencyId),\n    useCurrency(loadedUrlParams?.outputCurrencyId),\n  ]\n  const [dismissTokenWarning, setDismissTokenWarning] = useState<boolean>(false)\n  const urlLoadedTokens: Token[] = useMemo(\n    () => [loadedInputCurrency, loadedOutputCurrency]?.filter((c): c is Token => c?.isToken ?? false) ?? [],\n    [loadedInputCurrency, loadedOutputCurrency]\n  )\n  const handleConfirmTokenWarning = useCallback(() => {\n    setDismissTokenWarning(true)\n  }, [])\n\n  // dismiss warning if all imported tokens are in active lists\n  const defaultTokens = useAllTokens()\n  const importTokensNotInDefault = useMemo(\n    () =>\n      urlLoadedTokens &&\n      urlLoadedTokens.filter((token: Token) => {\n        return !Boolean(token.address in defaultTokens)\n      }),\n    [defaultTokens, urlLoadedTokens]\n  )\n\n  const theme = useContext(ThemeContext)\n\n  // toggle wallet when disconnected\n  const toggleWalletModal = useWalletModalToggle()\n\n  // for expert mode\n  const [isExpertMode] = useExpertModeManager()\n\n  // swap state\n  const { independentField, typedValue, recipient } = useSwapState()\n  const {\n    trade: { state: tradeState, trade },\n    allowedSlippage,\n    currencyBalances,\n    parsedAmount,\n    currencies,\n    inputError: swapInputError,\n  } = useDerivedSwapInfo()\n\n  const {\n    wrapType,\n    execute: onWrap,\n    inputError: wrapInputError,\n  } = useWrapCallback(currencies[Field.INPUT], currencies[Field.OUTPUT], typedValue)\n  const showWrap: boolean = wrapType !== WrapType.NOT_APPLICABLE\n  const { address: recipientAddress } = useENSAddress(recipient)\n\n  const parsedAmounts = useMemo(\n    () =>\n      showWrap\n        ? {\n            [Field.INPUT]: parsedAmount,\n            [Field.OUTPUT]: parsedAmount,\n          }\n        : {\n            [Field.INPUT]: independentField === Field.INPUT ? parsedAmount : trade?.inputAmount,\n            [Field.OUTPUT]: independentField === Field.OUTPUT ? parsedAmount : trade?.outputAmount,\n          },\n    [independentField, parsedAmount, showWrap, trade]\n  )\n\n  const [routeNotFound, routeIsLoading, routeIsSyncing] = useMemo(\n    () => [!trade?.swaps, TradeState.LOADING === tradeState, TradeState.SYNCING === tradeState],\n    [trade, tradeState]\n  )\n\n  const fiatValueInput = useUSDCValue(parsedAmounts[Field.INPUT])\n  const fiatValueOutput = useUSDCValue(parsedAmounts[Field.OUTPUT])\n  const priceImpact = routeIsSyncing ? undefined : computeFiatValuePriceImpact(fiatValueInput, fiatValueOutput)\n\n  const { onSwitchTokens, onCurrencySelection, onUserInput, onChangeRecipient } = useSwapActionHandlers()\n  const isValid = !swapInputError\n  const dependentField: Field = independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT\n\n  const handleTypeInput = useCallback(\n    (value: string) => {\n      onUserInput(Field.INPUT, value)\n    },\n    [onUserInput]\n  )\n  const handleTypeOutput = useCallback(\n    (value: string) => {\n      onUserInput(Field.OUTPUT, value)\n    },\n    [onUserInput]\n  )\n\n  // reset if they close warning without tokens in params\n  const handleDismissTokenWarning = useCallback(() => {\n    setDismissTokenWarning(true)\n    history.push('/swap/')\n  }, [history])\n\n  // modal and loading\n  const [{ showConfirm, tradeToConfirm, swapErrorMessage, attemptingTxn, txHash }, setSwapState] = useState<{\n    showConfirm: boolean\n    tradeToConfirm: Trade<Currency, Currency, TradeType> | undefined\n    attemptingTxn: boolean\n    swapErrorMessage: string | undefined\n    txHash: string | undefined\n  }>({\n    showConfirm: false,\n    tradeToConfirm: undefined,\n    attemptingTxn: false,\n    swapErrorMessage: undefined,\n    txHash: undefined,\n  })\n\n  const formattedAmounts = useMemo(\n    () => ({\n      [independentField]: typedValue,\n      [dependentField]: showWrap\n        ? parsedAmounts[independentField]?.toExact() ?? ''\n        : parsedAmounts[dependentField]?.toSignificant(6) ?? '',\n    }),\n    [dependentField, independentField, parsedAmounts, showWrap, typedValue]\n  )\n\n  const userHasSpecifiedInputOutput = Boolean(\n    currencies[Field.INPUT] && currencies[Field.OUTPUT] && parsedAmounts[independentField]?.greaterThan(JSBI.BigInt(0))\n  )\n\n  const approvalOptimizedTrade = useApprovalOptimizedTrade(trade, allowedSlippage)\n  const approvalOptimizedTradeString =\n    approvalOptimizedTrade instanceof V2Trade\n      ? 'V2SwapRouter'\n      : approvalOptimizedTrade instanceof V3Trade\n      ? 'V3SwapRouter'\n      : 'SwapRouter'\n\n  // check whether the user has approved the router on the input token\n  const [approvalState, approveCallback] = useApproveCallbackFromTrade(approvalOptimizedTrade, allowedSlippage)\n  const {\n    state: signatureState,\n    signatureData,\n    gatherPermitSignature,\n  } = useERC20PermitFromTrade(approvalOptimizedTrade, allowedSlippage)\n\n  const handleApprove = useCallback(async () => {\n    if (signatureState === UseERC20PermitState.NOT_SIGNED && gatherPermitSignature) {\n      try {\n        await gatherPermitSignature()\n      } catch (error) {\n        // try to approve if gatherPermitSignature failed for any reason other than the user rejecting it\n        if (error?.code !== 4001) {\n          await approveCallback()\n        }\n      }\n    } else {\n      await approveCallback()\n\n      ReactGA.event({\n        category: 'Swap',\n        action: 'Approve',\n        label: [approvalOptimizedTradeString, approvalOptimizedTrade?.inputAmount?.currency.symbol].join('/'),\n      })\n    }\n  }, [\n    signatureState,\n    gatherPermitSignature,\n    approveCallback,\n    approvalOptimizedTradeString,\n    approvalOptimizedTrade?.inputAmount?.currency.symbol,\n  ])\n\n  // check if user has gone through approval process, used to show two step buttons, reset on token change\n  const [approvalSubmitted, setApprovalSubmitted] = useState<boolean>(false)\n\n  // mark when a user has submitted an approval, reset onTokenSelection for input field\n  useEffect(() => {\n    if (approvalState === ApprovalState.PENDING) {\n      setApprovalSubmitted(true)\n    }\n  }, [approvalState, approvalSubmitted])\n\n  const maxInputAmount: CurrencyAmount<Currency> | undefined = useMemo(\n    () => maxAmountSpend(currencyBalances[Field.INPUT]),\n    [currencyBalances]\n  )\n  const showMaxButton = Boolean(maxInputAmount?.greaterThan(0) && !parsedAmounts[Field.INPUT]?.equalTo(maxInputAmount))\n\n  // the callback to execute the swap\n  const { callback: swapCallback, error: swapCallbackError } = useSwapCallback(\n    approvalOptimizedTrade,\n    allowedSlippage,\n    recipient,\n    signatureData\n  )\n\n  const handleSwap = useCallback(() => {\n    if (!swapCallback) {\n      return\n    }\n    if (priceImpact && !confirmPriceImpactWithoutFee(priceImpact)) {\n      return\n    }\n    setSwapState({ attemptingTxn: true, tradeToConfirm, showConfirm, swapErrorMessage: undefined, txHash: undefined })\n    swapCallback()\n      .then((hash) => {\n        setSwapState({ attemptingTxn: false, tradeToConfirm, showConfirm, swapErrorMessage: undefined, txHash: hash })\n        ReactGA.event({\n          category: 'Swap',\n          action:\n            recipient === null\n              ? 'Swap w/o Send'\n              : (recipientAddress ?? recipient) === account\n              ? 'Swap w/o Send + recipient'\n              : 'Swap w/ Send',\n          label: [\n            approvalOptimizedTradeString,\n            approvalOptimizedTrade?.inputAmount?.currency?.symbol,\n            approvalOptimizedTrade?.outputAmount?.currency?.symbol,\n            'MH',\n          ].join('/'),\n        })\n      })\n      .catch((error) => {\n        setSwapState({\n          attemptingTxn: false,\n          tradeToConfirm,\n          showConfirm,\n          swapErrorMessage: error.message,\n          txHash: undefined,\n        })\n      })\n  }, [\n    swapCallback,\n    priceImpact,\n    tradeToConfirm,\n    showConfirm,\n    recipient,\n    recipientAddress,\n    account,\n    approvalOptimizedTradeString,\n    approvalOptimizedTrade?.inputAmount?.currency?.symbol,\n    approvalOptimizedTrade?.outputAmount?.currency?.symbol,\n  ])\n\n  // errors\n  const [showInverted, setShowInverted] = useState<boolean>(false)\n\n  // warnings on the greater of fiat value price impact and execution price impact\n  const priceImpactSeverity = useMemo(() => {\n    const executionPriceImpact = trade?.priceImpact\n    return warningSeverity(\n      executionPriceImpact && priceImpact\n        ? executionPriceImpact.greaterThan(priceImpact)\n          ? executionPriceImpact\n          : priceImpact\n        : executionPriceImpact ?? priceImpact\n    )\n  }, [priceImpact, trade])\n\n  const isArgentWallet = useIsArgentWallet()\n\n  // show approve flow when: no error on inputs, not approved or pending, or approved in current session\n  // never show if price impact is above threshold in non expert mode\n  const showApproveFlow =\n    !isArgentWallet &&\n    !swapInputError &&\n    (approvalState === ApprovalState.NOT_APPROVED ||\n      approvalState === ApprovalState.PENDING ||\n      (approvalSubmitted && approvalState === ApprovalState.APPROVED)) &&\n    !(priceImpactSeverity > 3 && !isExpertMode)\n\n  const handleConfirmDismiss = useCallback(() => {\n    setSwapState({ showConfirm: false, tradeToConfirm, attemptingTxn, swapErrorMessage, txHash })\n    // if there was a tx hash, we want to clear the input\n    if (txHash) {\n      onUserInput(Field.INPUT, '')\n    }\n  }, [attemptingTxn, onUserInput, swapErrorMessage, tradeToConfirm, txHash])\n\n  const handleAcceptChanges = useCallback(() => {\n    setSwapState({ tradeToConfirm: trade, swapErrorMessage, txHash, attemptingTxn, showConfirm })\n  }, [attemptingTxn, showConfirm, swapErrorMessage, trade, txHash])\n\n  const handleInputSelect = useCallback(\n    (inputCurrency) => {\n      setApprovalSubmitted(false) // reset 2 step UI for approvals\n      onCurrencySelection(Field.INPUT, inputCurrency)\n    },\n    [onCurrencySelection]\n  )\n\n  const handleMaxInput = useCallback(() => {\n    maxInputAmount && onUserInput(Field.INPUT, maxInputAmount.toExact())\n    ReactGA.event({\n      category: 'Swap',\n      action: 'Max',\n    })\n  }, [maxInputAmount, onUserInput])\n\n  const handleOutputSelect = useCallback(\n    (outputCurrency) => onCurrencySelection(Field.OUTPUT, outputCurrency),\n    [onCurrencySelection]\n  )\n\n  const swapIsUnsupported = useIsSwapUnsupported(currencies[Field.INPUT], currencies[Field.OUTPUT])\n\n  const priceImpactTooHigh = priceImpactSeverity > 3 && !isExpertMode\n\n  return (\n    <>\n      <TokenWarningModal\n        isOpen={importTokensNotInDefault.length > 0 && !dismissTokenWarning}\n        tokens={importTokensNotInDefault}\n        onConfirm={handleConfirmTokenWarning}\n        onDismiss={handleDismissTokenWarning}\n      />\n      <AppBody>\n        <SwapHeader allowedSlippage={allowedSlippage} />\n        <Wrapper id=\"swap-page\">\n          <ConfirmSwapModal\n            isOpen={showConfirm}\n            trade={trade}\n            originalTrade={tradeToConfirm}\n            onAcceptChanges={handleAcceptChanges}\n            attemptingTxn={attemptingTxn}\n            txHash={txHash}\n            recipient={recipient}\n            allowedSlippage={allowedSlippage}\n            onConfirm={handleSwap}\n            swapErrorMessage={swapErrorMessage}\n            onDismiss={handleConfirmDismiss}\n          />\n\n          <AutoColumn gap={'sm'}>\n            <div style={{ display: 'relative' }}>\n              <CurrencyInputPanel\n                label={\n                  independentField === Field.OUTPUT && !showWrap ? <Trans>From (at most)</Trans> : <Trans>From</Trans>\n                }\n                value={formattedAmounts[Field.INPUT]}\n                showMaxButton={showMaxButton}\n                currency={currencies[Field.INPUT]}\n                onUserInput={handleTypeInput}\n                onMax={handleMaxInput}\n                fiatValue={fiatValueInput ?? undefined}\n                onCurrencySelect={handleInputSelect}\n                otherCurrency={currencies[Field.OUTPUT]}\n                showCommonBases={true}\n                id=\"swap-currency-input\"\n                loading={independentField === Field.OUTPUT && routeIsSyncing}\n              />\n              <ArrowWrapper clickable>\n                <ArrowDown\n                  size=\"16\"\n                  onClick={() => {\n                    setApprovalSubmitted(false) // reset 2 step UI for approvals\n                    onSwitchTokens()\n                  }}\n                  color={currencies[Field.INPUT] && currencies[Field.OUTPUT] ? theme.text1 : theme.text3}\n                />\n              </ArrowWrapper>\n              <CurrencyInputPanel\n                value={formattedAmounts[Field.OUTPUT]}\n                onUserInput={handleTypeOutput}\n                label={independentField === Field.INPUT && !showWrap ? <Trans>To (at least)</Trans> : <Trans>To</Trans>}\n                showMaxButton={false}\n                hideBalance={false}\n                fiatValue={fiatValueOutput ?? undefined}\n                priceImpact={priceImpact}\n                currency={currencies[Field.OUTPUT]}\n                onCurrencySelect={handleOutputSelect}\n                otherCurrency={currencies[Field.INPUT]}\n                showCommonBases={true}\n                id=\"swap-currency-output\"\n                loading={independentField === Field.INPUT && routeIsSyncing}\n              />\n            </div>\n\n            {recipient !== null && !showWrap ? (\n              <>\n                <AutoRow justify=\"space-between\" style={{ padding: '0 1rem' }}>\n                  <ArrowWrapper clickable={false}>\n                    <ArrowDown size=\"16\" color={theme.text2} />\n                  </ArrowWrapper>\n                  <LinkStyledButton id=\"remove-recipient-button\" onClick={() => onChangeRecipient(null)}>\n                    <Trans>- Remove recipient</Trans>\n                  </LinkStyledButton>\n                </AutoRow>\n                <AddressInputPanel id=\"recipient\" value={recipient} onChange={onChangeRecipient} />\n              </>\n            ) : null}\n            {!showWrap && userHasSpecifiedInputOutput && (trade || routeIsLoading || routeIsSyncing) && (\n              <SwapDetailsDropdown\n                trade={trade}\n                syncing={routeIsSyncing}\n                loading={routeIsLoading}\n                showInverted={showInverted}\n                setShowInverted={setShowInverted}\n                allowedSlippage={allowedSlippage}\n              />\n            )}\n            <div>\n              {swapIsUnsupported ? (\n                <ButtonPrimary disabled={true}>\n                  <ThemedText.Main mb=\"4px\">\n                    <Trans>Unsupported Asset</Trans>\n                  </ThemedText.Main>\n                </ButtonPrimary>\n              ) : !account ? (\n                <ButtonLight onClick={toggleWalletModal}>\n                  <Trans>Connect Wallet</Trans>\n                </ButtonLight>\n              ) : showWrap ? (\n                <ButtonPrimary disabled={Boolean(wrapInputError)} onClick={onWrap}>\n                  {wrapInputError ? (\n                    <WrapErrorText wrapInputError={wrapInputError} />\n                  ) : wrapType === WrapType.WRAP ? (\n                    <Trans>Wrap</Trans>\n                  ) : wrapType === WrapType.UNWRAP ? (\n                    <Trans>Unwrap</Trans>\n                  ) : null}\n                </ButtonPrimary>\n              ) : routeNotFound && userHasSpecifiedInputOutput && !routeIsLoading && !routeIsSyncing ? (\n                <GreyCard style={{ textAlign: 'center' }}>\n                  <ThemedText.Main mb=\"4px\">\n                    <Trans>Insufficient liquidity for this trade.</Trans>\n                  </ThemedText.Main>\n                </GreyCard>\n              ) : showApproveFlow ? (\n                <AutoRow style={{ flexWrap: 'nowrap', width: '100%' }}>\n                  <AutoColumn style={{ width: '100%' }} gap=\"12px\">\n                    <ButtonConfirmed\n                      onClick={handleApprove}\n                      disabled={\n                        approvalState !== ApprovalState.NOT_APPROVED ||\n                        approvalSubmitted ||\n                        signatureState === UseERC20PermitState.SIGNED\n                      }\n                      width=\"100%\"\n                      altDisabledStyle={approvalState === ApprovalState.PENDING} // show solid button while waiting\n                      confirmed={\n                        approvalState === ApprovalState.APPROVED || signatureState === UseERC20PermitState.SIGNED\n                      }\n                    >\n                      <AutoRow justify=\"space-between\" style={{ flexWrap: 'nowrap' }}>\n                        <span style={{ display: 'flex', alignItems: 'center' }}>\n                          <CurrencyLogo\n                            currency={currencies[Field.INPUT]}\n                            size={'20px'}\n                            style={{ marginRight: '8px', flexShrink: 0 }}\n                          />\n                          {/* we need to shorten this string on mobile */}\n                          {approvalState === ApprovalState.APPROVED || signatureState === UseERC20PermitState.SIGNED ? (\n                            <Trans>You can now trade {currencies[Field.INPUT]?.symbol}</Trans>\n                          ) : (\n                            <Trans>Allow the Uniswap Protocol to use your {currencies[Field.INPUT]?.symbol}</Trans>\n                          )}\n                        </span>\n                        {approvalState === ApprovalState.PENDING ? (\n                          <Loader stroke=\"white\" />\n                        ) : (approvalSubmitted && approvalState === ApprovalState.APPROVED) ||\n                          signatureState === UseERC20PermitState.SIGNED ? (\n                          <CheckCircle size=\"20\" color={theme.green1} />\n                        ) : (\n                          <MouseoverTooltip\n                            text={\n                              <Trans>\n                                You must give the Uniswap smart contracts permission to use your{' '}\n                                {currencies[Field.INPUT]?.symbol}. You only have to do this once per token.\n                              </Trans>\n                            }\n                          >\n                            <HelpCircle size=\"20\" color={'white'} style={{ marginLeft: '8px' }} />\n                          </MouseoverTooltip>\n                        )}\n                      </AutoRow>\n                    </ButtonConfirmed>\n                    <ButtonError\n                      onClick={() => {\n                        if (isExpertMode) {\n                          handleSwap()\n                        } else {\n                          setSwapState({\n                            tradeToConfirm: trade,\n                            attemptingTxn: false,\n                            swapErrorMessage: undefined,\n                            showConfirm: true,\n                            txHash: undefined,\n                          })\n                        }\n                      }}\n                      width=\"100%\"\n                      id=\"swap-button\"\n                      disabled={\n                        !isValid ||\n                        routeIsSyncing ||\n                        routeIsLoading ||\n                        (approvalState !== ApprovalState.APPROVED && signatureState !== UseERC20PermitState.SIGNED) ||\n                        priceImpactTooHigh\n                      }\n                      error={isValid && priceImpactSeverity > 2}\n                    >\n                      <Text fontSize={16} fontWeight={500}>\n                        {priceImpactTooHigh ? (\n                          <Trans>High Price Impact</Trans>\n                        ) : trade && priceImpactSeverity > 2 ? (\n                          <Trans>Swap Anyway</Trans>\n                        ) : (\n                          <Trans>Swap</Trans>\n                        )}\n                      </Text>\n                    </ButtonError>\n                  </AutoColumn>\n                </AutoRow>\n              ) : (\n                <ButtonError\n                  onClick={() => {\n                    if (isExpertMode) {\n                      handleSwap()\n                    } else {\n                      setSwapState({\n                        tradeToConfirm: trade,\n                        attemptingTxn: false,\n                        swapErrorMessage: undefined,\n                        showConfirm: true,\n                        txHash: undefined,\n                      })\n                    }\n                  }}\n                  id=\"swap-button\"\n                  disabled={!isValid || routeIsSyncing || routeIsLoading || priceImpactTooHigh || !!swapCallbackError}\n                  error={isValid && priceImpactSeverity > 2 && !swapCallbackError}\n                >\n                  <Text fontSize={20} fontWeight={500}>\n                    {swapInputError ? (\n                      swapInputError\n                    ) : routeIsSyncing || routeIsLoading ? (\n                      <Trans>Swap</Trans>\n                    ) : priceImpactSeverity > 2 ? (\n                      <Trans>Swap Anyway</Trans>\n                    ) : priceImpactTooHigh ? (\n                      <Trans>Price Impact Too High</Trans>\n                    ) : (\n                      <Trans>Swap</Trans>\n                    )}\n                  </Text>\n                </ButtonError>\n              )}\n              {isExpertMode && swapErrorMessage ? <SwapCallbackError error={swapErrorMessage} /> : null}\n            </div>\n          </AutoColumn>\n        </Wrapper>\n      </AppBody>\n      <AlertWrapper>\n        <NetworkAlert />\n      </AlertWrapper>\n      <SwitchLocaleLink />\n      {!swapIsUnsupported ? null : (\n        <UnsupportedCurrencyFooter\n          show={swapIsUnsupported}\n          currencies={[currencies[Field.INPUT], currencies[Field.OUTPUT]]}\n        />\n      )}\n    </>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}