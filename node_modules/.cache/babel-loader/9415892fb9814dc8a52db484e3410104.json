{"ast":null,"code":"import { ThemeContext as _ThemeContext } from \"styled-components\";\nimport _styled from \"styled-components\";\n\nvar _jsxFileName = \"/Users/safahi/Downloads/interface-4.30.1/src/components/TransactionSettings/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { Trans } from \"@lingui/react\";\nimport { Percent } from '@uniswap/sdk-core';\nimport { L2_CHAIN_IDS } from 'constants/chains';\nimport { DEFAULT_DEADLINE_FROM_NOW } from 'constants/misc';\nimport { useActiveWeb3React } from 'hooks/web3';\nimport { darken } from 'polished';\nimport { useContext, useState } from 'react';\nimport { useSetUserSlippageTolerance, useUserSlippageTolerance, useUserTransactionTTL } from 'state/user/hooks';\nimport { ThemedText } from '../../theme';\nimport { AutoColumn } from '../Column';\nimport QuestionHelper from '../QuestionHelper';\nimport { RowBetween, RowFixed } from '../Row';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar SlippageError;\n\n(function (SlippageError) {\n  SlippageError[\"InvalidInput\"] = \"InvalidInput\";\n})(SlippageError || (SlippageError = {}));\n\nvar DeadlineError;\n\n(function (DeadlineError) {\n  DeadlineError[\"InvalidInput\"] = \"InvalidInput\";\n})(DeadlineError || (DeadlineError = {}));\n\nconst FancyButton = _styled.button.withConfig({\n  displayName: \"TransactionSettings__FancyButton\",\n  componentId: \"sc-fzcgd8-0\"\n})([\"color:\", \";align-items:center;height:2rem;border-radius:36px;font-size:1rem;width:auto;min-width:3.5rem;border:1px solid \", \";outline:none;background:\", \";:hover{border:1px solid \", \";}:focus{border:1px solid \", \";}\"], ({\n  theme\n}) => theme.text1, ({\n  theme\n}) => theme.bg3, ({\n  theme\n}) => theme.bg1, ({\n  theme\n}) => theme.bg4, ({\n  theme\n}) => theme.primary1);\n\nconst Option = _styled(FancyButton).withConfig({\n  displayName: \"TransactionSettings__Option\",\n  componentId: \"sc-fzcgd8-1\"\n})([\"margin-right:8px;:hover{cursor:pointer;}background-color:\", \";color:\", \";\"], ({\n  active,\n  theme\n}) => active && theme.primary1, ({\n  active,\n  theme\n}) => active ? theme.white : theme.text1);\n\nconst Input = _styled.input.withConfig({\n  displayName: \"TransactionSettings__Input\",\n  componentId: \"sc-fzcgd8-2\"\n})([\"background:\", \";font-size:16px;width:auto;outline:none;&::-webkit-outer-spin-button,&::-webkit-inner-spin-button{-webkit-appearance:none;}color:\", \";text-align:right;\"], ({\n  theme\n}) => theme.bg1, ({\n  theme,\n  color\n}) => color === 'red' ? theme.red1 : theme.text1);\n\nconst OptionCustom = _styled(FancyButton).withConfig({\n  displayName: \"TransactionSettings__OptionCustom\",\n  componentId: \"sc-fzcgd8-3\"\n})([\"height:2rem;position:relative;padding:0 0.75rem;flex:1;border:\", \";:hover{border:\", \";}input{width:100%;height:100%;border:0px;border-radius:2rem;}\"], ({\n  theme,\n  active,\n  warning\n}) => active ? `1px solid ${warning ? theme.red1 : theme.primary1}` : warning && `1px solid ${theme.red1}`, ({\n  theme,\n  active,\n  warning\n}) => active && `1px solid ${warning ? darken(0.1, theme.red1) : darken(0.1, theme.primary1)}`);\n\nconst SlippageEmojiContainer = _styled.span.withConfig({\n  displayName: \"TransactionSettings__SlippageEmojiContainer\",\n  componentId: \"sc-fzcgd8-4\"\n})([\"color:#f3841e;\", \"\"], ({\n  theme\n}) => theme.mediaWidth.upToSmall`\n    display: none;\n  `);\n\nconst THREE_DAYS_IN_SECONDS = 259200000 / 1000;\nexport default function TransactionSettings({\n  placeholderSlippage\n}) {\n  _s();\n\n  const {\n    chainId\n  } = useActiveWeb3React();\n  const theme = useContext(_ThemeContext);\n  const userSlippageTolerance = useUserSlippageTolerance();\n  const setUserSlippageTolerance = useSetUserSlippageTolerance();\n  const [deadline, setDeadline] = useUserTransactionTTL();\n  const [slippageInput, setSlippageInput] = useState('');\n  const [slippageError, setSlippageError] = useState(false);\n  const [deadlineInput, setDeadlineInput] = useState('');\n  const [deadlineError, setDeadlineError] = useState(false);\n\n  function parseSlippageInput(value) {\n    // populate what the user typed and clear the error\n    setSlippageInput(value);\n    setSlippageError(false);\n\n    if (value.length === 0) {\n      setUserSlippageTolerance('auto');\n    } else {\n      const parsed = Math.floor(Number.parseFloat(value) * 100);\n\n      if (!Number.isInteger(parsed) || parsed < 0 || parsed > 5000) {\n        setUserSlippageTolerance('auto');\n\n        if (value !== '.') {\n          setSlippageError(SlippageError.InvalidInput);\n        }\n      } else {\n        setUserSlippageTolerance(new Percent(parsed, 10000));\n      }\n    }\n  }\n\n  const tooLow = userSlippageTolerance !== 'auto' && userSlippageTolerance.lessThan(new Percent(5, 10000));\n  const tooHigh = userSlippageTolerance !== 'auto' && userSlippageTolerance.greaterThan(new Percent(1, 100));\n\n  function parseCustomDeadline(value) {\n    // populate what the user typed and clear the error\n    setDeadlineInput(value);\n    setDeadlineError(false);\n\n    if (value.length === 0) {\n      setDeadline(DEFAULT_DEADLINE_FROM_NOW);\n    } else {\n      try {\n        const parsed = Math.floor(Number.parseFloat(value) * 60);\n\n        if (!Number.isInteger(parsed) || parsed < 60 || parsed > THREE_DAYS_IN_SECONDS) {\n          setDeadlineError(DeadlineError.InvalidInput);\n        } else {\n          setDeadline(parsed);\n        }\n      } catch (error) {\n        console.error(error);\n        setDeadlineError(DeadlineError.InvalidInput);\n      }\n    }\n  }\n\n  const showCustomDeadlineRow = Boolean(chainId && !L2_CHAIN_IDS.includes(chainId));\n  return /*#__PURE__*/_jsxDEV(AutoColumn, {\n    gap: \"md\",\n    children: [/*#__PURE__*/_jsxDEV(AutoColumn, {\n      gap: \"sm\",\n      children: [/*#__PURE__*/_jsxDEV(RowFixed, {\n        children: [/*#__PURE__*/_jsxDEV(ThemedText.Black, {\n          fontWeight: 400,\n          fontSize: 14,\n          color: theme.text2,\n          children: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Slippage tolerance\"\n          }, void 0, false, void 0, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(QuestionHelper, {\n          text: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Your transaction will revert if the price changes unfavorably by more than this percentage.\"\n          }, void 0, false, void 0, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RowBetween, {\n        children: [/*#__PURE__*/_jsxDEV(Option, {\n          onClick: () => {\n            parseSlippageInput('');\n          },\n          active: userSlippageTolerance === 'auto',\n          children: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Auto\"\n          }, void 0, false, void 0, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(OptionCustom, {\n          active: userSlippageTolerance !== 'auto',\n          warning: !!slippageError,\n          tabIndex: -1,\n          children: /*#__PURE__*/_jsxDEV(RowBetween, {\n            children: [tooLow || tooHigh ? /*#__PURE__*/_jsxDEV(SlippageEmojiContainer, {\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                role: \"img\",\n                \"aria-label\": \"warning\",\n                children: \"\\u26A0\\uFE0F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 17\n            }, this) : null, /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: placeholderSlippage.toFixed(2),\n              value: slippageInput.length > 0 ? slippageInput : userSlippageTolerance === 'auto' ? '' : userSlippageTolerance.toFixed(2),\n              onChange: e => parseSlippageInput(e.target.value),\n              onBlur: () => {\n                setSlippageInput('');\n                setSlippageError(false);\n              },\n              color: slippageError ? 'red' : ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 15\n            }, this), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), slippageError || tooLow || tooHigh ? /*#__PURE__*/_jsxDEV(RowBetween, {\n        style: {\n          fontSize: '14px',\n          paddingTop: '7px',\n          color: slippageError ? 'red' : '#F3841E'\n        },\n        children: slippageError ? /*#__PURE__*/_jsxDEV(Trans, {\n          id: \"Enter a valid slippage percentage\"\n        }, void 0, false, void 0, this) : tooLow ? /*#__PURE__*/_jsxDEV(Trans, {\n          id: \"Your transaction may fail\"\n        }, void 0, false, void 0, this) : /*#__PURE__*/_jsxDEV(Trans, {\n          id: \"Your transaction may be frontrun\"\n        }, void 0, false, void 0, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this), showCustomDeadlineRow && /*#__PURE__*/_jsxDEV(AutoColumn, {\n      gap: \"sm\",\n      children: [/*#__PURE__*/_jsxDEV(RowFixed, {\n        children: [/*#__PURE__*/_jsxDEV(ThemedText.Black, {\n          fontSize: 14,\n          fontWeight: 400,\n          color: theme.text2,\n          children: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Transaction deadline\"\n          }, void 0, false, void 0, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(QuestionHelper, {\n          text: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"Your transaction will revert if it is pending for more than this period of time.\"\n          }, void 0, false, void 0, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(RowFixed, {\n        children: [/*#__PURE__*/_jsxDEV(OptionCustom, {\n          style: {\n            width: '80px'\n          },\n          warning: !!deadlineError,\n          tabIndex: -1,\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: (DEFAULT_DEADLINE_FROM_NOW / 60).toString(),\n            value: deadlineInput.length > 0 ? deadlineInput : deadline === DEFAULT_DEADLINE_FROM_NOW ? '' : (deadline / 60).toString(),\n            onChange: e => parseCustomDeadline(e.target.value),\n            onBlur: () => {\n              setDeadlineInput('');\n              setDeadlineError(false);\n            },\n            color: deadlineError ? 'red' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ThemedText.Body, {\n          style: {\n            paddingLeft: '8px'\n          },\n          fontSize: 14,\n          children: /*#__PURE__*/_jsxDEV(Trans, {\n            id: \"minutes\"\n          }, void 0, false, void 0, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 163,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TransactionSettings, \"XxtmxrEmRJz/gtl+B9aQmWtfiso=\", false, function () {\n  return [useActiveWeb3React, useUserSlippageTolerance, useSetUserSlippageTolerance, useUserTransactionTTL];\n});\n\n_c = TransactionSettings;\n\nvar _c;\n\n$RefreshReg$(_c, \"TransactionSettings\");","map":{"version":3,"sources":["/Users/safahi/Downloads/interface-4.30.1/src/components/TransactionSettings/index.tsx"],"names":["Percent","L2_CHAIN_IDS","DEFAULT_DEADLINE_FROM_NOW","useActiveWeb3React","darken","useContext","useState","useSetUserSlippageTolerance","useUserSlippageTolerance","useUserTransactionTTL","ThemedText","AutoColumn","QuestionHelper","RowBetween","RowFixed","SlippageError","DeadlineError","FancyButton","styled","button","theme","text1","bg3","bg1","bg4","primary1","Option","active","white","Input","input","color","red1","OptionCustom","warning","SlippageEmojiContainer","span","mediaWidth","upToSmall","THREE_DAYS_IN_SECONDS","TransactionSettings","placeholderSlippage","chainId","ThemeContext","userSlippageTolerance","setUserSlippageTolerance","deadline","setDeadline","slippageInput","setSlippageInput","slippageError","setSlippageError","deadlineInput","setDeadlineInput","deadlineError","setDeadlineError","parseSlippageInput","value","length","parsed","Math","floor","Number","parseFloat","isInteger","InvalidInput","tooLow","lessThan","tooHigh","greaterThan","parseCustomDeadline","error","console","showCustomDeadlineRow","Boolean","includes","text2","toFixed","e","target","fontSize","paddingTop","width","toString","paddingLeft"],"mappings":";;;;;;;AACA,SAASA,OAAT,QAAwB,mBAAxB;AACA,SAASC,YAAT,QAA6B,kBAA7B;AACA,SAASC,yBAAT,QAA0C,gBAA1C;AACA,SAASC,kBAAT,QAAmC,YAAnC;AAEA,SAASC,MAAT,QAAuB,UAAvB;AACA,SAASC,UAAT,EAAqBC,QAArB,QAAqC,OAArC;AACA,SAASC,2BAAT,EAAsCC,wBAAtC,EAAgEC,qBAAhE,QAA6F,kBAA7F;AAGA,SAASC,UAAT,QAA2B,aAA3B;AACA,SAASC,UAAT,QAA2B,WAA3B;AACA,OAAOC,cAAP,MAA2B,mBAA3B;AACA,SAASC,UAAT,EAAqBC,QAArB,QAAqC,QAArC;;IAEKC,a;;WAAAA,a;AAAAA,EAAAA,a;GAAAA,a,KAAAA,a;;IAIAC,a;;WAAAA,a;AAAAA,EAAAA,a;GAAAA,a,KAAAA,a;;AAIL,MAAMC,WAAW,GAAGC,OAAM,CAACC,MAAV;AAAA;AAAA;AAAA,gOACN,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAeA,KAAK,CAACC,KADf,EAQK,CAAC;AAAED,EAAAA;AAAF,CAAD,KAAeA,KAAK,CAACE,GAR1B,EAUD,CAAC;AAAEF,EAAAA;AAAF,CAAD,KAAeA,KAAK,CAACG,GAVpB,EAYO,CAAC;AAAEH,EAAAA;AAAF,CAAD,KAAeA,KAAK,CAACI,GAZ5B,EAeO,CAAC;AAAEJ,EAAAA;AAAF,CAAD,KAAeA,KAAK,CAACK,QAf5B,CAAjB;;AAmBA,MAAMC,MAAM,GAAGR,OAAM,CAACD,WAAD,CAAT;AAAA;AAAA;AAAA,kFAKU,CAAC;AAAEU,EAAAA,MAAF;AAAUP,EAAAA;AAAV,CAAD,KAAuBO,MAAM,IAAIP,KAAK,CAACK,QALjD,EAMD,CAAC;AAAEE,EAAAA,MAAF;AAAUP,EAAAA;AAAV,CAAD,KAAwBO,MAAM,GAAGP,KAAK,CAACQ,KAAT,GAAiBR,KAAK,CAACC,KANpD,CAAZ;;AASA,MAAMQ,KAAK,GAAGX,OAAM,CAACY,KAAV;AAAA;AAAA;AAAA,+KACK,CAAC;AAAEV,EAAAA;AAAF,CAAD,KAAeA,KAAK,CAACG,GAD1B,EASA,CAAC;AAAEH,EAAAA,KAAF;AAASW,EAAAA;AAAT,CAAD,KAAuBA,KAAK,KAAK,KAAV,GAAkBX,KAAK,CAACY,IAAxB,GAA+BZ,KAAK,CAACC,KAT5D,CAAX;;AAaA,MAAMY,YAAY,GAAGf,OAAM,CAACD,WAAD,CAAT;AAAA;AAAA;AAAA,4JAKN,CAAC;AAAEG,EAAAA,KAAF;AAASO,EAAAA,MAAT;AAAiBO,EAAAA;AAAjB,CAAD,KACRP,MAAM,GAAI,aAAYO,OAAO,GAAGd,KAAK,CAACY,IAAT,GAAgBZ,KAAK,CAACK,QAAS,EAAtD,GAA0DS,OAAO,IAAK,aAAYd,KAAK,CAACY,IAAK,EANrF,EAQJ,CAAC;AAAEZ,EAAAA,KAAF;AAASO,EAAAA,MAAT;AAAiBO,EAAAA;AAAjB,CAAD,KACRP,MAAM,IAAK,aAAYO,OAAO,GAAG9B,MAAM,CAAC,GAAD,EAAMgB,KAAK,CAACY,IAAZ,CAAT,GAA6B5B,MAAM,CAAC,GAAD,EAAMgB,KAAK,CAACK,QAAZ,CAAsB,EAT3E,CAAlB;;AAoBA,MAAMU,sBAAsB,GAAGjB,OAAM,CAACkB,IAAV;AAAA;AAAA;AAAA,2BAExB,CAAC;AAAEhB,EAAAA;AAAF,CAAD,KAAeA,KAAK,CAACiB,UAAN,CAAiBC,SAAU;AAC9C;AACA,GAJ4B,CAA5B;;AAWA,MAAMC,qBAAqB,GAAG,YAAa,IAA3C;AAEA,eAAe,SAASC,mBAAT,CAA6B;AAAEC,EAAAA;AAAF,CAA7B,EAAgF;AAAA;;AAC7F,QAAM;AAAEC,IAAAA;AAAF,MAAcvC,kBAAkB,EAAtC;AACA,QAAMiB,KAAK,GAAGf,UAAU,CAACsC,aAAD,CAAxB;AAEA,QAAMC,qBAAqB,GAAGpC,wBAAwB,EAAtD;AACA,QAAMqC,wBAAwB,GAAGtC,2BAA2B,EAA5D;AAEA,QAAM,CAACuC,QAAD,EAAWC,WAAX,IAA0BtC,qBAAqB,EAArD;AAEA,QAAM,CAACuC,aAAD,EAAgBC,gBAAhB,IAAoC3C,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAAC4C,aAAD,EAAgBC,gBAAhB,IAAoC7C,QAAQ,CAAwB,KAAxB,CAAlD;AAEA,QAAM,CAAC8C,aAAD,EAAgBC,gBAAhB,IAAoC/C,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAACgD,aAAD,EAAgBC,gBAAhB,IAAoCjD,QAAQ,CAAwB,KAAxB,CAAlD;;AAEA,WAASkD,kBAAT,CAA4BC,KAA5B,EAA2C;AACzC;AACAR,IAAAA,gBAAgB,CAACQ,KAAD,CAAhB;AACAN,IAAAA,gBAAgB,CAAC,KAAD,CAAhB;;AAEA,QAAIM,KAAK,CAACC,MAAN,KAAiB,CAArB,EAAwB;AACtBb,MAAAA,wBAAwB,CAAC,MAAD,CAAxB;AACD,KAFD,MAEO;AACL,YAAMc,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,UAAP,CAAkBN,KAAlB,IAA2B,GAAtC,CAAf;;AAEA,UAAI,CAACK,MAAM,CAACE,SAAP,CAAiBL,MAAjB,CAAD,IAA6BA,MAAM,GAAG,CAAtC,IAA2CA,MAAM,GAAG,IAAxD,EAA8D;AAC5Dd,QAAAA,wBAAwB,CAAC,MAAD,CAAxB;;AACA,YAAIY,KAAK,KAAK,GAAd,EAAmB;AACjBN,UAAAA,gBAAgB,CAACpC,aAAa,CAACkD,YAAf,CAAhB;AACD;AACF,OALD,MAKO;AACLpB,QAAAA,wBAAwB,CAAC,IAAI7C,OAAJ,CAAY2D,MAAZ,EAAoB,KAApB,CAAD,CAAxB;AACD;AACF;AACF;;AAED,QAAMO,MAAM,GAAGtB,qBAAqB,KAAK,MAA1B,IAAoCA,qBAAqB,CAACuB,QAAtB,CAA+B,IAAInE,OAAJ,CAAY,CAAZ,EAAe,KAAf,CAA/B,CAAnD;AACA,QAAMoE,OAAO,GAAGxB,qBAAqB,KAAK,MAA1B,IAAoCA,qBAAqB,CAACyB,WAAtB,CAAkC,IAAIrE,OAAJ,CAAY,CAAZ,EAAe,GAAf,CAAlC,CAApD;;AAEA,WAASsE,mBAAT,CAA6Bb,KAA7B,EAA4C;AAC1C;AACAJ,IAAAA,gBAAgB,CAACI,KAAD,CAAhB;AACAF,IAAAA,gBAAgB,CAAC,KAAD,CAAhB;;AAEA,QAAIE,KAAK,CAACC,MAAN,KAAiB,CAArB,EAAwB;AACtBX,MAAAA,WAAW,CAAC7C,yBAAD,CAAX;AACD,KAFD,MAEO;AACL,UAAI;AACF,cAAMyD,MAAc,GAAGC,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,UAAP,CAAkBN,KAAlB,IAA2B,EAAtC,CAAvB;;AACA,YAAI,CAACK,MAAM,CAACE,SAAP,CAAiBL,MAAjB,CAAD,IAA6BA,MAAM,GAAG,EAAtC,IAA4CA,MAAM,GAAGpB,qBAAzD,EAAgF;AAC9EgB,UAAAA,gBAAgB,CAACvC,aAAa,CAACiD,YAAf,CAAhB;AACD,SAFD,MAEO;AACLlB,UAAAA,WAAW,CAACY,MAAD,CAAX;AACD;AACF,OAPD,CAOE,OAAOY,KAAP,EAAc;AACdC,QAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACAhB,QAAAA,gBAAgB,CAACvC,aAAa,CAACiD,YAAf,CAAhB;AACD;AACF;AACF;;AAED,QAAMQ,qBAAqB,GAAGC,OAAO,CAAChC,OAAO,IAAI,CAACzC,YAAY,CAAC0E,QAAb,CAAsBjC,OAAtB,CAAb,CAArC;AAEA,sBACE,QAAC,UAAD;AAAY,IAAA,GAAG,EAAC,IAAhB;AAAA,4BACE,QAAC,UAAD;AAAY,MAAA,GAAG,EAAC,IAAhB;AAAA,8BACE,QAAC,QAAD;AAAA,gCACE,QAAC,UAAD,CAAY,KAAZ;AAAkB,UAAA,UAAU,EAAE,GAA9B;AAAmC,UAAA,QAAQ,EAAE,EAA7C;AAAiD,UAAA,KAAK,EAAEtB,KAAK,CAACwD,KAA9D;AAAA,iCACE;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAIE,QAAC,cAAD;AACE,UAAA,IAAI,eACF;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,gBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAWE,QAAC,UAAD;AAAA,gCACE,QAAC,MAAD;AACE,UAAA,OAAO,EAAE,MAAM;AACbpB,YAAAA,kBAAkB,CAAC,EAAD,CAAlB;AACD,WAHH;AAIE,UAAA,MAAM,EAAEZ,qBAAqB,KAAK,MAJpC;AAAA,iCAME;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,gBADF,eASE,QAAC,YAAD;AAAc,UAAA,MAAM,EAAEA,qBAAqB,KAAK,MAAhD;AAAwD,UAAA,OAAO,EAAE,CAAC,CAACM,aAAnE;AAAkF,UAAA,QAAQ,EAAE,CAAC,CAA7F;AAAA,iCACE,QAAC,UAAD;AAAA,uBACGgB,MAAM,IAAIE,OAAV,gBACC,QAAC,sBAAD;AAAA,qCACE;AAAM,gBAAA,IAAI,EAAC,KAAX;AAAiB,8BAAW,SAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADD,GAMG,IAPN,eAQE,QAAC,KAAD;AACE,cAAA,WAAW,EAAE3B,mBAAmB,CAACoC,OAApB,CAA4B,CAA5B,CADf;AAEE,cAAA,KAAK,EACH7B,aAAa,CAACU,MAAd,GAAuB,CAAvB,GACIV,aADJ,GAEIJ,qBAAqB,KAAK,MAA1B,GACA,EADA,GAEAA,qBAAqB,CAACiC,OAAtB,CAA8B,CAA9B,CAPR;AASE,cAAA,QAAQ,EAAGC,CAAD,IAAOtB,kBAAkB,CAACsB,CAAC,CAACC,MAAF,CAAStB,KAAV,CATrC;AAUE,cAAA,MAAM,EAAE,MAAM;AACZR,gBAAAA,gBAAgB,CAAC,EAAD,CAAhB;AACAE,gBAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD,eAbH;AAcE,cAAA,KAAK,EAAED,aAAa,GAAG,KAAH,GAAW;AAdjC;AAAA;AAAA;AAAA;AAAA,oBARF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBATF;AAAA;AAAA;AAAA;AAAA;AAAA,cAXF,EAiDGA,aAAa,IAAIgB,MAAjB,IAA2BE,OAA3B,gBACC,QAAC,UAAD;AACE,QAAA,KAAK,EAAE;AACLY,UAAAA,QAAQ,EAAE,MADL;AAELC,UAAAA,UAAU,EAAE,KAFP;AAGLlD,UAAAA,KAAK,EAAEmB,aAAa,GAAG,KAAH,GAAW;AAH1B,SADT;AAAA,kBAOGA,aAAa,gBACZ;AAAA;AAAA,uCADY,GAEVgB,MAAM,gBACR;AAAA;AAAA,uCADQ,gBAGR;AAAA;AAAA;AAZJ;AAAA;AAAA;AAAA;AAAA,cADD,GAgBG,IAjEN;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,EAqEGO,qBAAqB,iBACpB,QAAC,UAAD;AAAY,MAAA,GAAG,EAAC,IAAhB;AAAA,8BACE,QAAC,QAAD;AAAA,gCACE,QAAC,UAAD,CAAY,KAAZ;AAAkB,UAAA,QAAQ,EAAE,EAA5B;AAAgC,UAAA,UAAU,EAAE,GAA5C;AAAiD,UAAA,KAAK,EAAErD,KAAK,CAACwD,KAA9D;AAAA,iCACE;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAIE,QAAC,cAAD;AACE,UAAA,IAAI,eAAE;AAAA;AAAA;AADR;AAAA;AAAA;AAAA;AAAA,gBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eASE,QAAC,QAAD;AAAA,gCACE,QAAC,YAAD;AAAc,UAAA,KAAK,EAAE;AAAEM,YAAAA,KAAK,EAAE;AAAT,WAArB;AAAwC,UAAA,OAAO,EAAE,CAAC,CAAC5B,aAAnD;AAAkE,UAAA,QAAQ,EAAE,CAAC,CAA7E;AAAA,iCACE,QAAC,KAAD;AACE,YAAA,WAAW,EAAE,CAACpD,yBAAyB,GAAG,EAA7B,EAAiCiF,QAAjC,EADf;AAEE,YAAA,KAAK,EACH/B,aAAa,CAACM,MAAd,GAAuB,CAAvB,GACIN,aADJ,GAEIN,QAAQ,KAAK5C,yBAAb,GACA,EADA,GAEA,CAAC4C,QAAQ,GAAG,EAAZ,EAAgBqC,QAAhB,EAPR;AASE,YAAA,QAAQ,EAAGL,CAAD,IAAOR,mBAAmB,CAACQ,CAAC,CAACC,MAAF,CAAStB,KAAV,CATtC;AAUE,YAAA,MAAM,EAAE,MAAM;AACZJ,cAAAA,gBAAgB,CAAC,EAAD,CAAhB;AACAE,cAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD,aAbH;AAcE,YAAA,KAAK,EAAED,aAAa,GAAG,KAAH,GAAW;AAdjC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAmBE,QAAC,UAAD,CAAY,IAAZ;AAAiB,UAAA,KAAK,EAAE;AAAE8B,YAAAA,WAAW,EAAE;AAAf,WAAxB;AAAgD,UAAA,QAAQ,EAAE,EAA1D;AAAA,iCACE;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAnBF;AAAA;AAAA;AAAA;AAAA;AAAA,cATF;AAAA;AAAA;AAAA;AAAA;AAAA,YAtEJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA2GD;;GA1KuB5C,mB;UACFrC,kB,EAGUK,wB,EACGD,2B,EAEDE,qB;;;KAPV+B,mB","sourcesContent":["import { Trans } from '@lingui/macro'\nimport { Percent } from '@uniswap/sdk-core'\nimport { L2_CHAIN_IDS } from 'constants/chains'\nimport { DEFAULT_DEADLINE_FROM_NOW } from 'constants/misc'\nimport { useActiveWeb3React } from 'hooks/web3'\nimport ms from 'ms.macro'\nimport { darken } from 'polished'\nimport { useContext, useState } from 'react'\nimport { useSetUserSlippageTolerance, useUserSlippageTolerance, useUserTransactionTTL } from 'state/user/hooks'\nimport styled, { ThemeContext } from 'styled-components/macro'\n\nimport { ThemedText } from '../../theme'\nimport { AutoColumn } from '../Column'\nimport QuestionHelper from '../QuestionHelper'\nimport { RowBetween, RowFixed } from '../Row'\n\nenum SlippageError {\n  InvalidInput = 'InvalidInput',\n}\n\nenum DeadlineError {\n  InvalidInput = 'InvalidInput',\n}\n\nconst FancyButton = styled.button`\n  color: ${({ theme }) => theme.text1};\n  align-items: center;\n  height: 2rem;\n  border-radius: 36px;\n  font-size: 1rem;\n  width: auto;\n  min-width: 3.5rem;\n  border: 1px solid ${({ theme }) => theme.bg3};\n  outline: none;\n  background: ${({ theme }) => theme.bg1};\n  :hover {\n    border: 1px solid ${({ theme }) => theme.bg4};\n  }\n  :focus {\n    border: 1px solid ${({ theme }) => theme.primary1};\n  }\n`\n\nconst Option = styled(FancyButton)<{ active: boolean }>`\n  margin-right: 8px;\n  :hover {\n    cursor: pointer;\n  }\n  background-color: ${({ active, theme }) => active && theme.primary1};\n  color: ${({ active, theme }) => (active ? theme.white : theme.text1)};\n`\n\nconst Input = styled.input`\n  background: ${({ theme }) => theme.bg1};\n  font-size: 16px;\n  width: auto;\n  outline: none;\n  &::-webkit-outer-spin-button,\n  &::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n  }\n  color: ${({ theme, color }) => (color === 'red' ? theme.red1 : theme.text1)};\n  text-align: right;\n`\n\nconst OptionCustom = styled(FancyButton)<{ active?: boolean; warning?: boolean }>`\n  height: 2rem;\n  position: relative;\n  padding: 0 0.75rem;\n  flex: 1;\n  border: ${({ theme, active, warning }) =>\n    active ? `1px solid ${warning ? theme.red1 : theme.primary1}` : warning && `1px solid ${theme.red1}`};\n  :hover {\n    border: ${({ theme, active, warning }) =>\n      active && `1px solid ${warning ? darken(0.1, theme.red1) : darken(0.1, theme.primary1)}`};\n  }\n\n  input {\n    width: 100%;\n    height: 100%;\n    border: 0px;\n    border-radius: 2rem;\n  }\n`\n\nconst SlippageEmojiContainer = styled.span`\n  color: #f3841e;\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    display: none;\n  `}\n`\n\ninterface TransactionSettingsProps {\n  placeholderSlippage: Percent // varies according to the context in which the settings dialog is placed\n}\n\nconst THREE_DAYS_IN_SECONDS = ms`3 days` / 1000\n\nexport default function TransactionSettings({ placeholderSlippage }: TransactionSettingsProps) {\n  const { chainId } = useActiveWeb3React()\n  const theme = useContext(ThemeContext)\n\n  const userSlippageTolerance = useUserSlippageTolerance()\n  const setUserSlippageTolerance = useSetUserSlippageTolerance()\n\n  const [deadline, setDeadline] = useUserTransactionTTL()\n\n  const [slippageInput, setSlippageInput] = useState('')\n  const [slippageError, setSlippageError] = useState<SlippageError | false>(false)\n\n  const [deadlineInput, setDeadlineInput] = useState('')\n  const [deadlineError, setDeadlineError] = useState<DeadlineError | false>(false)\n\n  function parseSlippageInput(value: string) {\n    // populate what the user typed and clear the error\n    setSlippageInput(value)\n    setSlippageError(false)\n\n    if (value.length === 0) {\n      setUserSlippageTolerance('auto')\n    } else {\n      const parsed = Math.floor(Number.parseFloat(value) * 100)\n\n      if (!Number.isInteger(parsed) || parsed < 0 || parsed > 5000) {\n        setUserSlippageTolerance('auto')\n        if (value !== '.') {\n          setSlippageError(SlippageError.InvalidInput)\n        }\n      } else {\n        setUserSlippageTolerance(new Percent(parsed, 10_000))\n      }\n    }\n  }\n\n  const tooLow = userSlippageTolerance !== 'auto' && userSlippageTolerance.lessThan(new Percent(5, 10_000))\n  const tooHigh = userSlippageTolerance !== 'auto' && userSlippageTolerance.greaterThan(new Percent(1, 100))\n\n  function parseCustomDeadline(value: string) {\n    // populate what the user typed and clear the error\n    setDeadlineInput(value)\n    setDeadlineError(false)\n\n    if (value.length === 0) {\n      setDeadline(DEFAULT_DEADLINE_FROM_NOW)\n    } else {\n      try {\n        const parsed: number = Math.floor(Number.parseFloat(value) * 60)\n        if (!Number.isInteger(parsed) || parsed < 60 || parsed > THREE_DAYS_IN_SECONDS) {\n          setDeadlineError(DeadlineError.InvalidInput)\n        } else {\n          setDeadline(parsed)\n        }\n      } catch (error) {\n        console.error(error)\n        setDeadlineError(DeadlineError.InvalidInput)\n      }\n    }\n  }\n\n  const showCustomDeadlineRow = Boolean(chainId && !L2_CHAIN_IDS.includes(chainId))\n\n  return (\n    <AutoColumn gap=\"md\">\n      <AutoColumn gap=\"sm\">\n        <RowFixed>\n          <ThemedText.Black fontWeight={400} fontSize={14} color={theme.text2}>\n            <Trans>Slippage tolerance</Trans>\n          </ThemedText.Black>\n          <QuestionHelper\n            text={\n              <Trans>Your transaction will revert if the price changes unfavorably by more than this percentage.</Trans>\n            }\n          />\n        </RowFixed>\n        <RowBetween>\n          <Option\n            onClick={() => {\n              parseSlippageInput('')\n            }}\n            active={userSlippageTolerance === 'auto'}\n          >\n            <Trans>Auto</Trans>\n          </Option>\n          <OptionCustom active={userSlippageTolerance !== 'auto'} warning={!!slippageError} tabIndex={-1}>\n            <RowBetween>\n              {tooLow || tooHigh ? (\n                <SlippageEmojiContainer>\n                  <span role=\"img\" aria-label=\"warning\">\n                    ⚠️\n                  </span>\n                </SlippageEmojiContainer>\n              ) : null}\n              <Input\n                placeholder={placeholderSlippage.toFixed(2)}\n                value={\n                  slippageInput.length > 0\n                    ? slippageInput\n                    : userSlippageTolerance === 'auto'\n                    ? ''\n                    : userSlippageTolerance.toFixed(2)\n                }\n                onChange={(e) => parseSlippageInput(e.target.value)}\n                onBlur={() => {\n                  setSlippageInput('')\n                  setSlippageError(false)\n                }}\n                color={slippageError ? 'red' : ''}\n              />\n              %\n            </RowBetween>\n          </OptionCustom>\n        </RowBetween>\n        {slippageError || tooLow || tooHigh ? (\n          <RowBetween\n            style={{\n              fontSize: '14px',\n              paddingTop: '7px',\n              color: slippageError ? 'red' : '#F3841E',\n            }}\n          >\n            {slippageError ? (\n              <Trans>Enter a valid slippage percentage</Trans>\n            ) : tooLow ? (\n              <Trans>Your transaction may fail</Trans>\n            ) : (\n              <Trans>Your transaction may be frontrun</Trans>\n            )}\n          </RowBetween>\n        ) : null}\n      </AutoColumn>\n\n      {showCustomDeadlineRow && (\n        <AutoColumn gap=\"sm\">\n          <RowFixed>\n            <ThemedText.Black fontSize={14} fontWeight={400} color={theme.text2}>\n              <Trans>Transaction deadline</Trans>\n            </ThemedText.Black>\n            <QuestionHelper\n              text={<Trans>Your transaction will revert if it is pending for more than this period of time.</Trans>}\n            />\n          </RowFixed>\n          <RowFixed>\n            <OptionCustom style={{ width: '80px' }} warning={!!deadlineError} tabIndex={-1}>\n              <Input\n                placeholder={(DEFAULT_DEADLINE_FROM_NOW / 60).toString()}\n                value={\n                  deadlineInput.length > 0\n                    ? deadlineInput\n                    : deadline === DEFAULT_DEADLINE_FROM_NOW\n                    ? ''\n                    : (deadline / 60).toString()\n                }\n                onChange={(e) => parseCustomDeadline(e.target.value)}\n                onBlur={() => {\n                  setDeadlineInput('')\n                  setDeadlineError(false)\n                }}\n                color={deadlineError ? 'red' : ''}\n              />\n            </OptionCustom>\n            <ThemedText.Body style={{ paddingLeft: '8px' }} fontSize={14}>\n              <Trans>minutes</Trans>\n            </ThemedText.Body>\n          </RowFixed>\n        </AutoColumn>\n      )}\n    </AutoColumn>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}